E42Handler.onPage('/sitemap/tintin/shop/promo-deals', function (url) {
 var $content = $(selfcare.templates['shopbundles']({
     fallback: window.lit['promo_bundles_fallback_description'],
     modalTicket: selfcare.templates['partials/modal']({
      modalid: 'modalhelp',
      modaltitle: window.lit['modal_payment_promo'],
      header: window.lit['modal_payment_title'],
      // description: window.lit['modal_payment_price'],
        buttonduoPartial: selfcare.templates['partials/buttonduo']({
          btnclass1: "btn-primary",
          btn1data: 'data-dismiss="modal"',
          buttonleft: window.lit['modal_payment_btnleft'],
          btnclass2: "btn-primary togglelogin",
          btn2data: 'data-cash-btn',
          buttonright: window.lit['modal_payment_cash']

      })

    }),
    modalConfirmation: selfcare.templates['partials/modal']({
      modalid: 'modalconfirmation',
      modaltitle: window.lit['modal_payment_promo'],
      header: window.lit['modal_confirmation_title'],
      description: window.lit['buybundle_promo_success'],
      buttonsinglePartial: selfcare.templates['partials/buttonsingle']({
        btnsglclass: "btn-primary togglelogin",
        buttonsgldata: 'data-link="dashboard"',
        buttonsgltxt: window.lit['modal_confirmationmodal_cash']
      })

    }),
    cclass: 'green',
    title: window.lit['promo_bundle_title'],
    description: window.lit['promo_bundle_description'],
    bundletype: 'bonus',
    bundlegroupcode: (/skitto/.test(window.location.hostname) ? 7000 : 70000)

  }));
  var $modallogin = selfcare.templates['partials/modal']({
        modalid: "modallogin",
        modaltitle: window.lit['modal_login'],
        header: window.lit['modal_login_title'],
        description:window.lit['modal_login_desc'],
          buttonsinglePartial: selfcare.templates['partials/buttonsingle']({
          btnsglclass: "btn-primary togglelogin",
          buttonsgltxt: window.lit['modal_loginbtn']
        }),

      });
  $('.main').html($content).append($modallogin);

});
;
E42Handler.onPage('/sitemap/tintin/contact-us', function (url) {

  $(".main").html(selfcare.templates['contactus']({
    lit: window.lit
  }));
});
;
E42Handler.onPage('/sitemap/tintin/dashboard', function(url) {
  function fromTimestamp(timestamp){
    return moment(timestamp,'YYYY-MM-DDTHH:mm:ss.SSSZZ');
  }
  function alwaysResolve(func){
    var deferred = $.Deferred();
    func.always(function(res){
      return deferred.resolve(res);
    })
    return deferred.promise()
  }

  if(sessionStorage.getItem('loginstart') && sessionStorage.getItem('loginstart') !==''){
    var loginstart = sessionStorage.getItem('loginstart');
    var loginend = new Date();
    loginend = loginend.valueOf();
    var logindur = loginend - loginstart;
    sessionStorage.removeItem('loginstart');
    xhr({
      url:'/api/messure/login',
      data:{
        duration:logindur
      }
    })
  }
  $('.main').loading('.main','text-center center-block');

    function alwaysResolve(func){
      var deferred = $.Deferred();
      func.always(function(res){
        return deferred.resolve(res);
      })
      return deferred.promise()
    }
  // Promisify SDK's XHR.
  function xhr() {
    var deferred = $.Deferred();

    var args = Array.prototype.slice.call(arguments);

    args.push(function(err, data) {
      if (err) {
        return deferred.reject(err);
      }

      return deferred.resolve(data);
    });

    sc.xhr.apply(sc, args);

    return deferred.promise();
  }

  function calcCallTime(duration,unit,format2){
    var minutes, seconds = "";
    if (unit === "MILLISECOND") {
      duration = duration/1000;
    }
    if (unit === "MILLISECOND" || unit === "SECOND") {
      seconds = duration % 60;
    }
    if ( unit === "MINUTE"){
      seconds = 0;
    }
        var minutes = Math.floor( duration / 60 );
        if (isNaN(minutes)) {
          minutes = 0;
        }
        if (isNaN(seconds)) {
          seconds = 0;
        }
        var callTime = minutes
        if(!format2){
          callTime+= " " + window.lit.minutes;
          callTime += " " + Math.ceil(seconds) + " " + window.lit.seconds;
        }else{
          callTime+= seconds>0 ?" : " + Math.ceil(seconds) : '';
        }
        return callTime;

  }
  // buildpaygo data

  function buildPayGo(info, relation) {
    if(info.error){
      return
    }
    try{
      info = JSON.parse(info);
    } catch(error){
      info = info;
    }
    var payload = info.payload;
    if (payload.length < 1 || !payload.maxUnits){
      return ''
    }
    var relation = 1000000;
    var max = payload.maxUnits/relation;
    var used = payload.usedUnits/relation;
    if(used === 0){
      usedPercentage = 0;
    }else {
      usedPercentage = used / max * 100;
    }
    var name = payload.trafficType;
    return selfcare.templates['dashboard_paygodetail']({
        unitname: window.lit['unitmoney'],
        used: Math.round(used),
        max : Math.round(max),
        usedPercentage: usedPercentage.toFixed(2)
      });
  }

  // A helper to filter and compile a group of accounts.
  function compileGroup(accounts, bundles, currencies, name, history, details, tariffs) {

    // Filter accounts which have the given `name` (unit).
    accounts = accounts.filter(function(account) {
      return account.active &&
             account.unit.name === name;
    });

    // If filter yields no matching accounts, bail early.
    if (!accounts.length) {
      return '';
    }
    if(history.error){
      history = [];
    }
    //get datashare history
    var datashare = history.filter(function(item) {
      return item.transferamount && item.targetsubscriberaddress == details.msisdn
    });



    // Compile list of individual accounts using template.
    var compiledList = accounts.map(function(account) {
      var category ='';

      var accountTime = fromTimestamp(account.activefrom);
      var isShared = !!datashare.filter(function(item){
        var sharetime = fromTimestamp(item.timestamp);
        return account.unit.name == "KB" && item.charge == account.initialbalance && accountTime.diff(sharetime) < 1
      }).length;

      if(isShared){
        category = window.lit['tintin_dashboard_accounttype_shareddata'] || 'from friends'
      }

      if(account.category === 'TARIFF' && !isShared){
        category = window.lit['tintin_dashboard_accounttype_tariff'] || 'start up bonus';
      }
      if(account.category === 'TARIFF_PLAN' && !isShared){
        category = window.lit['tintin_dashboard_accounttype_tariffplan'] || 'plan';
        if(tariffs && tariffs.length){
          var f = tariffs.filter(function(t){
          return t.active === true;
          })
          if(f.length){
            category = f[0].name;
          }
          if(tariffs && tariffs.length){
            var filteredTariff = tariffs.filter(function(tariff){
              return tariff.id == account.accountReferenceId;
            })
            if(filteredTariff.length){
              category = filteredTariff[0].name;
            }
          }

          var accountTime = fromTimestamp(account.activefrom);
          var tariffactivations = history.filter(function(entry){
            if(entry.action === 'TARIFF_ACTIVATE'){
              var historytime = fromTimestamp(entry.timestamp);
              return historytime.diff(accountTime) < 20000 && historytime.diff(accountTime) > 0
            }
          });
          if(tariffactivations.length){
            var tariffid = tariffactivations[0].tariffid;
            var filtered = tariffs.filter(function(t){
              return t.id === tariffid;
            });
            if(filtered.length){
              category = filtered[0].name;
            }
          }
        }
      }
      if(account.category === 'BONUS' && !isShared){
        category = window.lit['tintin_dashboard_accounttype_bonus'] || 'bonus';
      }
      if(account.category === 'LOYALTY' && !isShared){
        category = window.lit['tintin_dashboard_accounttype_loyalty'] || 'bonus';
      }
      if(account.category === 'LOAN' && !isShared){
        category = window.lit['tintin_dashboard_accounttype_loan'] || 'loan';
      }
      if(account.category === 'BUNDLE_ACCOUNT' && !isShared && bundles.error == undefined){
        var bundle = '';
        //filter bundles on remaining units
        bundle = bundles.filter(function(item){
          if(item.remainingunits && item.remainingunits.unitstype){
            return item.remainingunits.unitstype.unitamount == account.balance;
          }
        });
        if(bundle.length !== 1){
          //filter on expirydate
          bundle = bundles.filter(function(item){
          return item.expirydate == account.expirydate;
        });
        }
        if(bundle.length !== 0){
          //active bunle found set bundlename
          category = bundle[0].name;
        }
        if(bundle.length == 0){
          //no active bundle found -> must be datatranfer
          category = window.lit['tintin_dashboard_accounttype_shareddata'] || 'from friends'
        }
      }
      return selfcare.templates['dashboard_bundledetail']({
        name: '<b class="col-xs-4" style="color:black;">' + category + '</b>' + ' ' + account.name,
        unitname: window.lit['unit' + name.toLowerCase()],
        expirydate: fromTimestamp(account.expirydate).format('LLL'),
        used: name=='Seconds' ? calcCallTime(account.balance,'SECOND',true) : with2Decimals(account.balance / account.unit.relation),
        usedPercentage: (account.balance / account.initialbalance * 100)
          .toFixed(2)
      });
    }).join('');

    // Aggregate available balance.
    var available = accounts
      .map(function(account) {
        return account.initialbalance / account.unit.relation;
      })
      .reduce(function(a, b) {
        return a + b;
      });


    var displayavailable = name=='Seconds' ? calcCallTime(available * 60,'SECOND',true) : with2Decimals(available);
    available = with2Decimals(available);

    // Aggregate used balance.
    var used = accounts
      .map(function(account) {
        return account.balance / account.unit.relation;
      })
      .reduce(function(a, b) {
        return a + b;
      });
    var displayused = name=='Seconds' ? calcCallTime(used * 60,'SECOND',true) : with2Decimals(used);
    used = with2Decimals(used);
    // Compile final content of group from template.
    var compiled = selfcare.templates['dashboard_bundlegroup']({
      lit: window.lit,
      name: window.lit['unit' + name.toLowerCase() + 'name'],
      description: window.lit['unit' + name.toLowerCase() + 'description'],
      unitname: window.lit['unit' + name.toLowerCase()],
      buylink: "buy" + name.toLowerCase() + "bundle",
      buytooltip: window.lit['dashboard_tooltip_buy'+ name.toLowerCase()],
      showBuyToolTop: name.toLowerCase() !== 'seconds',
      available: displayavailable,
      used: displayused,
      type: name.toLowerCase(),
      usedPercentage: (Math.round(used) / available * 100).toFixed(2),
      compiledList: compiledList,
      plus: selfcare.templates['partials/image']({
        href: '#svg-more',
        viewbox: "0 0 26 26",
        classes:"circlesign"}),
      arrow: selfcare.templates['partials/image']({
        href: '#expand-icon-inverse',
        viewbox: "0 0 26 26",
        classes:"circlesign"})
    });

    return compiled;
  }

  $.when(
    alwaysResolve(xhr('/api/me/details')),
    alwaysResolve(xhr('/api/service/accounts?active=true')),
    alwaysResolve(xhr('/api/service/emergencyloan/status')),
    alwaysResolve(xhr('/api/service/balance')),
    alwaysResolve(xhr({url:'/api/service/costcontrol/usage',hideError:true},{trafficType: 'DATA', zoneType : 'HPLMN'}) ),
    alwaysResolve(xhr('/api/service/currencies')),
    alwaysResolve(xhr({url: '/api/service/bundles/me', hideError:true})),
    alwaysResolve(xhr({url: '/api/service/history/admin',hideError:true})),
    alwaysResolve(xhr({url: '/api/service/tariffplan',hideError:true})),
    alwaysResolve(xhr({url: '/api/service/tariffs',hideError:true})),
    alwaysResolve(xhr({url: '/api/service/tariff',hideError:true})),
    alwaysResolve(xhr({url: '/api/service/openrest/accounts/getAccounts',hideError:true})),
    alwaysResolve(xhr({url: '/api/service/volte',hideError:true}))
  ).done(function(details, accounts, emergencyloan, mainbalance, paygo, currencies, bundles, history, tariffplans, tariffs, tariff, orAccounts, volte) {
    volte = ( volte && volte.volteEnabled ? true : false );
    if(!Array.isArray(tariffplans)){
      tariffplans = [tariffplans];
    }

    if(tariffplans && tariffplans[0] && tariffplans[0].tariffplantype){
      tariffplans[0].tariffplantype.map(function(t){
        tariffs.push(t);
      });
    }

    tariffs.map(function(t){
      if(t.id === tariff[0].id){
        t.active = true;
      }
    })

    // The name.
    var name = details.givenName;

    // The balance.

    var balance = '0.00';
    if(!mainbalance.error){
      balance = with2Decimals(mainbalance.filter(function(account) {
        return account.currencyid === 101000
      }).map(function(account) {
          return account.balance / account.unit.relation;
      }));
    }


    var balanceExpiryDate = accounts.filter(function(account) {
      return account.category === 'MAIN'
    });
    if( balanceExpiryDate.length ) {
      balanceExpiryDate = fromTimestamp(balanceExpiryDate[0].expirydate).format('LLL');
    }
    else{
      balanceExpiryDate = false;
    }

    //combine oraccounts and  accounts
    if(orAccounts && orAccounts.payload && accounts){
      accounts.map(function(account){
        var filtered = orAccounts.payload.filter(function(it){
           return it.accountId == account.accountid;
        })
        if(filtered.length){
          account.accountReferenceId = filtered[0].accountReferenceId;
        }
      })
    }
    // The groups.
    var compiledGroups = [
      compileGroup(accounts, bundles, currencies, 'KB', history, details,tariffs),
      buildPayGo(paygo,'KB'),
      compileGroup(accounts, bundles, currencies, 'Seconds', history, details, tariffs),
      compileGroup(accounts, bundles, currencies, 'SMS', history, details, tariffs)
    ].join('');

    // get emergenlyloans taken
    var loanAmount, loanActDate, loanExpDate= '';
    var description_long = window.lit['dashboard_desc_long'];
    var loans = accounts.filter(function(account) {
      return account.category === 'LOAN'
    });
    var balanceClass;
    console.log(emergencyloan);
    if (typeof(emergencyloan) === 'object' && emergencyloan && emergencyloan[0] && emergencyloan[0].loandetail) {
      if (emergencyloan[0].loandetail.repayment.amountoutstanding) {
        // there can only be one active loan
        loanAmount = loans[0].initialbalance / loans[0].unit.relation;
        loanExpDate = fromTimestamp(loans[0].expirydate).format('LLL');
        loanActDate = fromTimestamp(loans[0].activefrom).format('LLL');
        description_long = window.lit['dashboard_desc_long_emergency']
        .replace('{{amount}}',loanAmount)
        .replace('{{activeFrom}}',loanActDate)
        .replace('{{expiryDate}}',loanExpDate);
         balanceClass="text-danger";
      }
    }
    // get last call












    xhr({url:'/api/service/history/traffic/voice_mo', hideError: true},
      function(err,res){
        if(err){
          var callduration = "<span class='pink'> 0 min 0 second</span>";
          var lastCall = window.lit.dashboard_calltono
            .replace("{{time}}", callduration);

        }
        else{
          var calledNumber = res[0].cdpa;
          var callduration = res[0].usedUnits;
          var callunit = res[0].unit;
          callduration = calcCallTime( callduration, callunit);
          var lastCall = window.lit.dashboard_callto
            .replace("{{callto}}", calledNumber)
            .replace("{{time}}", callduration);

        }

        // Compile final content of page from template.
        var compiled = selfcare.templates['dashboard']({
          lit:window.lit,
          name: name,
          balance: balance,
          balanceExpiryDate : balanceExpiryDate,
          balanceClass: balanceClass,
          compiledGroups: compiledGroups,
          lastCall : lastCall,
          desc_long : description_long,
          volte: volte,
        });

        $('.main').html(compiled);

        /*activate bootstrap tooltip*/
        $('[data-toggle="tooltip"]').tooltip();

        //get transfered balance from history
        sc.xhr({url:'/api/service/history/admin?targetsubscriberaddress=' + details.msisdn + '&timestamp>' + moment().subtract(3,'days').format('YYYY-MM-DD'), updateService:true, hideError: true},
          function(err,data){
            var transferedData = false
            if (data && data.length > 0) {
              transferedData = data.filter(function(account){
                return account.currency.unitname === 'Taka'
              });
              if (transferedData.length > 0) {
                transferedData = transferedData.map(function(transferedData){
                  var account = {};
                  account.expires = fromTimestamp(transferedData.timestamp).add(3,'days').format('LLL');
                  account.timestamp = fromTimestamp(transferedData.timestamp).format('LLL');
                  account.amount = Math.round(transferedData.charge / transferedData.currency.relation);
                  account.currency = transferedData.currency.unitname;
                  return account;
                });
              }
            }
            $('[data-balance-details]').on('click', function(){
              console.log(balance);
              console.log(loans);
              var loan = false;
              if (loanAmount > 0 ){
                loan = {
                    amount: loanAmount || 0,
                    validuntil : loanExpDate
                  }
              }
              var $detailsmodal = $(selfcare.templates['partials/modal']({
                modalid: 'balancedetails',
                modaltitle: window.lit['dashboard_balance_details_title'],
                description: selfcare.templates['partials/balancedetails']({
                  lit:window.lit,
                  balance : {
                    amount: balance,
                    validuntil: balanceExpiryDate
                  },
                  loan : loan,
                  transfered: transferedData
                }),
                buttonsinglePartial: selfcare.templates['partials/buttonsingle']({
                  buttonsgldata: 'data-dismiss="modal"',
                  buttonsgltxt: window.lit['error_btn_ok']
                })
              }));

              $('body').append($detailsmodal);

              $detailsmodal.modal();
            });
          }
        )
    });
  });
});
;
E42Handler.onPage('/sitemap/tintin/shop/internet-packages', function(url) {
 //Main template.
  var $content = $(selfcare.templates['shopbundles']({
    modalTicket: selfcare.templates['partials/modal']({
      modalid: 'modalhelp',
      modaltitle: window.lit['modal_payment_data'],
      header: window.lit['modal_payment_title'],
      //description: window.lit['modal_payment_price'],
        buttonduoPartial: selfcare.templates['partials/buttonduo']({
          btnclass1: "btn-primary",
          btn1data: 'data-dismiss="modal"',
          buttonleft: window.lit['modal_payment_btnleft'],
          btnclass2: "btn-primary togglelogin",
          btn2data: 'data-cash-btn',
          buttonright: window.lit['modal_payment_cash']

      })

    }),
   /* modalConfirm: selfcare.templates['partials/modal']({
      modalid: 'modalconfirm',
      modaltitle: window.lit['modal_confirm'],
      header: window.lit['modal_confirm_title'],
      description: window.lit['modal_confirm_campaign'] +
        window.lit['modal_confirm_price'],
        buttonduoPartial: selfcare.templates['partials/buttonduo']({
        btnclass1: "btn-primary",
        btn1data: 'data-dismiss="modal"',
        buttonleft: window.lit['modal_confirm_btnleft'],
        btnclass2: "btn-primary",
        buttonright: window.lit['modal_confirm_back'],
        btn2data: 'data-cash-btn'

      })

    }),*/
    modalConfirmation: selfcare.templates['partials/modal']({
      modalid: 'modalconfirmation',
      modaltitle: window.lit['modal_payment_data'],
      header: window.lit['modal_confirmation_title'],
      description: window.lit['buybundle_data_success'],
      buttonsinglePartial: selfcare.templates['partials/buttonsingle']({
        btnsglclass: "btn-primary togglelogin",
        buttonsgldata: 'data-link="dashboard"',
        buttonsgltxt: window.lit['modal_confirmationmodal_cash']
      })

    }),

    cclass: 'violet',
    title: window.lit['data_bundle_title'],
    description: window.lit['data_bundle_description'],
    bundletype: 'DATA',
    bundlegroupcode: /skitto/.test(window.location.hostname) ? 2000 : 10000

  }));

  var $modallogin = selfcare.templates['partials/modal']({
      modalid: "modallogin",
      modaltitle: window.lit['modal_login'],
      header: window.lit['modal_login_title'],
      description:window.lit['modal_login_desc'],
        buttonsinglePartial: selfcare.templates['partials/buttonsingle']({
        btnsglclass: "btn-primary togglelogin",
        buttonsgltxt: window.lit['modal_loginbtn']
      }),

    });

  $('.main').html($content).append($modallogin);
});
;
E42Handler.onPage('/sitemap/tintin/editprofile', function (url) {
  var birthdate_day = [];
  for (i = 1; i<=31; i++){
    var val = i;
    if ( val < 10 ){
      val = "0" + i;
    }
    birthdate_day.push({ value: i , name: val } );
  }
  var birthdate_month = [];
  for (i = 0; i< 12; i++){
    var litname = 'month'+ (i+1);
    if (i < 9) {
      var litname = 'month0'+ (i+1);
    }

    var val = window.lit[litname];
    birthdate_month.push({ value: i , name: val } );
  }
  var birthdate_year = [];
  var currYear = new Date().getFullYear();
  for (i = currYear - window.lit.profile_birthyearmin;
     i >= currYear - window.lit.profile_birthyearmax; i--){
    birthdate_year.push({ value: i , name: i } );
  }

  $('.main').html(selfcare.templates['editprofile']({
    lit: window.lit,
    updateForm: selfcare.templates['forms/update']({
      lit: window.lit,
      birthdate_day : birthdate_day,
      birthdate_month: birthdate_month,
      birthdate_year: birthdate_year,
      imagesvg: selfcare.templates['partials/image']({
        href: '#svg-down-arrow-icon-blue',
        viewbox: "0 0 10 7"
      }),
    }),
    securityForm: selfcare.templates['forms/security']({
      lit: window.lit
    }),
    facebookForm: selfcare.templates['forms/facebook']({
      lit: window.lit
    })
  }));
});

;
E42Handler.onPage('/sitemap/tintin/faq', function (url) {

  var endPoint = window.aliases.faqservice;

  $.ajax({
    method: "GET",
    url: endPoint
  }).done(function (response) {

    if (response.length === 0) {
      console.log("There are not data in db.");
    }

    $('.main').html(selfcare.templates['faq']({
      apidata: response,
      lit:window.lit
    }));

    $("#contactus-button").on("click", function () {
      window.location = window.aliases.contactus;
    });

  }).fail(function (jqXHR) {
    console.log("Service error.");
  });

});
;
E42Handler.onPage('/sitemap/tintin/forgotpassword', function (url) {

  $('.main').html(selfcare.templates['forgotpassword']({
    lit:window.lit,
    // image: selfcare.templates['partials/image']({
    //   href: '#svg-sorry-reset',
    //   viewbox: "0 0 194.56 223.13",
    //   classes:"sadicon"
    // }),
    forgotpasswordForm: selfcare.templates['forms/forgotpassword']({
      lit:window.lit
    })
  }));

});
;
E42Handler.onPage('/sitemap/tintin', function (url) {

  $('.main').html(selfcare.templates['landingpage']({
    lit:window.lit,
     image: selfcare.templates['partials/image']({
      href: '#svg-happy-invitation',
      viewbox: "0 0 130 100.7",
      height: "124px",
      width: "160px",
      classes: "invitationicon"
    }),
    invitationForm: selfcare.templates['forms/invitation']({
      lit:window.lit
    })
  }));

});
;
//set timezone
moment.tz.setDefault("Asia/Dhaka");
function with2Decimals(num) {
  var m = num.toString().match(/^-?\d+(?:\.\d{0,2})?/);
  if(m && m[0]){
    return m[0];
  }
  else{
    return '0.00';
  }
}

function fixedZero(num){
  return num.toFixed(0);
}

  // Promisify SDK's XHR.
  function xhr() {
    var deferred = $.Deferred();

    var args = Array.prototype.slice.call(arguments);

    args.push(function(err, data) {
      if (err) {
        return deferred.reject(err);
      }

      return deferred.resolve(data);
    });

    sc.xhr.apply(sc, args);

    return deferred.promise();
  }

  function alwaysResolve(func){
    var deferred = $.Deferred();
    func.always(function(res){
      return deferred.resolve(res);
    })
    return deferred.promise()
  }

  function digitizeNumber(n){
    return n > 9 ? "" + n: "0" + n;
  }

  function calcCallTime(duration,unit){
    var ctime =  moment.duration(duration);
    var mUnit = 'ms';
    if(unit == 'SECOND') {
      mUnit = 's';
    }else if(unit=='MINUTE'){
      mUnit = 'm';
    }

    return digitizeNumber(ctime.hours())+':'+digitizeNumber(ctime.minutes())+':'+digitizeNumber(ctime.seconds());
  }

  function calcDataAmount(amount,unit,tofixed) {
    tofixed = tofixed || 2;
    var relation = 1; //MB
    if(unit == 'BYTE') {
      relation = 1048576;
    }else if(unit == 'KILOBYTE') {
      relation = 1024;
    }

    return (amount/relation).toFixed(tofixed)+' MB';
  }

  function getHistory(options) {
      var deferred = $.Deferred();
      var servicepars = '';
      if(options && options.from && options.to){
        var fdatefrom = moment(options.from, 'YYYY-MM-DD').format('YYYY-MM-DD') + 'T00:00:00Z';
        servicepars = '?servicepar(startdate,' + fdatefrom + ')&';
        var fdateto = moment(options.to, 'YYYY-MM-DD').format('YYYY-MM-DD') + 'T23:59:59Z';
        servicepars += 'servicepar(enddate,' + fdateto + ')';
      }
      $.when(
        alwaysResolve(xhr({url:'/api/service/history/admin'+servicepars,hideError:true})),
        alwaysResolve(xhr({url:'/api/service/history/topup'+servicepars,hideError:true})),
        alwaysResolve(xhr({url:'/api/service/history/traffic'+servicepars,hideError:true})),
        alwaysResolve(xhr({url:'/api/me/details',hideError:true})),
        alwaysResolve(xhr('/api/service/tariffplan'))/*,
        alwaysResolve(xhr('/api/service/openrest/tariffs/availablePlans'))*/
      ).done(function(admin, topup, traffic,details, tariffplans/*, ortariffplans*/) {
        // general  history
        var generalhistory = [];

        var tariffplans=tariffplans[0] ? tariffplans[0].tariffplantype: [];
        //var ortariffplans = ortariffplans.payload;
        if(!Array.isArray(tariffplans) ){
          tariffplans = [tariffplans];
        }
        // sum up charges for same sessionids
        var admin2 = [];
        var seenids = [];
        if(!admin.error){
          admin.map(function(item,index){
            item.charge = [item.charge];
            item.currency = [item.currency]
          })
          admin.map(function(item, index){
            var filtered = admin.filter(function(i){
              return i.sessionid === item.sessionid;
            })
            if(filtered.length){
              var charge = [];
              var currency = [];
              filtered.map(function(f){
                 charge.push(f.charge[0]);
                 currency.push(f.currency[0]);
              });

              filtered[0].charge = charge;
              filtered[0].currency = currency;
              if(seenids.indexOf(filtered[0].sessionid) == -1){
                admin2.push(filtered[0]);
                seenids.push(filtered[0].sessionid);
              }
            }
          });
        }
        admin = admin2;

        var topup2 = [];
        var seenids = [];
        if(!topup.error){
          topup.map(function(item,index){
            item.charge = [item.charge];
            item.currency = [item.currency]
          })
          topup.map(function(item, index){
            var filtered = topup.filter(function(i){
              return (i.sessionid === item.sessionid);
            })
            if(filtered.length){
              var charge = [];
              var currency = [];
              filtered.map(function(f){
                 charge.push(f.charge[0]);
                 currency.push(f.currency[0]);
              });

              filtered[0].charge = charge;
              filtered[0].currency = currency;
              if(seenids.indexOf(filtered[0].sessionid) == -1){
                topup2.push(filtered[0]);
                seenids.push(filtered[0].sessionid);
              }

            }
          });
        }
        topup = topup2;

        //tariffplan activation
        if(!admin.error){
           var tariffactivations = admin.filter(function(item){
            return item.action === 'TARIFF_ACTIVATE'
          });
           if( tariffactivations.length > 0 ) {
              tariffactivations.map(function(tariffactivation){
                var charge = '';
                var planname = tariffplans.filter(function(plan){
                  return plan.id == tariffactivation.tariffid;
                });
                planname = planname.length? planname[0].name : 'Plan';

                if(tariffactivation.charge[0] && tariffactivation.currency[0] && tariffactivation.currency[0].relation){
                  tariffactivation.charge.map(function(item, index){
                    charge += with2Decimals(tariffactivation.charge[index] / tariffactivation.currency[index].relation) + ' ' + (window.lit['currency_'+tariffactivation.currency[index].currencyname] || tariffactivation.currency[index].currencyname) + '<br>';
                  })
                  var action = window.lit['history_action_tariff_activate'] || tariffactivation.action;
                  var amount = charge
                  var details = planname;
                  var timestamp = tariffactivation.timestamp;
                  generalhistory.push({
                    action : action,
                    charge : amount,
                    detail: details,
                    timestamp: timestamp
                  });
                }
             })
          }
        }
         //tariffplan renewal
        if(!admin.error){
           var tariffrenewals = admin.filter(function(item){
            return item.action === 'TARIFF_RENEW'
          });
           if( tariffrenewals.length > 0 ) {
              tariffrenewals.map(function(tariffrenewal){
                var charge = '';
                var planname = tariffplans.filter(function(plan){
                  return plan.id == tariffrenewal.tariffid;
                });
                planname = planname.length? planname[0].name : 'Plan';

                if(tariffrenewal.charge[0] && tariffrenewal.currency[0] && tariffrenewal.currency[0].relation){
                  tariffrenewal.charge.map(function(item, index){
                    charge += with2Decimals(tariffrenewal.charge[index] / tariffrenewal.currency[index].relation) + ' ' + (window.lit['currency_'+tariffrenewal.currency[index].currencyname] || tariffrenewal.currency[index].currencyname) + '<br>';
                  })
                  var action = window.lit['history_action_tariff_renew'] || tariffrenewal.action;
                  var amount = charge
                  var details = planname;
                  var timestamp = tariffrenewal.timestamp;
                  generalhistory.push({
                    action : action,
                    charge : amount,
                    detail: details,
                    timestamp: timestamp
                  });
                }
             })
          }
        }
        //bundle activation
        if(!admin.error && !topup.error){
          var topupbundle = topup.filter(function(item){
            return item.action === 'TOPUP_BUNDLE'
          });
          var bundleactivation = admin.filter(function(item){
            return item.action === 'BUNDLE_ACTIVATE' || item.action === 'BUNDLE_RENEW'
          });

          topupbundle.map(function(topup){
            var bundle = bundleactivation.filter(function(bundle){
              return  bundle.sessionid === topup.sessionid;
            });

            if( bundle.length > 0 ) {
              var charge = '';
              bundle[0].charge.map(function(item, index){
                charge += with2Decimals(bundle[0].charge[index] / bundle[0].currency[index].relation) + ' ' + (window.lit['currency_'+bundle[0].currency[index].currencyname] || bundle[0].currency[index].currencyname) + '<br>';
              })
              var details = '';
              topup.charge.map(function(item, index){
                details += topup.charge[index]/topup.currency[index].relation + ' ' + (window.lit['currency_'+topup.currency[index].currencyname] || topup.currency[index].currencyname) + '<br>';
              })

              if( topup.servicechannel !== 'AUTOMATIC'  && topup.servicechannel !== 'CAMPAIGN' || bundle[0].action === 'BUNDLE_RENEW' ){
                var action = bundle[0].action;

                if(bundle[0].action === 'BUNDLE_ACTIVATE'){
                  action = window.lit['history_action_bundle_activate'] || bundle[0].action;
                }
                if(bundle[0].action === 'BUNDLE_RENEW'){
                  action = window.lit['history_action_bundle_renew'] || bundle[0].action;
                }
                var amount = charge;
                var timestamp = bundle[0].timestamp;
                generalhistory.push({
                  action : action,
                  charge : amount,
                  detail: details,
                  timestamp: timestamp
                });
              }
            }
            return;
          });
        }

        // Forwarded Calls
        if(!traffic.error){
          traffic.map(function(item){
            if(item.action === "VOICE_MF") {
              var number = item.cdpa.toString();
              generalhistory.push({
                action : window.lit['history_action_voice_mf'] || 'MF Call',
                charge : item.currency.unitname=='Taka' ? with2Decimals(item.charge/item.currency.relation) +' tk' : '0 tk',
                detail: number +' - ' + calcCallTime(item.usedUnits,item.unit),
                timestamp: item.timestamp
              });
            }
          });
        }

        //OUT Calls
        if(!traffic.error){
          traffic.map(function(item){
            if(item.action === "VOICE_MO") {
              var number = item.cdpa.toString();
              generalhistory.push({
                action : window.lit['history_action_voice_mo'] || 'OG Call',
                charge : item.currency.unitname=='Taka' ? with2Decimals(item.charge/item.currency.relation) +' tk' : '0 tk',
                detail: number +' - ' + calcCallTime(item.usedUnits,item.unit),
                timestamp: item.timestamp
              });
            }
          });
        }

        //SMS
        if(!traffic.error){
          traffic.map(function(item){
            if(item.action === "SMS_MO") {
              var number = item.cdpa.toString();
              generalhistory.push({
                action : window.lit['history_action_sms_mo'] || 'OG SMS',
                charge : with2Decimals(item.charge/item.currency.relation) + ' '+ (window.lit['currency_'+item.currency.currencyname] || item.currency.currencyname),
                detail: number,
                timestamp: item.timestamp
              });
            }
          });
        }

        //PAYGO
        if(!traffic.error){
          var sums = {}
          traffic.map(function(item){
            if(item.action === "DATA" && item.charge && item.category === "TRAFFIC" && item.currency.currencyname === "Taka"){
              sums[moment(item.timestamp).format('M-D')] = (sums[moment(item.timestamp).format('M-D')] || 0) + (item.charge/item.currency.relation);
              generalhistory.push({
                action : window.lit['history_action_paygo'] || 'PayGo',
                charge : (item.charge/item.currency.relation).toFixed(5) + ' '+ (window.lit['currency_'+item.currency.currencyname] || item.currency.currencyname),
                detail: calcDataAmount(item.usedUnits,item.unit,5),
                timestamp: item.timestamp
              })
            }
          });
          console.log('paygosums',sums);
        }

        //balanceshare

        if(!admin.error){
          var units = [101000,101003];
          admin.map(function(item) {
            var hasCurrency = item.currency.filter(function(item){
              return item && item.currencyid && units.indexOf(item.currencyid) >= 0;
            }).length ? true : false;
            if(item.transferamount && item.targetsubscriberaddress != details.msisdn && hasCurrency ){
              var number = item.targetsubscriberaddress.toString();
              var amount = ''
                var func =  with2Decimals;
                if ( !/taka|tk/.test(item.currency[0].currencyname.toLowerCase()) ) {
                  func = fixedZero;
                }
                splittedtranferfullamount = item.charge[0] !== item.transferamount ? ' / ' + func(item.transferamount / item.currency[0].relation) : '';
                item.charge.map(function(it,index){
                  amount += func(it / item.currency[index].relation) + splittedtranferfullamount + ' ' + window.lit['currency_'+item.currency[index].currencyname.replace(/\s/g, '_')] + '<br>';
                });
              generalhistory.push({
                action: window.lit['history_action_balance_transfer'] || "Balance Transfer",
                charge: amount,
                detail: number,
                timestamp: item.timestamp
              })
            }

          });
        }


        //reload history
        var reloadhistory = [];

        if(!topup.error){
          topup.map(function(item){
            if( (item.action === "TOPUP" || item.action === "TOPUP_BONUS") && item.category ==="TOPUP"){
              var amount = ''
              item.charge.map(function(it,index){
                var func = with2Decimals;
                if (!/taka|tk/.test(item.currency[index].currencyname.toLowerCase())){
                  func = fixedZero;
                }
                amount += func(it / item.currency[index].relation) + ' ' + (window.lit['currency_'+item.currency[index].currencyname.replace(/\s/g, '_')] || item.currency[index].currencyname) + '<br>'
              });
              reloadhistory.push({
                action:window.lit['history_action_reload'] || 'reload',
                charge: amount,
                timestamp: item.timestamp
              })
            }
          })
        }

        //balanceshare

        if(!admin.error){
          var units = [101000,101003];
          admin.map(function(item) {
            var hasCurrency = item.currency.filter(function(item){
              return item && item.currencyid && units.indexOf(item.currencyid) >= 0;
            }).length ? true : false;
            if(item.transferamount && item.targetsubscriberaddress == details.msisdn && hasCurrency ){
              var number = item.targetsubscriberaddress.toString();
              var amount = ''
                var func =  with2Decimals;
                if ( !/taka|tk/.test(item.currency[0].currencyname.toLowerCase()) ) {
                  func = fixedZero;
                }
                splittedtranferfullamount = item.charge[0] !== item.transferamount ? ' / ' + func(item.transferamount / item.currency[0].relation) : '';
                item.charge.map(function(it,index){
                  amount += func(it / item.currency[index].relation) + splittedtranferfullamount + ' ' + window.lit['currency_'+item.currency[index].currencyname.replace(/\s/g, '_')] + '<br>';
                });
              reloadhistory.push({
                action: window.lit['history_action_received_balance'] || "Received Balance",
                charge: amount,
                detail: number,
                timestamp: item.timestamp
              })
            }

          });
        }


        //sort history
        generalhistory = generalhistory.sort(function(a,b) {
          return (moment(b.timestamp).diff(a.timestamp));
        });
        reloadhistory = reloadhistory.sort(function(a,b) {
          return (moment(b.timestamp).diff(a.timestamp));
        });

        var items = {
          admin: generalhistory,
          topup: reloadhistory
        };
        return deferred.resolve(items);
      })
    return deferred.promise();
  }

  Handlebars.registerHelper('link', function(value, absolute){
    // Beispiel für Parameter-Übergabe und Handlebars-Platzhalter:  Einfach hinten dazuschreiben. Vergesst die querys oder sonstige Parameter
    // <a href="{{link "meineWarengruppenDetails"}}?warengruppe={{this.IDWarengruppe}}">  ==> erzeugt <a href="/meineWarengruppen/WarengruppenDetails?warengruppe=320">
    var link = value;
    if (aliases[value]) {
       link = aliases[value] || value;
    }
    if(absolute == 1){
     link = location.protocol + '//' + location.hostname + link;
    }
    return '' + link;
  });

  //
  // Handle sc errors
  //
  var loginformtriggered = false; //to show different error when login through form
  //because login is used also on signup

  var c = 0;
  function showError(err) {
     c++;
    var page = '';
    if (!loginformtriggered) {
      page = window.location.pathname.substring(window.location.pathname.lastIndexOf("/") + 1);
      if (window.location.pathname.indexOf('transfer') >= 0) {
        page = window.location.pathname.substring(window.location.pathname.indexOf("transfer"));
      }
    }
    var error = err.error || "";
    var error_description = err.error_description || "";
    //passwordcomplexity error
    if (error_description === "'password' must have min. 8 chars, a digit and one of '!@#$%^&*')"){
       error_description = 'pwdcomp';
    }
    error = error.replace(/\s/g,'_');
    error_description = error_description.replace(/\s/g,'_');
    var errortitle = window.lit['error_title_' + error]
    || window.lit['error_title'] || err.error;
    var errordescription = window.lit['error_' + page + '_' + error_description] || window.lit['error_' + error_description] || err.error_description;
    var errorheadline =   window.lit['error_headline_' + page + '_' +
    error] || window.lit['error_headline_' + error]
    ||   err.error;
    if (page !== '' && !(window.lit['error_' + page + '_' + error_description] || window.lit['error_' + error_description]) ) {
      // trow general error for balance and data transfer
      errordescription = window.lit['error_' + page + '_general'];
    }

    /*
     * Whatever this pile of shit over this line does,
     * I don't care and bring my own solution (no better).
     */
    if (err.error_description === 'The given credentials are invalid')
      errordescription = window.lit['error_oauth_invalid_credentials'];
    if (err.error_description === 'The given credentials are invalid (account blocked)')
      errordescription = window.lit['error_oauth_account_blocked'];

    //resetloginformtriggered
    if (loginformtriggered) {
      loginformtriggered = false;
    }
    var $error = $(selfcare.templates['partials/modal']({
      modalid: 'error-' + c,
      modaltitle: errorheadline,
      header: errortitle,
      description: errordescription,
      buttonsinglePartial: selfcare.templates['partials/buttonsingle']({
        buttonsgldata: 'data-dismiss="modal"',
        buttonsgltxt: window.lit['error_btn_ok']
      })
    }));

    $('body').append($error);

    $error.modal();
  }

  $(document).on('sc:error', function(event, err) {
    if (err.error === 'UnauthorizedError' &&
        window.location.pathname !== window.aliases.register) {
      window.location = window.aliases.register;
      return;
    } else if (err.error === 'invalid_client' &&
               window.location.pathname === window.aliases.register &&
               loginformtriggered === false) {
      return showError({
        error: err.error,
        error_description: 'Invalid OTP'
      });
    } else if (err.error === 'InternalServerError' || err.error === 'invalid_client') {
      return showError(err);
    } else if (err.error === 'Error' && /unique_email/.test(err.error_description)) {
      return showError({
        error: '',
        error_description: 'dupemail'
      });
    }

  });

function validatemsisdn(msisdn) {
  msisdn = msisdn + '';
  msisdn = msisdn.replace(/[^\d]/g, '');

  if (msisdn.slice(0, 2) !== '88') {
    msisdn = '88' + msisdn;
  }

  // FIXME: Danger zone!!! We need to fix the API so MSISDNs are
  // always treated as strings (Number.MAX_SAFE_INTEGER).
  msisdn = parseInt(msisdn, 10);

  return msisdn;
}


E42Handler.onPage('init', function(currentUrl) {

  //Place svg in header
  $('.brandicon').replaceWith(selfcare.templates['partials/image']({
    href: "#svg-tintin",
    viewbox: "0 0 77.82 21.93",
    width: "80px",
    height: "20px",
    }));

  // $('.accountdown').replaceWith(selfcare.templates['partials/image']({
  //   href: "#svg-down-arrow-icon-blue",
  //   viewbox: "0 0 10 7",
  //   width: "13px",
  //   height: "9.09px",
  // }));
  $('.accountdown').replaceWith($('<i>', { 'class': 'tintin-dropdown-icon-arrows' }).attr('data-sc-auth', true));

  //Place svg-icons in footer
  // $('.simhelpicon').replaceWith(selfcare.templates['partials/image']({
  //   href: "#svg-help",
  //   viewbox: "0 0 40 40",
  //   width: "40px",
  //   height: "40px",
  //   classes:"hidden-sm simhelp"
  // }));
  $('.simhelpicon').replaceWith($('<div>', {
    'class': 'ir-help'
  }));

  // $('.socialicon1').replaceWith(selfcare.templates['partials/image']({
  //   href: "#svg-facebook",
  //   viewbox: "0 0 40 40",
  //   classes:"socialicon"
  // }));
  // $('.socialicon2').replaceWith(selfcare.templates['partials/image']({
  //   href: "#svg-youtube",
  //   viewbox: "0 0 40 40",
  //   classes:"socialicon"
  // }));
  // $('.socialicon3').replaceWith(selfcare.templates['partials/image']({
  //   href: "#svg-twitter",
  //   viewbox: "0 0 40 40",
  //   classes:"socialicon"
  // }));
  $('.socialicon1').replaceWith($('<div>', { 'class': 'ir-social-fb' }));
  $('.socialicon2').replaceWith($('<div>', { 'class': 'ir-social-yt' }));

  // footer-icons
  $('.subfoot-reload > a > i').replaceWith($('<div>', { 'class': 'ir-subfoot-reload' }));
  $('.subfoot-datapacks > a > i').replaceWith($('<div>', { 'class': 'ir-subfoot-datapacks' }));
  $('.subfoot-balance > a > i').replaceWith($('<div>', { 'class': 'ir-subfoot-balance' }));
  $('.subfoot-share > a > i').replaceWith($('<div>', { 'class': 'ir-subfoot-share' }));
  $('.subfoot-emergencyloan > a > i').replaceWith($('<div>', { 'class': 'ir-subfoot-emergencyloan' }));
  $('.subfoot-campaign > a > i').replaceWith($('<div>', { 'class': 'ir-subfoot-campaign' }));



  //Modal for Get App
  $('.getApp-modal').html(selfcare.templates['partials/modal']({
    modalid: "modalapp",
    noclosebtn: true,
    modaltitle: window.lit['modal_app'],
    header:  window.lit['modal_apptitle'],
    description: window.lit['modal_appdesc'],
      buttonsinglePartial: selfcare.templates['partials/buttonsingle']({
      btnsglclass: "btn-primary btn-downloadApp",
      buttonsgltxt: window.lit['modal_appbtn']
    })
  }));

  //no close for appmodal
  $('#modalapp').on('hide.bs.modal',function(event){
    event.preventDefault();
    event.stopPropagation();
    return false;
  });

  //Fix dropdowns for Jasny mobile version.
  $('li.dropdown a.jasny-dropdown').on('click', function (event) {
    $(this).parent().toggleClass('open');
  });

  //opens nav-dropdowns on hover for Desktop
  $('.navbar-nav [data-toggle="dropdown"]:not(.js-login)').on('click', function(evt){
    // prevents bootstraps default functionality for dropdowns
    evt.preventDefault();
    evt.stopImmediatePropagation();
  });

  $('.navbar-nav .dropdown').hover(
    // mouseenter
    function(){
      $(this).find('[data-toggle="dropdown"]').dropdown('toggle');
    },
    // mouseleave
    function(){
      $(this).find('[data-toggle="dropdown"]').dropdown('toggle');
    }
  )




  //
  // Resizer. Login-Form
  // @Lukas: please relocate to appropriate section in Javascript
  // function is called in Line 97
  function rearrangeContent() {
    if($(window).width() < 767) {
      $('.checkrow').insertAfter($('.login-group'));
    } else {
      $('.checkrow').insertBefore($('.login-group'));
    }
    return;
  }

  function getMobileOperatingSystem() {
    var userAgent = navigator.userAgent || navigator.vendor || window.opera;
    // Windows Phone must come first because its UA also contains "Android"
    if (/windows phone/i.test(userAgent)) {
        return "Windows";
    }

    if (/android/i.test(userAgent)) {
        return "Android";
    }

    // iOS detection from: http://stackoverflow.com/a/9039885/177710
    if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {
        return "iOS";
    }

    return "unknown";
  }

  //detect if user is in app
  var appModalInterval=60000*5; // 5 minutes
  var appModalTimeout;
  function displayGetAppModal(){
    if ((getMobileOperatingSystem() === "Android" ||
        getMobileOperatingSystem() === "iOS") &&
        currentUrl.indexOf(aliases.resetlinksent) === -1 &&
        currentUrl.indexOf(aliases.forgotpassword) === -1 &&
        currentUrl.indexOf(aliases.resetpassword) === -1
        ) {
        $('#modalapp').modal('show');
        clearTimeout(appModalTimeout);
    }
    else{
      appModalTimeout=setTimeout(displayGetAppModal,appModalInterval);
    }
  }
  appModalTimeout=setTimeout(displayGetAppModal,3000);
  $(document).on('hidden.bs.modal', '#modalapp', function(){
    appModalTimeout=setTimeout(displayGetAppModal,appModalInterval);
  });

  $(document).on('click', '.btn-downloadApp', function(){
    $('#modalapp').modal('hide');
    if (getMobileOperatingSystem() === "Android") {
      window.location = window.aliases["androidapp"];
    }
    if (getMobileOperatingSystem() === "iOS") {
      window.location = window.aliases["iosapp"];
    }
  });


  (function($, sr) {
    // debouncing function from John Hann
    // http://unscriptable.com/index.php/2009/03/20/debouncing-javascript-methods/
    var debounce = function(func, threshold, execAsap) {
      var timeout;
      return function debounced() {
        var obj = this, args = arguments;
        function delayed () {
          if (!execAsap) {
            func.apply(obj, args);
          }
          timeout = null;
        };

        if (timeout) {
          clearTimeout(timeout);
        } else if (execAsap) {
          func.apply(obj, args);
        }
        timeout = setTimeout(delayed, threshold || 100);
      };
    };
    // smartresize
    $.fn[sr] = function(fn){  return fn ? this.bind('resize', debounce(fn)) : this.trigger(sr); };
  })(jQuery,'smartresize');

  $(window).smartresize(rearrangeContent);


  // set main min-height for footer-positioning
  function setMainMinHeight() {
    $('.main').css({
      'minHeight': $(window).height()-$('.main-menu').outerHeight()-$('#footer').outerHeight()
    });
  }
  setTimeout(setMainMinHeight, 1);
  $(window).smartresize(setMainMinHeight);



  //
  // Selectors.
  //

  var $login = $('[data-sc-template="login"]');

  //
  // Login/logout state.
  //

  $('[data-sc-auth]').hide();
  $('[data-sc-noauth]').show();

  $(document).on('sc:change', function() {
    sc.isLoggedIn().then(function(loggedIn) {
      if (!loggedIn)
        return;


      // Close all open modals (including login modal).
      $('.modal').modal('hide');

      // Hide login form.
      $login.hide();

      if (window.location.hash === '#payment-nosuccess') {
        showError({
          error: 'paymentfailed',
          error_description: 'paymentfailed'
        });
      }

      if (window.location.hash === '#payment-success') {
        showError({
          error: 'paymentsuccess',
          error_description: 'paymentsuccess'
        });
      }

      // replace log in with welcome, givenName in top-menu
      sc.getDetails().then(function (details) {
        var lit = $('.welcome').html();
        var givenName = details.givenName;
        givenName = givenName && givenName.toLowerCase();
        $('.welcome').html(lit.replace('{{username}}', givenName));
        $('[data-sc-noauth]').hide();
        $('[data-sc-auth]').show();

        if (details.msisdn) {
          sc.xhr('/api/service/customer/msisdn/' + details.msisdn, function (err, data) {
            // iframe chat
            var $chatContainer = $('#l42-iframe-chat-container');
            if ($chatContainer.length) {
              $('<iframe/>', {
                src: '/static-chat/chat.html?theme=tintin&messaging.chat_server_endpoint=https://chat.skitto.com&domain=https://self.skitto.com&campaignID=2&providerID=1&userID=' + data.id + '&appID=cbc8d0d4-055b-11e6-b512-3e1d05defe78',
                onload: "this.style.visibility = 'visible';",
                'data-sc-auth': '',
                allowtransparency: true,
                style: 'visibility:hidden;background-color: transparent; overflow: hidden;border:none;z-index:999;',
                id: 'l42-chat',
                'data-toggle': 'tooltip',
                'data-placement': 'top',
                title: window.lit['chat_tooltip_message']
              }).appendTo($chatContainer);
            }
          });
        }
      })

      $('.js-login').siblings('.dropdown-menu').removeAttr('data-sc-auth').removeAttr('style');
    });
  });

  $(document).on('sc:change', function() {
    sc.isLoggedIn().then(function(loggedIn) {
      if (loggedIn)
        return;

      $('[data-sc-auth]').hide();
      $('[data-sc-noauth]').show();
    });

  });

  //
  // Login form.
  //

  $login.html(selfcare.templates['login']({
    lit:window.lit,
    loginForm: selfcare.templates['forms/login']({
      lit:window.lit,
      forgotpassword: window.aliases.forgotpassword
    })
  }));

  $login.hide();

  $('.js-login').on('click', function(event) {
    event.preventDefault();

    sc.isLoggedIn()
    .then(function(isLoggedIn) {
      if (!isLoggedIn) {
        event.stopPropagation();
        rearrangeContent();
        $login.toggle();
      }
    });
  });

});

'use strict';

//
// Extend jQuery for form serialization.
//

$.fn.serializeObject = function() {
  var o = {};
  var a = this.serializeArray();
  $.each(a, function() {
    if (o[this.name] !== undefined) {
      if (!o[this.name].push) {
        o[this.name] = [o[this.name]];
      }
      o[this.name].push(this.value || '');
    } else {
      o[this.name] = this.value || '';
    }
  });
  return o;
};

//
// Extensions.
//

$.fn.extend({
  link: function(event) {
      var $element = $(this);
      console.log($element);
      var alias = $element.data('link');
        event.preventDefault();

        if (window.aliases[alias]) {
          window.location = window.aliases[alias];
        } else {
          console.log('no alias found', alias);
        }
  },
  setactivelinks: function(blubb) {

    this.each(function(index,elem){

      $element = $(elem);
       console.log($element.data('link'),window.location);

      if (window.aliases[ $element.data('link') ] === window.location.pathname) {
        console.log('activelink', $element.data('link'))
        $element.addClass("activePage");
      }
    }
    )
  },
  form: function(opts) {
    opts = opts || {};
    return this.each(function() {

      var $element = $(this);
      // TODO cleanup
      //helperfunctions
      function validateAndSubmitForm(event) {
        event.preventDefault();
        var errors= [];
        var hasError = false;
        function _focusable( element ) {
          var map, mapName, img,
          nodeName = element.nodeName.toLowerCase(),
          isTabIndexNotNaN = !isNaN( $.attr( element, "tabindex" ) );
          if ( "area" === nodeName ) {
            map = element.parentNode;
            mapName = map.name;
            if ( !element.href || !mapName
              || map.nodeName.toLowerCase() !== "map" ) {
              return false;
            }
            img = $( "img[usemap=#" + mapName + "]" )[0];
            return !!img && visible( img );
          }
          return ( /input|select|textarea|button|object/.test( nodeName ) ?
          !element.disabled : "a" === nodeName ?
            element.href || isTabIndexNotNaN :
              isTabIndexNotNaN) && _visible( element );

          function _visible( element ) {
            return $.expr.filters.visible( element ) &&
            !$( element ).parents().addBack().filter(function() {
              return $.css( this, "visibility" ) === "hidden";
            }).length;
          }
        }
        function _hasError(field, errortype) {
          hasError = true;
          var messageposition ="append"
          var messageclass = "form-errormsg text-danger"
          if (opts[action].errorHandler){
            var config = opts[action].errorHandler;
            if( config.position ) {
              messageposition = config.position;
            }
            if( config.addClass ) {
              messageclass +=' '+config.addClass;
            }
          }
          $(field).closest('.form-group').addClass("has-error");
          var errormsg = window.lit['formerror_' + errortype] || 'form_'
          + errortype + '_error';
          if($(field).data('validate-error')){
            if( window.lit[$(field).data('validate-error')] ) {
              errormsg = window.lit[$(field).data('validate-error')]
            }
          }
          var errorlabel = $(field)[0].dataset.label;
          if( errorlabel ) {
            errorlabel = (errorlabel.slice(-1) === ":" && errorlabel !== "" ) ? errorlabel : errorlabel + ":"
          }
          var err = {
             error:'form_'+ errortype + '_error',
             errormessage: errormsg,
             errorfield:$(field),
             errorlabel: errorlabel
            };

          errors.push(err);
          var fieldlabel = $(field).closest('.form-group').find('label');
          $(fieldlabel).find('.form-errormsg').remove();
          var message = '<span class="' + messageclass + '">'
            + errormsg + '</span>';
          if(messageposition === 'prepend'){
            $(fieldlabel).prepend(message);
          }
          if(messageposition === 'append'){
            $(fieldlabel).append(message);
          }
          var reseterroraction = 'focus';
          if( !_focusable($(field)[0])) {
            reseterroraction ='change';
          };
          $(field).on(reseterroraction,function(){
            $(field).parent().find('.form-errormsg').remove();
            $(field).closest('.form-group').removeClass('has-error');
          });
          console.log('has-error',errortype);
        };

        var repeatErrors = $element.find('[data-validate-repeat]')
        .filter(function() {
          var match = $element
            .find('[name="' + $(this).data('validate-repeat') + '"]');
          return $(this).val() !== match.val();
        }).map(function(){
           var field = $(this);
          _hasError(field,'equalto')
          });


        var requiredError = $element.find('[required],[data-validate-required]')
        .filter(function(){
          return !($(this).val() || $(this).prop('checked'));
        }).map(function(){
           var field = $(this);
          _hasError(field,'required')
          });

        var patternError = $element.find('[data-validate-regex]').filter(
          function() {
            var pattern = false;
            if( $(this).data('validate-regex') ) {
              pattern = new RegExp($(this).data('validate-regex') );
            }
            if( window.lit[$(this).data('validate-regex')]) {
              pattern = new RegExp(window.lit[$(this).data('validate-regex')])
            }
            if(!pattern){
              console.log('no regex pattern',$(this).data('validate-regex'))
              return true;
            };
            return !$(this).val().match(pattern);
          }).map(function(){
           var field = $(this);
           _hasError(field,'pattern')
          });

        var minError = $element.find('[min]').filter(
          function(){

            return parseInt($(this).val(),10) < parseInt($(this).attr('min'),10)
          }
        ).map(function(){
           var field = $(this);
           _hasError(field,'min')
          });
        var maxError = $element.find('[max]').filter(
          function(){
            return parseInt($(this).val(),10) > parseInt($(this).attr('max'),10)
          }
        ).map(function(){
           var field = $(this);
           _hasError(field,'min');
          });

        if (hasError) {
          if (opts[action].errorHandler){
            if(typeof( opts[action].errorHandler.callback) === 'function'){
              var callback = opts[action].errorHandler.callback;
              callback.call(null,errors);
            }
          }
            return
        }
        var data = $element.serializeObject();

        var fn = opts[action].onSubmit || opts[action];

        fn.call(null, data, $element)
        .then(function() {
          $element[0].reset();
        }).fail(function(err) {
          // err.error_description = err.error_description.replace(/\s/g, '_');
          console.log(err);
        });
      }


      //actionhandlers
      var action = $element.data('form');

      $element.on('reset', function(event) {
        event.preventDefault();
        var fn = opts[action].onReset || false;
        if (fn && typeof(fn) === "function") {
          fn.call(null, $element);
        }
      });

      $element.on('submit', function(event) {
        validateAndSubmitForm(event);
      });
      /*
      $element.on('topupsave', function(event) {
        validateAndSubmitForm(event);
      });
      $element.on('topupregister', function(event) {
        validateAndSubmitForm(event);
      }); */
    });
  },
  dateinput: function(opts){
    opts = opts || {};
    return this.each(function (i, elem){
      var $elem = $(elem);
      $elem.datepicker(opts);
    });

  },
  history: function(opts) {

    if (!this.length) {
      return;
    }

    opts = opts || {};

    var handler = {
      type: function(value) {
        if (!value) {
          return 'Unknown action';
        }
      },
      amount: function(value, context) {
        if (!value || !context.currency || !context.currency.relation) {
          return '-';
        }

        value = Math.round(value / context.currency.relation);
        // i.e.: EVO42-lit: tintin_currency_Taka = tk.
        context.currency.currencynameShort = window.lit['currency_'+context.currency.currencyname] || context.currency.currencyname;
        return [value, context.currency.currencynameShort].join(' ');
      },
      detail: function(value){
        return value;
      },
      timestamp: function(value) {
        return moment(value).format('LLL');
      }
    };

    var template = selfcare.templates['partials/history'];

    var that = this;
    getHistory().then(function(items){
      return that.each(function() {
          var $element = $(this);

          var config = $element.data('history');
          config.columns = config.columns || [];

          var data = items[config.category] || [];

          var $html = $(template({
            lit: window.lit,
            downloadpdf: true,
            fromdate:moment().add(-30,'days').format('YYYY-MM-DD'),
            todate:moment().format('YYYY-MM-DD')
          }));

          // Make cols.
          var $cols = config.columns.map(function(column) {
            return '' +
              '<th data-sort data-column="' + column + '"><span></span>' +
              (window.lit['history_column_' + column] || column) +
              '</th>';
          });
          $html.find('thead tr').html($cols.join(''));

         $html.find('form').on('submit', function(event) {
            event.preventDefault();
            var data = $(event.target).serializeObject();
            getHistory({from:data.from,to:data.to}).then(function(items){
              makeRows({
                from: data.from + 'T00:00:00.000Z',
                to: data.to + 'T23:59:59.999Z'
              });
            });
          });
          function makeRows(options) {
            options = options || {};
            var $rows = data.filter(function(item) {
              if (!options.from || !options.to) {
                return true;
              }

              return moment(item.timestamp).format('YYYYMMDDHHss') > moment.utc(options.from).format('YYYYMMDDHHss') &&
                     moment(item.timestamp).format('YYYYMMDDHHss') < moment.utc(options.to).format('YYYYMMDDHHss');
            }).map(function(item) {
              var $cols = config.columns.map(function(column) {
                var value = handler[column] &&
                            handler[column].call(null, item[column], item) ||
                            item[column];
                return '<td data-column="' + column + '">' + value + '</td>';
              });

              return '<tr class="data">' + $cols.join('') + '</tr>'
            });
            return  $html.find('tbody').html($rows.join(''));
          }
          makeRows();
          $element.html($html)
            .promise()
            .done(function(){
              var $fromInput = $('[data-datepicker="from"]'),
                  $toInput = $('[data-datepicker="to"]');
              $('[data-column="timestamp"] span').addClass('sortdesc')
              $('[data-datepicker]').dateinput({
                showOtherMonths: true,
                dateFormat: 'yy-mm-dd'
              });
            });
        });
    })

    return this.each(function() {});
  },
  bundles:function() {
    if (!this.length) {
      return;
    }
    var $bundletype = $(this).data('bundles');
    var $bundlegroup = $(this).data('bundles');
    var $container = $(this);
    $(this).loading(this,"text-center center-block");
      //
    //TODO get From Service
    //
    var $tariff = 101001;
    var bundlegroups = {};
    /*var bundlegroups = [
                        { code:1004,name: window.lit['bundlegroup_special'] },
                        { code:4000,name: window.lit['bundlegroup_daily'] },
                        { code:1001,name: window.lit['bundlegroup_weekly'] },
                        { code:1002,name: window.lit['bundlegroup_monthly'] }
                      ];

    */
    //
    //build layout
    //


     function buildbundle(itemdata,index, prefix){
      var prefix = prefix+'-'+index;
      var pricenotax = itemdata.pricenotax;
      var charge = (itemdata.defaultinitialcharge.amount/
        itemdata.defaultinitialcharge.relation).toFixed(2);
      var includedquotas = [];
      if(!Array.isArray(itemdata.includedquota.quotatype)){
        itemdata.includedquota.quotatype = [itemdata.includedquota.quotatype];
      }
      itemdata.includedquota.quotatype.map(function(includedquota){
        var quota = (includedquota.amount/includedquota.unitrelation)
        .toFixed(2) + ' ' + includedquota.currencyname;
        includedquotas.push(quota);
      });
      var description = "";
      if (itemdata.description) {
        description = "<h4>" + itemdata.description + "</h4>";
      }
      return selfcare.templates['partials/panelcollapsed']({
        id: prefix,
        title: itemdata.name,
        contentTitle: itemdata.name + ' ' +window.lit['panel_include'],
        content: includedquotas,
        description: description,
        buttonValue: window.lit['panel_buy']+charge+' '+window.lit['unitmoney'],
        buttonTarget: 'modalhelp',
        buttondata:'data-btn-buybundle',
        bundleid: itemdata.bundlecode,
        bundlename: itemdata.name,
        bundleprice: charge,
        exp: itemdata.expires,
        expunit: itemdata.expiryunit
      });
     }

     function buildbundlegroup(bundles,code,currencies){
      var a =  bundles.filter(function(filteritem){
        if (filteritem.group.code === code) {
          return filteritem;
        }
      }).filter(function(filteritem){
        return !!currencies.filter(function(item){
          if (item.id === filteritem.includedquota.quotatype.currencyid) {
            return item;
          }
        }).length;
      })
      if(code == 7000) {
        a.sort(function(a, b) {
          return a.bundlecode - b.bundlecode
        });
      }
      return a.map(function(item,index){
        return buildbundle(item,index,code);
      });
    }



     // Promisify SDK's XHR.
    function xhr() {
      var deferred = $.Deferred();

      var args = Array.prototype.slice.call(arguments);

      args.push(function(err, data) {
        if (err) {
          return deferred.reject(err);
        }

        return deferred.resolve(data);
      });

      sc.xhr.apply(sc, args);

      return deferred.promise();
    }

  function buildbundlepage(bundles,currencies,bonusbundles){
    var bundlegrouptemplates = [];
    //add bonus bundles to normal bundles
    bonusbundles.forEach(function(item){
      bundles.push(item);
    })
    //build bundlegroups
    bundles.map(function(item,index){
      var groupcode = Math.floor(item.group.code / 1000) * 1000
      if (!bundlegroups[groupcode]){
        bundlegroups[groupcode] = [];
      }
      var found = bundlegroups[groupcode].filter(function(gitem){
        return gitem.code === item.group.code
      });
      if (!found.length) {
        bundlegroups[groupcode].push(item.group);
      }
    });
    if ($bundlegroup === 7000){
      // for promo bundles there are two bundlegroups
      secondbundlegroup = bundlegroups[9000]
      if (secondbundlegroup) {
        secondbundlegroup[0].name = 'promo';
      }
    }
    bundlegroups = bundlegroups[$bundlegroup];
    if ($bundlegroup === 7000 && secondbundlegroup){
      if (bundlegroups){
        bundlegroups = bundlegroups.concat(secondbundlegroup[0])
      }
      else {
        bundlegroups = secondbundlegroup;
      }
    }

    if (!bundlegroups){
      $('[data-fallback]').html($('[data-fallback]').data('fallback'));
      $('[data-bundles]').html('');
      return;
    }
    bundlegroups.map(function(item){
      var bundlegroupindex = item.name;
      var bundlegroup = buildbundlegroup(bundles,item.code,currencies);
      bundlegrouptemplates.push(bundlegroup);
    });
    var panelcollapsedList = [];
    bundlegrouptemplates.map(function(item,index){
      var panelcollapsedListIndex=index;
      item.map(function(item,index){
        if(!panelcollapsedList[panelcollapsedListIndex]){
          panelcollapsedList[panelcollapsedListIndex] = [];
        }
        panelcollapsedList[panelcollapsedListIndex].push({id: index, panel: item});
      })

    });

    var bundlecode = $('[data-bundles]').data('bundles');

    var sortbundlegroups = {
      2000 : {'monthly': {id:1,active:true},'weekly':{id:2}, '3-day-pack':{id:3}
      },
      3000 : {'weekly':{id:1, active:true}, 'daily':{id:2}
      },
      7000 : {'promo':{id:1, active:true}
      }
    }
   var packagelisttitle = {
      2000 :  window.lit['data_packagelist_title'],
      3000 :  window.lit['sms_packagelist_title'],
      7000 :  window.lit['promo_packagelist_title']
    }

    var packageList = {
      2000: [
        {id: '1', content: window.lit['data_packagelist1']},
        {id: '2', content: window.lit['data_packagelist2']},
        {id: '3', content: window.lit['data_packagelist3']}
      ],
      3000: [
        {id: '1', content: window.lit['sms_packagelist1']},
        {id: '2', content: window.lit['sms_packagelist2']},
        {id: '3', content: window.lit['sms_packagelist3']},
      ],
      7000: [
        {id: '1', content: window.lit['promo_packagelist1']},
        {id: '2', content: window.lit['promo_packagelist2']},
        {id: '3', content: window.lit['promo_packagelist3']},
      ]
    };


    //Add Panel collapsed in a list.
    var data = [];
    panelcollapsedList.map(function(item,index){
      var tabname = (bundlegroups[index].name).replace(/\s/g,'-').toLowerCase();
      var template = {title: window.lit['bundlegroup_' +
       tabname],
        body: selfcare.templates['partials/shopcontent']({
          packageListTitle: packagelisttitle[bundlecode],
          packageList: packageList[bundlecode],
          panelcollapsedList: item}),
        id: 'tab'+sortbundlegroups[bundlecode][tabname].id || 'tabpromo',
        sortid: sortbundlegroups[bundlecode][tabname].id || 'promo',
        active: sortbundlegroups[bundlecode][tabname].active
      }
      data.push(template);
    });
    data.sort(function(a,b){
      return b.sortid - a.sortid;
    })


    var $content = selfcare.templates['partials/tabpanel']({tabs: data});

    $container.html($content);
    $('[data-btn-buybundle]').on('click', function(event) {
      sc.isLoggedIn()
      .then(function(isLoggedIn) {
        if (!isLoggedIn){
          $('#modallogin').modal('show');
          $('.togglelogin').on('click',function() {
            $('#modallogin').modal('hide');
            $('[data-sc-template="login"]').show();
          });

          return;
        }

        var bundleid = $(event.target).data('bundleid');
        var charge = $(event.target).data('bundleprice');
        var bundlename = $(event.target).data('bundlename');
        $('#modalhelp').html($('#modalhelp').html().replace('{price}',charge));
        $('#modalhelp').data('bundlename',bundlename);
        $('#modalhelp').data('bundleid', bundleid);
        $('#modalhelp').data('bundleprice', charge);
        $('#modalhelp').data('exp', $(event.target).data('exp'));
        $('#modalhelp').data('expunit', $(event.target).data('expunit'));
        $('#modalhelp').modal('show');
      });
    });

    $('.panel-default').on('show.bs.collapse', function () {
      $(this).addClass('panel-in');
    });

    $('.panel-default').on('hide.bs.collapse', function () {
      $(this).removeClass('panel-in');
    });
    // reset modalconfirmation when closed
    $(document).on('hidden.bs.modal','#modalconfirmation',function(){
      var literal =  window.lit['buybundle_sms_success'];
      if ($('#modalconfirmation .modal-title').html() === window.lit['modal_payment_data']) {
        literal = window.lit['buybundle_data_success']
      }
      $('#modalconfirmation [data-desc]').text(literal);
    });
    $(document).on('click', '[data-cash-btn]', function(event) {
      sc.isLoggedIn().then(function(isLoggedIn) {
        if (!isLoggedIn) {
          $('#modallogin').modal('show');
          $('.togglelogin').on('click',function(){
              $('#modalhelp').modal('hide');
              $('[data-sc-template="login"]').show();

          });

          return;
        }

        $('#modalhelp').modal('hide');
        var bundleid = $('#modalhelp').data('bundleid');
        console.log('buybundle',bundleid);
        sc.xhr('/api/service/bundles',{bundleid : bundleid},
          function(err, data){
            if (err) {
              return;
            }
            sc.xhr({url:'/api/service/bundles',type:'PUT'},
              data[0], function(err, data){
                var charge =  $('#modalhelp').data('bundleprice');
                var bundlename = $('#modalhelp').data('bundlename');
                var text = $('#modalconfirmation [data-desc]').text()
                  .replace('{price}', charge)
                  .replace('{bundlename}', bundlename)
                  .replace('{exp}', $('#modalhelp').data('exp'))
                  .replace('{expunit}', $('#modalhelp').data('expunit'));
                $('#modalconfirmation [data-desc]').text(text);
                $('#modalconfirmation').modal('show');
              }
            );
          }
        );
      });
    });
  }
    //xhr('/api/service/bundlegroups/'+$tariff + '/' + $bundlegroup),
    $.when(
      xhr('/api/service/bundles/'+$tariff),
      xhr('/api/service/currencies/'),
      xhr('/api/service/bundles/bonus')
    ).done(function(bundles,currencies,bonusbundles) {
        buildbundlepage(bundles,currencies,bonusbundles);
  });
  },
  loading: function(container,classes,viewbox,width,height){
    $container = $(container) || $(this);
    if(!$container.length){
      return;
    }
    $container.html(selfcare.templates['partials/image']({
      href: "#svg-loading",
      classes: "" || classes,
      viewbox: "0 0 100 100" || viewbox,
      width: "200px" || width,
      height: "200px" || height

    }));
  },
  setSwitcher: function(opts){
    console.log('set switcher');
    opts = opts || {};
    return this.each(function (i, elem){
        if((opts.state && !elem.switcher.isChecked()) || (!opts.state && elem.switcher.isChecked())) {
          if(opts.onchange) {
            elem.switcher.handleOnchange(true);
          }
          elem.switcher.setPosition(true);
          console.log('setting to:',opts.state)
      }
    });
  },
  switchery : function(opts){
    return this.each(function (i, elem){
      opts = opts || {};
      var offText = opts.offText || false;
      var onText = opts.onText || false;
      var $elem = $(elem);
      $elem.siblings('.switchery').remove();
      // var switchery = new Switchery(elem, {color: 'white',
      //           secondaryColor: 'white',
      //           jackColor: 'rgb(110, 53, 255)',
      //           jackSecondaryColor: '#ddd'
      //         });
      var switchery = new Switchery(elem, {color: '#f7038e',
                secondaryColor: '#f7038e',
                jackColor: 'white',
                jackSecondaryColor: '#ddd'
              });
      if ( elem.checked) {
        $elem.next('.switchery').removeClass('off');
        // $elem.next('.switchery').find('small').css(
        //     {'background-color': 'rgb(110, 53, 255)',
        //      'left':'30px'
        //   });
        $elem.next('.switchery').find('small').css(
            {'background-color': 'white',
             'left':'30px'
          });
        $elem.next().removeClass("off");
        $elem.prev().html(onText || window.lit.management_on);
        // $elem.prev().css({'color': 'rgb(110, 53, 255)'});
        $elem.prev().css({'color': opts.onColor || '#f7038e'});
      }
      else {
        $elem.next('.switchery').addClass('off');
        // $elem.next('.switchery').find('small').css(
        //     {'background-color': 'rgb(221, 221, 221)',
        //      'left':'0px'
        //   });
        $elem.next('.switchery').find('small').css(
            {'background-color': 'rgb(221, 221, 221)',
             'left':'0px'
          });
          $elem.next().addClass("off");
          $elem.prev().html(offText || window.lit.management_off);
          $elem.prev().css({'color': opts.offColor || 'rgb(221, 221, 221)'});
      }

      $.extend(elem,{switcher:switchery});
        $elem.on('change',function (data){
          $elem.prop('checked',elem.checked);
          if ( elem.checked) {
            $elem.next('.switchery').removeClass('off');
            // $elem.next('.switchery').find('small').css(
            //     {'background-color': 'rgb(110, 53, 255)',
            //      'left':'30px'
            //   });
            $elem.next('.switchery').find('small').css(
                {'background-color': 'white',
                 'left':'30px'
              });
            $elem.next().removeClass("off");
            $elem.prev().html(opts.onText || window.lit.management_on);
            // $elem.prev().css({'color': 'rgb(110, 53, 255)'});
            $elem.prev().css({'color': opts.onColor || '#f7038e'});
          }
          else {
            $elem.next('.switchery').addClass('off');
            $elem.next('.switchery').find('small').css(
                {'background-color': 'rgb(221, 221, 221)',
                 'left':'0px'
              });
              $elem.next().addClass("off");
              $elem.prev().html(opts.offText || window.lit.management_off);
              $elem.prev().css({'color': opts.offColor || 'rgb(221, 221, 221)'});
          }
        });
    });

  },
  emergencyloan:function(event) {
    event.preventDefault();
    //checkif portout is in progress
    sc.xhr({url:'/api/service/portout/status'},function(err,result){
      var modal;
      if(result && result[0]){
        if(result[0].portoutstatus == 'FLAG_SET'){
          modal = selfcare.templates['partials/modal']({
            modalid: "modalemergency",
            modaltitle: window.lit['modal_emloan'],
            header: window.lit['modal_emloan_portout_title'],
            description:window.lit['modal_emloan_portout_desc'],
            buttonsinglePartial: selfcare.templates['partials/buttonsingle']({
              btnsglclass: "btn-primary btn-lighter",
              buttonsgltxt: window.lit['modal_emloan_back'],
              buttonsgldata: 'data-dismiss="modal"'
            })
          })
          $(".common-modal").html(modal);
          $("#modalemergency").modal('show');
          return
        }else{
           // check if user is on a loan
            sc.xhr({url:'/api/service/emergencyloan/status'},
              function(err,result) {
                var modal;
                if(err){
                  return;
                }
                if (result[0].loandetail) {
                  if (result[0].loandetail.repayment.amountoutstanding) {
                    //user is still on a loan
                    modal = selfcare.templates['partials/modal']({
                      modalid: "modalemergency",
                      modaltitle: window.lit['modal_emloan'],
                      header: window.lit['modal_emloan_again_title'],
                      description:window.lit['modal_emloan_again_desc'],
                      buttonsinglePartial: selfcare.templates['partials/buttonsingle']({
                        btnsglclass: "btn-primary btn-lighter",
                        buttonsgltxt: window.lit['modal_emloan_back'],
                        buttonsgldata: 'data-dismiss="modal"'
                      })
                    })
                    $(".common-modal").html(modal);
                    $("#modalemergency").modal('show');
                  }
                }
                else {
                  //check if loan is available
                  sc.xhr({url:'/api/service/emergencyloan'},
                    function(err,result) {
                    var modal;
                    if(err){
                      return;
                    }

                    if(!result.length){
                     //user can not request a loan
                      modal = selfcare.templates['partials/modal']({
                        modalid: "modalemergency",
                        modaltitle: window.lit['modal_emloan'],
                        header: window.lit['modal_greedtitle'],
                        description:window.lit['modal_greeddesc'],
                          buttonsinglePartial: selfcare.templates['partials/buttonsingle']({
                          btnsglclass: "btn-primary btn-lighter",
                          buttonsgltxt: window.lit['modal_emloan_back'],
                          buttonsgldata: 'data-dismiss="modal"'
                        })
                      })
                    }
                    else{
                      var amount= '';
                      if (result[0].loaninfowitheligibility) {
                        var loandetail;
                        if(Array.isArray(result[0].loaninfowitheligibility)){
                          loandetail = result[0].loaninfowitheligibility[0].loandetail;
                        }else{
                          loandetail = result[0].loaninfowitheligibility.loandetail;
                        }

                        amount = Math.round(loandetail.amount/loandetail.amountunitrelation);
                      }
                      //user can request a loan
                      modal = selfcare.templates['partials/modal']({
                        modalid: "modalemergency",
                        modaltitle: window.lit['modal_emloan'],
                        header: window.lit['modal_emloan_title'],
                        description: window.lit['modal_emloan_desc'].replace('{amount}',amount),
                        buttonduoPartial: selfcare.templates['partials/buttonduo']({
                          btnclass1: "btn-primary btn-info",
                          buttonleft: window.lit['modal_emloan_btnleft'].replace('{amount}',amount),
                          btn1data: 'data-loan-buy',
                          btnclass2: "btn-primary btn-lighter",
                          buttonright: window.lit['modal_emloan_back'],
                          btn2data: 'data-dismiss="modal"'
                        })
                      });
                    }
                    $(".common-modal").html(modal);
                    $("#modalemergency").modal('show');
                  });
                }
            });
        }
      }
    });
  },
  changesimstate:function(event) {
    event.preventDefault();
    //get simstate
    var simstate;
    var blockmodal;
    sc.xhr('/api/service/sim', function(err,data) {
      if(err) {
        return;
      }
      simstate= data[0].state;
      if(simstate === 'ACTIVE') {
        blockmodal = selfcare.templates['partials/modal']({
          modalid: "modal-block",
          modaltitle: window.lit['modal_blocktitle'],
          header: window.lit['modal_blockheader'],
          description: window.lit['modal_blockdesc'],
            blockForm: selfcare.templates['forms/block']({
              lit:window.lit
          })
        });
      }else{
        blockmodal = selfcare.templates['partials/modal']({
          modalid: "modal-block",
          modaltitle: window.lit['modal_unblocktitle'],
          header: window.lit['modal_unblockheader'],
          description: window.lit['modal_unblockdesc'],
            buttonduoPartial: selfcare.templates['partials/buttonduo']({
            btnclass1: "btn-primary",
            buttonleft: window.lit['modal_unblockbtn'],
            btn1data: 'data-sim-unblock',
            btnclass2: "btn-primary btn-lighter",
            buttonright: window.lit['modal_emloan_back'],
            btn2data: 'data-dismiss="modal"'
          }),
        });
      }
      $(".modalblockHolder").html(blockmodal);
      $('#modal-block').modal('show');
      $('[data-form="simblock"]').form({
        simblock: {
          onReset:function(){

          },
          onSubmit: function(data){
              console.log(data.blocktext);
              if(data.blocktext !=="Block"){
                $('#blocktext').addClass('has-error');
                   $error = {error:'SIM block',
                             error_description:'invalidBlockMsg'
                           }
                  showError($error);
                return;
              }
              sc.xhr({url:'/api/service/sim', type:'POST'}, function(err,data){
                if(err) {
                  return;
                }
                sc.xhr('/api/me/details', function(err,data){
                  if(err) {
                    return;
                  }
                  var blockmodal = selfcare.templates['partials/modal']({
                    modalid: "modal-blocked",
                    modaltitle: window.lit['modal_blocktitle'],
                    header: window.lit['modal_blockedheader'],
                    description: window.lit['modal_blockeddesc']
                    .replace('{{username}}',data.givenName + " "
                      + data.familyName),
                    buttonsinglePartial:
                    selfcare.templates['partials/buttonsingle']({
                      btnsglclass: "btn-primary btn-lighter",
                      buttonsgltxt: window.lit['modal_emloan_back'],
                      buttonsgldata: 'data-dismiss="modal"'
                    })
                  });
                  $('#modal-block').modal('hide');
                  $('.modalblockedHolder').html(blockmodal);
                  $('#modal-blocked').modal('show');
                  $('[data-simstatetitle]').html(
                    window.lit.management_unblocktitle
                  );
                  $('[data-simstatedesc]').html(
                    window.lit.management_unblockdesc
                  );
                });
              });
          }
        }
      });
    });
  },
  simunblock: function(event){
    sc.xhr({url:'/api/service/sim', type:'PUT'}, function(err,data){
      if(err){
        return;
      }
      sc.xhr('/api/me/details',function(err,data){
        if(err){
          return;
        }
        var unblockedmodal = selfcare.templates['partials/modal']({
        modalid: "modal-unblocked",
        modaltitle: window.lit['modal_unblocktitle'],
        header: window.lit['modal_unblockedheader'],
        description: window.lit['modal_unblockeddesc']
        .replace('{{username}}',data.givenName + " " + data.familyName),
          buttonsinglePartial: selfcare.templates['partials/buttonsingle']({
            btnsglclass: "btn-primary btn-lighter",
            buttonsgltxt: window.lit['modal_unblocked_back'],
            buttonsgldata: 'data-dismiss="modal"'
          })
        });
        $('#modal-block').modal('hide');
        $(".modalblockedHolder").html(unblockedmodal);
        $('#modal-unblocked').modal('show');
        $('[data-simstatetitle]').html(
          window.lit.management_blocktitle
        );
        $('[data-simstatedesc]').html(
          window.lit.management_blockdesc
        );
      })
    });
  }

});

$(function() {

  //
  // Init links.
  //
   $('[data-link]').setactivelinks();
  $(document).on('click','[data-link]',function(event){
    $(this).link(event);
  });

  $(document).on('click','[data-changesimstate]',function(event){
    $(this).changesimstate(event);
  });

  $(document).on('click','[data-sim-unblock]',function(event){
    $(this).simunblock(event);
  });

  $(document).on('click','[data-emergencyloan]',function(event){
    $(this).emergencyloan(event);
  });

  $(document).on('click','[data-btntopupamount]',function(event){
    event.preventDefault();
    var topupamount = parseInt($('[data-topupamount]').val(),10) || 0;
    topupamount += parseInt(window.lit.topup_amount_step,10);
    $('[data-topupamount]').val(topupamount);
  });

  $(document).on('click','[data-loan-buy]',function(){
    sc.xhr({url:'/api/service/emergencyloan', type:'POST'},
      function(err, data) {
        if (!err) {
          $('#modalemergency').modal('hide');
          loaninfo = data[0].loaninfo;
          var expiryDate =  moment(loaninfo.expirydate).format('DD/MM/YYYY');
          var amount = loaninfo.loandetail.amount / loaninfo.loandetail.amountunitrelation;
          var emloansuccessDescr = window.lit['modal_emloan_success']
            .replace('{expiryDate}', expiryDate)
            .replace('{amount}', amount);
          modal = selfcare.templates['partials/modal']({
              modalid: "modalemergency",
              modaltitle: window.lit['modal_emloan'],
              header: window.lit['tintin_modal_emloan_success_title'],
              description: emloansuccessDescr,
              buttonduoPartial: selfcare.templates['partials/buttonsingle']({
                buttonsgldata: 'data-link="dashboard"',
                btnsglclass: "btn-primary btn-lighter",
                buttonsgltxt: window.lit['modal_emloan_success_back']
              })
            });
          $(".common-modal").html(modal);
          $("#modalemergency").modal('show');
        }
        else {
          console.log('data',data);
          console.log('err',err);
          $('#modalemergency').modal('hide');
        }
    });
  });


  //
  // Init forms.
  //
  $('[data-form]').form({
    login: function(data, $element) {
      var d = new Date();
      sessionStorage.setItem('loginstart',d.valueOf());
      var username = validatemsisdn(data.username);
      var password = data.password;
      loginformtriggered = true;
      return sc.login(
        username,
        password
      ).then(function(result) {
        if ($element.find('[name="persist"]').prop('checked')) {
          sc.persistLogin();
        }

        window.location = window.aliases.dashboard;

        return result;
      });
    },
    logout: function() {
      return sc.logout().then(function(result) {
        window.location = window.aliases.register;
        return result;
      });
    },
    register: {
      onSubmit: function(data, $element) {
        data.msisdn = data.msisdn;
          if (!validatemsisdn(data.msisdn) )
          {
            var $error = {
              error : window.lit['topup_err'],
              error_description: window.lit['topupdesc_err']
            };
            showError($error);
            return
          }
          data.msisdn = validatemsisdn(data.msisdn);
        return sc.register(data).then(function() {
          $element.prop('disabled', 'true');
          $element.find('[type="submit"]').prop('disabled',true);
          var disabledTime = 30000;
          $element.find('[type="submit"]').html(window.lit['register_resend_otp'] + window.lit['register_resend_otp_countdown'] + '<span data-countdown>' + disabledTime/1000 + 's</span>');
          clearTimeout(enableButtonTimeout);
          var enableButtonTimeout = setTimeout(function(){
            $element.find('[type="submit"]').prop('disabled',false);
            clearInterval(countDown);
            $element.find('[type="submit"]').html(window.lit['register_resend_otp']);
          },disabledTime);

          var countDown = setInterval(function(){
            disabledTime = disabledTime - 1000;
            if(disabledTime > 0){
              $element.find('[data-countdown]').html(disabledTime/1000 + 's');
            }
          },1000);



          // Set MSISDN for verify step and show.
          var $verifyStep = $('[data-verify]');
          $verifyStep
            .find('input[name="username"]')
            .attr('readonly', 'readonly')
            .val(data.msisdn);
          $verifyStep.show();
        });
      },
      errorHandler: {
        callback: function(err){
          $.each(err,function(index,error){
           showError({
            error: error.error,
            error_description: error.errormessage
           });
          })

        }
      }
    },
    forgotpassword: {
      onSubmit: function(data) {
        data.msisdn = validatemsisdn(data.msisdn)+'';
        return sc.forgotpassword(data).then(function() {
          window.location = window.aliases.resetlinksent + '#' + data.msisdn;
        });
      }
    },
    resetpassword: {
      onSubmit: function(data) {
        return sc.getCredentials().then(function(credentials) {
          if (credentials.type !== 'password') {
            return;
          }
          if(data.password !== data.passwordrepeat){
            showError({
              error:'error',
              error_description: 'passwordnomatch'
            })
            return
          }
          return sc.useCredentials(
            credentials.username,
            data.password,
            {'sendpasswordsms': data.sendpasswordsms}
          ).then(function(result) {
            window.location = window.aliases.dashboard;
            return result;
          });
        });
      }
    },
    verifypasswordotp:{
      onSubmit:function(data){
        return sc.xhr({
          url:'/api/forgotpassword/otp',
          type:"POST",
          data:{msisdn:validatemsisdn(data.msisdn)+'',otp:data.otp}
        },function(err,res){
          if(err && err.error !== 'InternalServerError'){
            showError(err);
            return
          }
          if(res && res.access_token){
            window.sessionStorage.setItem('access_token',res.access_token);
            window.location.href=window.aliases['resetpassword'];
          }
        });
      },
    },
    verify: function(data) {
      return sc.login(
        data.username,
        data.password
      ).then(function(result) {
        window.location = window.aliases.security;
        return result;
      });
    },/*
    useFacebook: {
      onSubmit: function() {
        return sc.useFacebook().then(function(result) {
          window.location = window.aliases.editprofile;

          return result;
        });
      }
    },
    useCredentials: {
      onReset: function($form) {
        var $button = $form.find('button');
        $button.attr('disabled', true);
        sc.me().then(function(result) {
          var number = result.msisdn.toString();
          number = number.slice(2,6)+'-'+number.slice(6,9)+'-'+number.slice(9);
          $form.find('[name="username"]').val(number);
          // $button.attr('disabled', false);
        });
      },
      onSubmit: function(data) {
        data.username = "88" + data.username.replace(/-/g, '');
        return sc.useCredentials(
          data.username,
          data.password
        ).then(function(result) {
          window.location = window.aliases.editprofile;

          return result;
        });
      },
      errorHandler: {
        position:"append",
        class:"testclass",
        callback: function(err){console.log(err);}
      }
    },*/
    updateProfile: {
      onReset: function($form) {
        sc.getDetails().then(function(user) {
           sc.xhr(window.aliases.getuniversitynames,function(err,data) {
              if ( err ) {
                return
              }
            var unis = data;
            $.each(unis, function(id,elem){
              var name = elem.Name;
              $('[name="university"]').append('<option value="'+ name + '">' + name + '</option>')
            });
            $form.find('[name="name"]')
              .val([
                user.givenName,
                user.familyName
              ].join(' '));
            $form.find('[name="email"]')
              .val(user.email);
            $form.find('[name="gender"]')
              .val(user.gender);

            var dateOfBirth = new Date(user.dateOfBirth);

            $form.find('[name="birthdate_year"]')
              .val(dateOfBirth.getFullYear());
            $form.find('[name="birthdate_month"]')
              .val(dateOfBirth.getMonth());
            $form.find('[name="birthdate_day"]')
              .val(dateOfBirth.getDate());
            var university = user.universityName;
            $('.js-student').prop('checked', university ? true : false);
            $('.js-student').switchery({
              'onText': window.lit['edit_profile_student_yes'],
              'offText': window.lit['edit_profile_student_no']});
            if(university) {
              $form.find('.select-university')
                .css('display', 'block')
                .find('[name="university"]').removeAttr('disabled');
              $form.find('[name="university"]').val(university);
              $('.js-student').setSwitcher({'state':true,'onchange':false});
            }
            else {
              $form.find('.select-university')
                .css('display', 'none')
                .find('[name="university"]').attr('disabled', true);
              // $form.find('[name="university"]').css('display','none');
              $('.js-student').setSwitcher({'state':false,'onchange':false});
            }
            $('.js-student').on('change',function(){
              var self = this;
              $form.find('.select-university')
                .css('display', $(self).is(':checked') ? 'block' : 'none')
                .find('[name="university"]').attr('disabled', !$(self).is(':checked') ? true : false);
            });
          });
        });
      },
      onSubmit: function(data) {
        function collectDateOfBirth() {
          return new Date(
            data.birthdate_year,
            data.birthdate_month,
            data.birthdate_day,
            23,
            59,
            59,
            999
          ).toISOString();
        }

        var name = (data.name + '').trim();
        if(name.indexOf(' ') !== -1 ) {
          var givenName = name.substr(0, name.indexOf(' '));
          var familyName = name.substr(name.indexOf(' ') + 1);
        } else {
          var givenName = name;
          var familyName = '';
        }


        var _data = {
          type: 'RESIDENTIAL', // FIXME
          familyName: familyName,
          givenName: givenName,
          gender: data.gender,
          dateOfBirth: collectDateOfBirth(),
          email: data.email,
          msisdn: data.msisdn,
          universityName: (!$('[name="university"]').is(':disabled') ? data.university : null)
        };
        return sc.putDetails(_data).then(function(result) {
          window.location = window.aliases.dashboard;
          return result;
        });
      }
    },
    invitation: {
      onReset: function() {},
      onSubmit: function(data) {
        var deferred = $.Deferred();

        // TODO: Implement (ice9?)
        // What should happen here? Maybe just
        // remove JavaScript handler and POST
        // to ice0-scope using action attribute?
        console.log('invitation code', data.code);
        setTimeout(function() {
          deferred.resolve();
          if (data.code === '') {
            window.location = window.aliases.sorry;
          } else {
            window.location = window.aliases.register;
          }
        }, 1);

        return deferred.promise();
      }
    },
    takemehome: {
      onReset: function() {},
      onSubmit: function(data) {
        var deferred = $.Deferred();

        setTimeout(function() {
          deferred.resolve();
          window.location = window.aliases.register;
        }, 1);

        return deferred.promise();
      }
    },/*
    topup: {
      onReset: function() {

      },
      onSubmit: function(data) {
        var deferred = $.Deferred();
        console.log('topup submit');
        return sc.topup({
          msisdn: parseInt(data.msisdn, 10),
          amount: parseInt(data.amount, 10),
          email: data.email,
          name: data.name
        }).then(function(result) {
          $('#portwallet-recharge').portwallet(result.invoice,{
            callback: function(result){
              sc.xhr({url: '/api/topup', type: 'PUT'},{
                msisdn: msisdn,
                amount: amount,
                transactionid : result.transactionid,
                invoice:result.invoice
              }, function(result){
                console.log(result);
              });
            }
          });
        }, function(err) {
          // FIXME: Handle topup error
          alert(JSON.stringify(err, null, 2));
        });
      }
    },*/
    transfer: {
      onReset: function() {

      },
      onSubmit: function(data) {
        var deferred = $.Deferred();
          if (!validatemsisdn(data.msisdn) )
          {
            var $error = {
              error : 'error',
              error_description: window.lit['topupdesc_err']
            };
            showError($error);
            return deferred.reject();
          }

        if (!parseInt(data.amount, 10)) {
          showError({
            error : 'error',
            error_description: 'invalidAmount'
          });
          return deferred.reject();
        }

        if (parseInt(data.amount,10) > 100 ) {
          showError({
            error : 'error',
            error_description: 'TransferAmountTooHigh'
          });
          return deferred.reject();
        }



        var factor = data.type === 'data' ? 1024 : 1000000;
        var amount = parseInt(data.amount, 10) * factor;
        var currency = data.type === 'data' ? 'MB Data' : 'Taka';
        sc.xhr('/api/service/transfer', {
          msisdn: validatemsisdn(data.msisdn),
          amount: amount,
          currency: currency,
        }, function(err, data) {
          if (err) {
            return deferred.reject(err);
          }
          var expiryDate ='';
          var expiryTime = '';
          if(data[0].accounts && data[0].accounts.account && data[0].accounts.account.expirydate){
            expiryDate = moment(data[0].accounts.account.expirydate,'YYYY-MM-DDTHH:mm:ss.SSSZ');
            expiryTime = expiryDate.format('HH:mm:ss');
            expiryDate = expiryDate.format('MMMM, DD YYYY');
          }

          var description =  currency === 'MB Data' ? window.lit['transferdata_success_msg'] : window.lit['transferbalance_success_msg']
          description = description
            .replace('{sharedAmount}', amount / factor)
            .replace('{sharedCurrency}', currency)
            .replace('{expiryDate}', expiryDate)
            .replace('{expiryTime}',expiryTime);
          $successModal = $(selfcare.templates['partials/modal']({
            modalid: 'transfersuccess',
            header: currency === 'MB Data' ? window.lit['transferdata_success_title'] : window.lit['transferbalance_success_title'],
            description: description,
            buttonsinglePartial: selfcare.templates['partials/buttonsingle']({
              buttonsgldata: 'data-link="dashboard"',
              buttonsgltxt: currency === 'MB Data' ? window.lit['transferdata_success_btn'] : window.lit['transferbalance_success_btn'],
            })
          }));

          $('body').append($successModal);

          $successModal.modal();
          return deferred.resolve();
        });

        return deferred.promise();
      },
      errorHandler: {
        callback: function(err){
          $.each(err,function(index,error){
           showError({
            error: error.error,
            error_description: error.errormessage
           });
          })

        }
      }
    },
    simblock: {
      onReset:function(){

      },
      onSubmit: function(data){
          console.log(data.blocktext);
          var deferred = $.Deferred();
          sc.xhr({url:'/api/service/sim', type:'POST'}, function(err,data){
            if(err) {
              return  deferred.reject(err);
            }
            var blockmodal = selfcare.templates['partials/modal']({
              modalid: "modal-blocked",
              modaltitle: window.lit['modal_blocktitle'],
              header: window.lit['modal_blockedheader'],
              description: window.lit['modal_blockeddesc'],
                buttonsinglePartial: selfcare.templates['partials/buttonsingle']({
                btnsglclass: "btn-primary btn-lighter",
                buttonsgltxt: window.lit['modal_emloan_back']
              })
            });
            $('.modal').modal('hide');
            $('.modalblockHolder').html(blockmodal);
            $('#modal-blocked').modal('show');
            return deferred.resolve();
          });
          return deferred.promise();
      }
    },
    gotofacebook: {
      onReset: function() {

      },
      onSubmit: function() {
        var deferred = $.Deferred();

        setTimeout(function() {
          deferred.resolve();
          window.location = window.aliases.facebooklink;
        }, 1);

        return deferred.promise();
      }
    },
    security: {
      onReset: function() {

      },
      onSubmit: function() {
        var deferred = $.Deferred();

        setTimeout(function() {
          deferred.resolve();
          window.location = window.aliases.security;
        }, 1);

        return deferred.promise();
      }
    },
    getfromfacebook: {
      onReset: function($form) {
        return sc.getCredentials().then(function(credentials) {

          if (credentials.type === 'facebook') {
            $form.find('button').attr('disabled', null);
          }

          return;
        });

      },
      onSubmit: function() {
        var deferred = $.Deferred();

        FB.api('/me', 'GET', {
          'fields': 'name,birthday,email,gender'
        }, function(response) {
          var $form = $('[data-form="updateProfile"]');

          if (response.name) {
            $form.find('[name="name"]').val(response.name);
          }
          if (response.email) {
            $form.find('[name="email"]').val(response.email);
          }
          if (response.gender) {
            $form.find('[name="gender"]').val(response.gender.toUpperCase());
          }

          var birthday
          if (response.birthday) {
            birthday = response.birthday.split(/\//g);
            $form.find('[name="birthdate_year"]').val(birthday[2]);
            $form.find('[name="birthdate_month"]').val(birthday[0] - 1);
            $form.find('[name="birthdate_day"]').val(birthday[1]);
          }

          deferred.resolve();
        });

        return deferred.promise();
      }
    }
  }).each(function() {
    this.reset();
  });

  $('[data-history]').history();
  $('[data-bundles]').bundles();

  $('[data-login-facebook]').on('click', function(event) {
    event.preventDefault();

    return sc.loginFacebook().then(function(result) {
      window.location = window.aliases.dashboard;
    });
  });
});
;
E42Handler.onPage('/sitemap/tintin/modaltests', function (url) {

  $('.main').html(selfcare.templates['modaltests']({
    modalHelp: selfcare.templates['partials/modal']({
      modalid: "modalhelp",
      modaltitle: window.lit['modal_emloan'],
      header: window.lit['modal_emloan_title'],
      description: window.lit['modal_emloan_desc'],
        buttonduoPartial: selfcare.templates['partials/buttonduo']({
        btnclass1: "btn-primary",
        buttonleft: window.lit['modal_emloan_btnleft'],
        btnclass2: "btn-primary btn-lighter",
        buttonright: window.lit['modal_emloan_back']
      }),

    }),
    modalGreed: selfcare.templates['partials/modal']({
      modalid: "modalgreed",
      modaltitle: window.lit['modal_emloan'],
      header: window.lit['modal_greedtitle'],
      description:window.lit['modal_greeddesc'],
        buttonsinglePartial: selfcare.templates['partials/buttonsingle']({
        btnsglclass: "btn-primary btn-lighter",
        buttonsgltxt: window.lit['modal_emloan_back']
      }),

    }),
    modalApp: selfcare.templates['partials/modal']({
      modalid: "modalapp",
      modaltitle: window.lit['modal_app'],
      header:  window.lit['modal_apptitle'],
      description: window.lit['modal_appdesc'],
        buttonsinglePartial: selfcare.templates['partials/buttonsingle']({
        btnsglclass: "btn-primary",
        buttonsgltxt: window.lit['modal_appbtn']
      }),

    }),
    modalLogin: selfcare.templates['partials/modal']({
      modalid: "modallogin",
      modaltitle: window.lit['modal_login'],
      header: window.lit['modal_login_title'],
      description:window.lit['modal_login_desc'],
        buttonsinglePartial: selfcare.templates['partials/buttonsingle']({
        btnsglclass: "btn-primary",
        buttonsgltxt: window.lit['modal_loginbtn']
      }),

    })

  }));

});
;
E42Handler.onPage('/sitemap/tintin/sign-up', function (url) {

  $('.main').html(selfcare.templates['register']({
    lit:window.lit,
    //image: selfcare.templates['partials/image']({
    // href: '#svg-happy-activation',
    //  viewbox: "0 0 192.53 222.88",
    // classes: "sadicon"
    //}),
    registerForm: selfcare.templates['forms/register']({
      lit:window.lit
    }),
    verifyForm: selfcare.templates['forms/verify']({
      lit:window.lit
    })
  }));

});
;
E42Handler.onPage('/sitemap/tintin/resetlinkerror', function (url) {

  $('.main').html(selfcare.templates['partials/errorpage']({
    image: selfcare.templates['partials/image']({
      href: '#svg-sorry-reset',
      viewbox: "0 0 194.56 223.13",
      classes:"sadicon"
    }),
    title: window.lit['resetlink_title'],
    description: window.lit['resetlink_desc'],
    button: selfcare.templates['forms/takemehome']({
      lit:window.lit
    })
  }));
});
;
E42Handler.onPage('/sitemap/tintin/resetlinksent', function (url) {

  $('.main').html(selfcare.templates['partials/errorpage']({
    image: selfcare.templates['partials/image']({
      href: '#svg-sorry-reset',
      viewbox: "0 0 194.56 223.13",
      classes:"sadicon"
    }),
    title: window.lit['resetlink_sent_title'],
    description: window.lit['resetlink_sent_desc'],
    form: selfcare.templates['forms/verifypasswordotp']({
      lit:window.lit
    })
  }));
  if(window.location.hash){
    $('[data-form="verifypasswordotp"] [name="msisdn"]').val(window.location.hash.replace('#',''))
  }
});
;
E42Handler.onPage('/sitemap/tintin/resetpassword', function (url) {

  $('.main').html(selfcare.templates['resetpassword']({
    lit: window.lit,
    resetpasswordForm: selfcare.templates['forms/resetpassword']({
      lit: window.lit
    })
  }));

  sc.isLoggedIn().then(function(loggedIn) {
    if (!loggedIn) {
      $('.main').text(window.lit['resetpw_invalid_token']);

      return;
    }

    sc.getDetails().then(function(details){
      var number = details.msisdn;
      number = number.slice(2,6) +'-'+ number.slice(6,9)+'-'+ number.slice(9);
      $('[data-form="resetpassword"] #msisdn').val(number);
    });

    sc.getCredentials().then(function (credentials) {
      if (credentials.type !== 'password') {
        $('.main').text(window.lit['resetpw_no_pw_auth'] +
                ' (' + credentials.type + ')'
                );
      }
      $('[data-form="resetpassword"] [name="sendpasswordsms"]').prop('checked',credentials.flags && credentials.flags.sendpasswordsms==='on'? true :false);
    });
  });

});
;
E42Handler.onPage('/sitemap/tintin/security', function(url) {

  var hash = window.location.hash;
  var prefb = hash === '#facebook';
  var prepw = hash === '#password';

  sc.getCredentials().then(function (credentials) {

    var $html = $(selfcare.templates['security']({
      lit: window.lit,
      usecredentialsForm: selfcare.templates['forms/usecredentials']({
        lit: window.lit
      }),
      usefacebookForm: selfcare.templates['forms/usefacebook']({
        lit: window.lit
      }),
      pwclass: (prepw || !hash && credentials.type !== 'facebook') ? 'active': '',
      fbclass: (prefb || !hash && credentials.type === 'facebook') ? 'active': ''
    }));

    $html.find('form')
    .form({
      useFacebook: {
        onSubmit: function() {
       	return sc.useFacebook().then(function(result) {
	  window.location = window.aliases.editprofile;

	  return result;
	});
      }
    },
    useCredentials: {
      onReset: function($form) {
	var $button = $form.find('button');
	$button.attr('disabled', true);
	sc.me().then(function(result) {
	  var number = result.msisdn.toString();
	  number = number.slice(2,6)+'-'+number.slice(6,9)+'-'+number.slice(9);
	  $form.find('[name="username"]').val(number);
	  // $button.attr('disabled', false);
	});
      },
      onSubmit: function(data) {
	data.username = "88" + data.username.replace(/-/g, '');
	return sc.useCredentials(
	  data.username,
	  data.password
	).then(function(result) {
	  window.location = window.aliases.editprofile;

	  return result;
	},function(error){showError(error)});
      },
      errorHandler: {
	position:"append",
	class:"testclass",
	callback: function(err){console.log(err);}
      }
    }
    })
    .each(function() {
      this.reset();
    });

    $('.main').html($html);

    //
    // Do weird stuff.
    //

    $('.security .nav-tabs [data-toggle="tab"], .register .nav-tabs [data-toggle="tab"]')
    .on('click', function(){
      $('.security .nav-tabs td, .register .nav-tabs td').removeClass('active');
      $(this).closest('td').addClass('active');
    });

    $('#termsofuse[type="checkbox"], #termsofuseFB[type="checkbox"]')
    .on('change', function(){
      console.log($(this).is(':checked'));
      var $target = $($(this).data('btn-target'));
      if ($(this).is(':checked')) {
        $target.removeAttr('disabled');
      } else {
        $target.attr('disabled', true);
      }
    });



  });


});
;
E42Handler.onPage('/sitemap/tintin/manage-sim', function (url) {

  var $confirm = $(selfcare.templates['partials/modal']({
    modalid: 'modalconfirmlogout',
    modaltitle: 'Confirmation',
    header: 'Are you sure you want to logout from all the devices?',
    buttonduoPartial: selfcare.templates['partials/buttonduo']({
      btnclass1: 'btn-primary',
      btn1data: 'data-dismiss="modal"',
      buttonleft: 'No',
      btnclass2: "btn-primary",
      btn2data: 'data-logoutfromdevices-confirm',
      buttonright: 'Yes'
    })
  }));

  $('body').append($confirm);

  $('.main').loading('.main','text-center center-block');
  //get simstate
  var simstate;
  function xhr() {
    var deferred = $.Deferred();

    var args = Array.prototype.slice.call(arguments);

    args.push(function(err, data) {
      if (err) {
        return deferred.reject(err);
      }

      return deferred.resolve(data);
    });

    sc.xhr.apply(sc, args);

    return deferred.promise();
  }
  $.when(
    xhr('/api/me/details'),
    xhr('/api/service/sim'),
    xhr('/api/service/notifications?customerCanChange=true'),
    xhr('/api/me/credentials'),
    xhr('/api/service/costcontrol'),
    xhr('/api/service/subscriber/profile')
  ).done(function(details, sim, notifications, credentials,costcontrol, subscriberprofile) {
    console.log(subscriberprofile);
  //sc.xhr('/api/service/sim', function(err,data) {
    var numberinput = details.msisdn.toString();
    var numberslice = numberinput.slice(2);
    var number = [numberslice.slice(0, 4), numberslice.slice(4, 7),
    numberslice.slice(7,11)].join('-');

    simstate=sim[0].state;
    if( simstate === 'ACTIVE') {
      management_blocktitle = window.lit.management_blocktitle;
      management_blockdesc = window.lit.management_blockdesc;
    }else{
      management_blocktitle = window.lit.management_unblocktitle;
      management_blockdesc = window.lit.management_unblockdesc;
    }

    /* the other security method (not the one currently used by account) */
    var other = credentials.type === 'password'
    ? 'facebook'
    : 'password';

    $(".main").html(selfcare.templates['simmanagement']({
      lit: window.lit,
      securityhref: window.aliases.security + '#' + other,
      securityname: window.lit['management_security_' + other + '_name'],
      securitydesc: window.lit['management_security_' + other + '_desc'],
      number: number,
      // image: selfcare.templates['partials/image']({
      //   href: '#svg-happy-management',
      //   viewbox: "0 0 208.87 222.85",
      //   height: "220px",
      //   width: "220px",
      //   classes:"mng-and-usage"
      // }),
      management_blocktitle: management_blocktitle,
      management_blockdesc: management_blockdesc,
        modalReplace: selfcare.templates['partials/modal']({
        modalid: "modal_replace",
        modaltitle: window.lit['modal_replacetitle'],
        header: window.lit['modal_replaceheader'],
        description: window.lit['modal_replacedesc'],
          buttonduoPartial: selfcare.templates['partials/buttonduo']({
          btnclass1: "btn-primary",
          buttonleft: window.lit['modal_replacebtn'],
          btnclass2: "btn-primary btn-lighter",
          buttonright: window.lit['modal_emloan_back'],
          btn2data: 'data-dismiss="modal"'
        }),
      }),
         modalReorder: selfcare.templates['partials/modal']({
        modalid: "modal_reorder",
        modaltitle: window.lit['modal_reordertitle'],
        header: window.lit['modal_reorder_header'],
        description: window.lit['modal_reorderdesc'],
          buttonduoPartial: selfcare.templates['partials/buttonduo']({
          btnclass1: "btn-primary",
          buttonleft: window.lit['modal_reorderbtn'],
          btnclass2: "btn-primary btn-lighter",
          buttonright: window.lit['modal_emloan_back'],
          btn2data: 'data-dismiss="modal"'
        }),
      }),
         modalReorderblock: selfcare.templates['partials/modal']({
        modalid: "modal_reorderblock",
        modaltitle: window.lit['modal_reordertitle'],
        header: window.lit['modal_reorder_blockheader'],
        description: window.lit['modal_reorder_blockdesc'],
          buttonsinglePartial: selfcare.templates['partials/buttonsingle']({
          btnsglclass: "btn-primary btn-lighter",
          buttonsgltxt: window.lit['modal_emloan_back'],
          buttonsgldata: 'data-dismiss="modal"'
        }),
      }),
    }));

    // Events for the "SIM replacement" link.
    // Will send a POST request to external page containing access token
    (function() {
      var $form = $('[data-simrepl-form]');

      $('[data-simrepl-link]').on('click', function(event) {
        event.preventDefault();

        sc.getAccessToken()
        .then(function(accessToken) {
          $form.find('[name="access_token"]').val(accessToken);
          $form[0].submit();
        });
      });

      $('[data-logoutfromdevices]').on('click', function(event) {
        event.preventDefault();

        $confirm.modal('show');
      });

      $('[data-logoutfromdevices-confirm]').on('click', function(event) {
        event.preventDefault();

        sc.xhr({
          url: '/api/me/panic',
          method: 'POST'
        }, null, function(err, result) {
          if (err)
            console.log('logout from all not successful');

          sc.logout();
          window.location.reload();
        });

      });


    })();

    $.each(notifications,function(key,value){
      var target = $('[data-key="' + value.key + '"]');
      if($(target)) {
        $(target).data('channel', value.channel);
        if( value.channel === 'SMS' || value.channel === 'USSD') {
          $(target).data('setchannel', 'NONE');
          $(target).prop('checked',true);
          //$(target).prev().html(window.lit.management_on);
          //$(target).next().removeClass("off");
          console.log('active');
        }
        else{
          $(target).data('setchannel', 'SMS');
          if( value.key === 'xdr.cdr.end_of_data') {
            $(target).data('setchannel','USSD');
          }
          $(target).prop('checked',false);
          //$(target).next().addClass("off");
          //$(target).prev().html(window.lit.management_off);
          console.log('not active');
        }
      }
    })
    //Find elements for switchery
    $('.js-switch[data-notification]').switchery();
    var elems = $('.js-switch[data-notification]');
    $.each(elems,function(){
      var element = $(this);
      $(element).on('change',function(event) {
        var channel = $(element).data('channel');
        var setChannel = $(element).data('setchannel');
        sc.xhr({url:'/api/service/notifications',type:'PUT'},{
          key: $(element).data('key'), channel: $(element).data('setchannel')
        }, function(err,data) {
          if (err) {
            if (channel === 'NONE') {
              $(element).setSwitcher({'state':false,'onchange':false});
              console.log('revert to disabled');
            }
            else{
              console.log('revert to enabled');

              $(element).setSwitcher({'state':true,'onchange':false});
            }
          }
          else {
            if (channel === 'NONE') {
              var tempChannel = channel;
              $(element).data('channel',setChannel);
              $(element).data('setchannel',tempChannel);
              console.log('setting to enabled');
              $(element).setSwitcher({'state':true,'onchange':false});
            }
            else {
              var tempChannel = channel;
              $(element).data('channel',setChannel);
              $(element).data('setchannel',tempChannel);
              console.log('setting to disabled');
              $(element).setSwitcher({'state':false,'onchange':false});
            }
          }
        })
        console.log('done');
      });
    });
    function changePayasyougoval(direction){
      var value = parseInt($('[data-payasyougo-limit]').html(),10);
      var max  = parseInt(window.lit.payasyougo_max,10);
      var min =  parseInt(window.lit.payasyougo_min,10);
      var step = parseInt(window.lit.payasyougo_step,10);

      if(direction === 'inc' ) {
        value += step;
      }else {
        value -= step;
      }

      if(value < min) {
        value = min;
      }
      if (value > max) {
        value = max;
      }
      $('[data-payasyougo-limit]').html(value);
    }
    var payasyougointerval;
    var interval = parseInt(window.lit.payasyougo_changeinterval,10) || 1000
    $(document).on('mousedown touchstart','[data-payasyougo-inc]',function(){
      clearInterval(payasyougointerval);
      changePayasyougoval('inc');
      payasyougointerval = setInterval(function(){changePayasyougoval('inc')},interval);
    });

    $(document).on('mousedown touchstart','[data-payasyougo-dec]',function(){
      clearInterval(payasyougointerval);
      changePayasyougoval();
      payasyougointerval = setInterval(function(){changePayasyougoval()},interval);
    });

    $(document).on('mouseup touchend','[data-payasyougo-dec],[data-payasyougo-inc]',function(){
      clearInterval(payasyougointerval);
    });
    if (!costcontrol.payload || !costcontrol.payload[0].maxUnits){
      $('.js-switch[data-payasyougo-switch]').prop('checked', false);
      $('[data-payasyougo-limit]').html(window.lit.payasyougo_default);
      $('[data-payasyougo-controls]').addClass('hidden');
    } else {
      $('.js-switch[data-payasyougo-switch]').prop('checked', true);
      $('[data-payasyougo-controls]').removeClass('hidden');
      var relation = 1000000;
      $('[data-payasyougo-limit]').html(costcontrol.payload[0].maxUnits/relation);
    }
    $('.js-switch[data-payasyougo-switch]').switchery();
    var elem = $('.js-switch[data-payasyougo-switch]');
     $(elem).on('change',function(event) {
       var element = $(this);
       var state = $(this).prop("checked");
       if (state) {
        //turn on costcontrol
        $(this).data('status','on');
        $('[data-payasyougo-limit]').html(window.lit.payasyougo_default);
        $('[data-payasyougo-save]').click();
        $('[data-payasyougo-controls]').removeClass('hidden');
       } else {
        //turn off costcontrol
        $(this).data('status','off');
        sc.xhr({url: '/api/service/costcontrol', type: 'PUT'},
          {trafficType: 'DATA', zone: 'HPLMN', limit: 0},
          function(err, res){
            if (err) {
              showError({
                error: 'payasyougo',
                error_description: 'payasyougo_disable'
              });
              $(element).setSwitcher({'state':false,'onchange':false});
            } else {
              modal = selfcare.templates['partials/modal']({
              modalid: "modalcostcontrol",
              modaltitle: window.lit['modal_payasyougo_delete_title'],
              header: window.lit['modal_payasyougo_delete_header'],
              description:window.lit['modal_payasyougo_delete_description'],
                buttonsinglePartial: selfcare.templates['partials/buttonsingle']({
                  btnsglclass: "btn-primary btn-lighter",
                  buttonsgltxt: window.lit['modal_payasyougo_delete_ok'],
                  buttonsgldata: 'data-dismiss="modal"'
                })
              });
              $('.modalpaygoHolder').html(modal);
              $('#modalcostcontrol').modal('show');
              $('[data-payasyougo-controls]').addClass('hidden');
              $('[data-payasyougo-limit]').html('0');
            }
        })
       }
     });
   //*** init costcontrol form
   $(document).on('click', '[data-payasyougo-save]', function() {
        var type = 'PUT';
        var limit = parseInt($('[data-payasyougo-limit]').html(),10)
        if(limit <= 0){
          limit = 0
        }
        var relation = 1000000;
        limit = limit * relation;
        sc.xhr({url:'/api/service/costcontrol',type : type},{
            trafficType : 'DATA',
            zone : 'HPLMN',
            limit : limit
          }, function(err, res){
            if (err) {
              showError({
                error: 'payasyougo',
                error_description: 'payasyougo_general'
              });
            } else {
              modal = selfcare.templates['partials/modal']({
              modalid: "modalcostcontrol",
              modaltitle: window.lit['modal_payasyougo_success_title'],
              header: window.lit['modal_payasyougo_success_header'],
              description:(window.lit['modal_payasyougo_success_description']).replace('{amount}',limit/relation),
                buttonsinglePartial: selfcare.templates['partials/buttonsingle']({
                  btnsglclass: "btn-primary btn-lighter",
                  buttonsgltxt: window.lit['modal_payasyougo_success_ok'],
                  buttonsgldata: 'data-dismiss="modal"'
                })
              });
              $('.modalpaygoHolder').html(modal);
              $('#modalcostcontrol').modal('show');
            }
          })
      });

     /********* Notification language *****/
     notificationLanguage = subscriberprofile[0].language;
     if (notificationLanguage === 'ENG'){
      $('.js-switch[data-notificationlanguage-switch]').prop('checked', true);
    } else {
      $('.js-switch[data-notificationlanguage-switch]').prop('checked', false);
    }
    $('.js-switch[data-notificationlanguage-switch]').switchery({onText:'EN',offText:'BN',offColor:'#6e35ff',onColor:'rgb(247, 3, 142);'});
    $('.js-switch[data-notificationlanguage-switch]').on('change',function(event) {
      var element = $(this);
      var state = $(this).prop("checked");
      if (state) {
        //switch to EN
        sc.xhr({
          url:'/api/service/subscriber/language',
          type:'POST',
          data:{'language':1}
        }, function(err,data){
          if(err){
            //revert to false
            $('.js-switch[data-notificationlanguage-switch]').setSwitcher({'state':false,'onchange':false});
          }
        });
      }else{
        //switch to BN
        sc.xhr({
          url:'/api/service/subscriber/language',
          type:'POST',
          data:{'language':2}
        }, function(err,data){
          if(err){
            //revert to false
            $('.js-switch[data-notificationlanguage-switch]').setSwitcher({'state':true,'onchange':false});
          }
        });
      }
    });
  });
});
;
E42Handler.onPage('/sitemap/tintin/shop/sms-packs', function(url) {

  var $content = $(selfcare.templates['shopbundles']({
     modalTicket: selfcare.templates['partials/modal']({
      modalid: 'modalhelp',
      modaltitle: window.lit['modal_payment_sms'],
      header: window.lit['modal_payment_title'],
      // description: window.lit['modal_payment_price'],
        buttonduoPartial: selfcare.templates['partials/buttonduo']({
          btnclass1: "btn-primary",
          btn1data: 'data-dismiss="modal"',
          buttonleft: window.lit['modal_payment_btnleft'],
          btnclass2: "btn-primary togglelogin",
          btn2data: 'data-cash-btn',
          buttonright: window.lit['modal_payment_cash']

      })

    }),
    modalConfirmation: selfcare.templates['partials/modal']({
      modalid: 'modalconfirmation',
      modaltitle: window.lit['modal_payment_sms'],
      header: window.lit['modal_confirmation_title'],
      description: window.lit['buybundle_sms_success'],
      buttonsinglePartial: selfcare.templates['partials/buttonsingle']({
        btnsglclass: "btn-primary togglelogin",
        buttonsgldata: 'data-link="dashboard"',
        buttonsgltxt: window.lit['modal_confirmationmodal_cash']
      })

    }),
    cclass: 'green',
    title: window.lit['sms_bundle_title'],
    description: window.lit['sms_bundle_description'],
    bundletype: 'SMS',
    bundlegroupcode: /skitto/.test(window.location.hostname) ? 3000 : 20000

  }));
  var $modallogin = selfcare.templates['partials/modal']({
        modalid: "modallogin",
        modaltitle: window.lit['modal_login'],
        header: window.lit['modal_login_title'],
        description:window.lit['modal_login_desc'],
          buttonsinglePartial: selfcare.templates['partials/buttonsingle']({
          btnsglclass: "btn-primary togglelogin",
          buttonsgltxt: window.lit['modal_loginbtn']
        }),

      });
  $('.main').html($content).append($modallogin);

});
;
E42Handler.onPage('/sitemap/tintin/sorry', function (url) {

  $('.main').html(selfcare.templates['partials/errorpage']({
    image: selfcare.templates['partials/image']({
      href: '#svg-sorry-reset',
      viewbox: "0 0 194.56 223.13",
      classes:"sadicon"
    }),
    title: window.lit['sorry'],
    description: window.lit['sorry_desc'],
    //moredescription: window.lit['sorry_moredesc'],
    button: selfcare.templates['forms/takemehome']({
      lit:window.lit
    })
  }));
});
;
this["selfcare"] = this["selfcare"] || {};
this["selfcare"]["templates"] = this["selfcare"]["templates"] || {};

Handlebars.registerPartial("par-msisdnCompoundInput", this["selfcare"]["templates"]["par-msisdnCompoundInput"] = Handlebars.template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    return "<div class=\"form-inline\">\n  <div class=\"input-group\">\n    <span class=\"input-group-addon\" id=\"msisdn-addon\">88</span>\n    <input type=\"text\" class=\"form-control\" name=\"msisdn\" id=\"msisdn\"\n    placeholder=\""
    + container.escapeExpression((helpers.lit || (depth0 && depth0.lit) || helpers.helperMissing).call(depth0 != null ? depth0 : {},(depth0 != null ? depth0.placeholder : depth0),{"name":"lit","hash":{},"data":data}))
    + "\"\n    aria-describedby=\"msisdn-addon\" required>\n  </div>\n</div>\n";
},"useData":true}));

this["selfcare"]["templates"]["campaign"] = Handlebars.template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var stack1, helper, alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing, alias3="function";

  return "<div class=\"row shop campaign\">\n  <div class=\"jumbotron\">\n    <div class=\"col-xs-10 col-sm-6 col-md-6 center-block text-center\">\n      <h1>"
    + ((stack1 = ((helper = (helper = helpers.title || (depth0 != null ? depth0.title : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"title","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "</h1>\n      <p>\n        "
    + ((stack1 = ((helper = (helper = helpers.description || (depth0 != null ? depth0.description : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"description","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "\n      </p>\n    </div>\n\n    <div class=\"col-xs-10 col-sm-8 col-md-6 center-block tintin-tab-control\">\n      "
    + ((stack1 = ((helper = (helper = helpers.tabPanel || (depth0 != null ? depth0.tabPanel : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"tabPanel","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "\n    </div>\n  </div>\n</div>\n"
    + ((stack1 = ((helper = (helper = helpers.modalTicket || (depth0 != null ? depth0.modalTicket : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"modalTicket","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "\n";
},"useData":true});

this["selfcare"]["templates"]["contactus"] = Handlebars.template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing, alias3=container.escapeExpression;

  return "<div class=\"row\">\n  <div class=\"contact-us jumbotron\">\n    <div class=\"contactus\">\n      <div class=\"col-sm-6 col-md-6 center-block text-center\">\n        <h1>"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"contactus_title",{"name":"lit","hash":{},"data":data}))
    + "</h1>\n        <p>\n          "
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"contactus_description",{"name":"lit","hash":{},"data":data}))
    + "\n        </p>\n      </div>\n      <!--<div class=\"col-xs-12 col-sm-8 col-md-5 col-lg-4 center-block\">\n        <form data-form=\"gotofacebook\">\n          <button class=\"btn btn-fb btn-lg btn-block\" type=\"submit\">\n            "
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"contactus_facebook",{"name":"lit","hash":{},"data":data}))
    + "\n          </button>\n        </form>\n      </div>-->\n    </div>\n  </div>\n</div>\n";
},"useData":true});

this["selfcare"]["templates"]["dashboard"] = Handlebars.template({"1":function(container,depth0,helpers,partials,data) {
    var helper, alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing, alias3=container.escapeExpression;

  return "            <span style=\"color:red;\">"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"dashboard_expirationdate",{"name":"lit","hash":{},"data":data}))
    + " "
    + alias3(((helper = (helper = helpers.balanceExpiryDate || (depth0 != null ? depth0.balanceExpiryDate : depth0)) != null ? helper : alias2),(typeof helper === "function" ? helper.call(alias1,{"name":"balanceExpiryDate","hash":{},"data":data}) : helper)))
    + "\n            </span>\n";
},"3":function(container,depth0,helpers,partials,data) {
    return "            <h4>"
    + container.escapeExpression((helpers.lit || (depth0 && depth0.lit) || helpers.helperMissing).call(depth0 != null ? depth0 : {},"dashboard_volte_enabled",{"name":"lit","hash":{},"data":data}))
    + "</h4>\n";
},"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var stack1, helper, alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing, alias3=container.escapeExpression, alias4="function";

  return "<div class=\"row dashboard\">\n  <div class=\"jumbotron bg-grey text-center\">\n    <div class=\"col-xs-10 col-md-6 center-block\">\n      <h2>"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"dashboard_greeting",{"name":"lit","hash":{},"data":data}))
    + alias3(((helper = (helper = helpers.name || (depth0 != null ? depth0.name : depth0)) != null ? helper : alias2),(typeof helper === alias4 ? helper.call(alias1,{"name":"name","hash":{},"data":data}) : helper)))
    + "?</h2>\n      <div class=\"row\">\n        <div class=\"col-xs-10 center-block\">\n          <p class=\"greetingsub\">\n            "
    + ((stack1 = ((helper = (helper = helpers.lastCall || (depth0 != null ? depth0.lastCall : depth0)) != null ? helper : alias2),(typeof helper === alias4 ? helper.call(alias1,{"name":"lastCall","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "\n          </p>\n          <div class=\"mainBalance "
    + alias3(((helper = (helper = helpers.balanceClass || (depth0 != null ? depth0.balanceClass : depth0)) != null ? helper : alias2),(typeof helper === alias4 ? helper.call(alias1,{"name":"balanceClass","hash":{},"data":data}) : helper)))
    + "\">\n            <h4>"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"transfer_balance_title",{"name":"lit","hash":{},"data":data}))
    + "</h4>\n            <h1>"
    + alias3(((helper = (helper = helpers.balance || (depth0 != null ? depth0.balance : depth0)) != null ? helper : alias2),(typeof helper === alias4 ? helper.call(alias1,{"name":"balance","hash":{},"data":data}) : helper)))
    + " tk</h1>\n          </div>\n          <p class=\"text-grey\">\n"
    + ((stack1 = helpers["if"].call(alias1,(depth0 != null ? depth0.balanceExpiryDate : depth0),{"name":"if","hash":{},"fn":container.program(1, data, 0),"inverse":container.noop,"data":data})) != null ? stack1 : "")
    + "          "
    + ((stack1 = ((helper = (helper = helpers.desc_long || (depth0 != null ? depth0.desc_long : depth0)) != null ? helper : alias2),(typeof helper === alias4 ? helper.call(alias1,{"name":"desc_long","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "\n          </p>\n"
    + ((stack1 = helpers["if"].call(alias1,(depth0 != null ? depth0.volte : depth0),{"name":"if","hash":{},"fn":container.program(3, data, 0),"inverse":container.noop,"data":data})) != null ? stack1 : "")
    + "        </div>\n      </div>\n    </div>\n  </div>\n  <div class=\"container\">\n    <div class=\"row\">\n      <div class=\"col-xs-10 center-block\">\n      "
    + ((stack1 = ((helper = (helper = helpers.compiledGroups || (depth0 != null ? depth0.compiledGroups : depth0)) != null ? helper : alias2),(typeof helper === alias4 ? helper.call(alias1,{"name":"compiledGroups","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "\n      </div>\n    </div>\n  </div>\n</div>\n";
},"useData":true});

this["selfcare"]["templates"]["dashboard_bundledetail"] = Handlebars.template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var stack1, helper, alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing, alias3="function", alias4=container.escapeExpression;

  return "<div class=\"row\">\n  <div class=\"col-xs-10 col-md-10\">\n    <div class=\"text-left text-grey\">"
    + ((stack1 = ((helper = (helper = helpers.name || (depth0 != null ? depth0.name : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"name","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "</div>\n      <div class=\"progress\" data-valuemin=\""
    + alias4(((helper = (helper = helpers.used || (depth0 != null ? depth0.used : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"used","hash":{},"data":data}) : helper)))
    + " "
    + alias4(((helper = (helper = helpers.unitname || (depth0 != null ? depth0.unitname : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"unitname","hash":{},"data":data}) : helper)))
    + "\"\n        data-valuemax=\"Valid till "
    + alias4(((helper = (helper = helpers.expirydate || (depth0 != null ? depth0.expirydate : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"expirydate","hash":{},"data":data}) : helper)))
    + "\">\n        <div class=\"progress-bar\"\n          role=\"progress-bar\"\n          aria-valuemin=\"0\"\n          aria-valuemax=\"100\"\n          aria-valuenow=\""
    + alias4(((helper = (helper = helpers.usedPercentage || (depth0 != null ? depth0.usedPercentage : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"usedPercentage","hash":{},"data":data}) : helper)))
    + "\"\n          style=\"width: "
    + alias4(((helper = (helper = helpers.usedPercentage || (depth0 != null ? depth0.usedPercentage : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"usedPercentage","hash":{},"data":data}) : helper)))
    + "%;\">\n        </div>\n      </div>\n    </div>\n</div>\n";
},"useData":true});

this["selfcare"]["templates"]["dashboard_bundlegroup"] = Handlebars.template({"1":function(container,depth0,helpers,partials,data) {
    var stack1, helper, alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing, alias3="function", alias4=container.escapeExpression;

  return "    <div\n      data-toggle=\"tooltip\" data-link=\""
    + alias4(((helper = (helper = helpers.buylink || (depth0 != null ? depth0.buylink : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"buylink","hash":{},"data":data}) : helper)))
    + "\" data-placement=\"top\"\n      title=\""
    + alias4(((helper = (helper = helpers.buytooltip || (depth0 != null ? depth0.buytooltip : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"buytooltip","hash":{},"data":data}) : helper)))
    + "\"\n      data-container=\"body\">\n      "
    + ((stack1 = ((helper = (helper = helpers.plus || (depth0 != null ? depth0.plus : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"plus","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "\n    </div>\n";
},"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var stack1, helper, alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing, alias3="function", alias4=container.escapeExpression;

  return "<div class=\"row\">\n  <div class=\"col-xs-10 col-md-8 center-block bundletype-"
    + alias4(((helper = (helper = helpers.type || (depth0 != null ? depth0.type : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"type","hash":{},"data":data}) : helper)))
    + "\">\n    <h4 class=\"text-center\">"
    + alias4(((helper = (helper = helpers.name || (depth0 != null ? depth0.name : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"name","hash":{},"data":data}) : helper)))
    + "</h4>\n    <p class=\"text-grey text-center\">"
    + ((stack1 = ((helper = (helper = helpers.description || (depth0 != null ? depth0.description : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"description","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "</p>\n  </div>\n</div>\n<div class=\"row bundledetails-container bundletype-"
    + alias4(((helper = (helper = helpers.type || (depth0 != null ? depth0.type : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"type","hash":{},"data":data}) : helper)))
    + "\">\n  <div class=\"col-xs-10 col-md-10\">\n    <div class=\"progress bundledetailssum\"\n      data-valuemin=\""
    + alias4(((helper = (helper = helpers.used || (depth0 != null ? depth0.used : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"used","hash":{},"data":data}) : helper)))
    + " "
    + alias4(((helper = (helper = helpers.unitname || (depth0 != null ? depth0.unitname : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"unitname","hash":{},"data":data}) : helper)))
    + "\" data-valuemax=\""
    + alias4(((helper = (helper = helpers.available || (depth0 != null ? depth0.available : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"available","hash":{},"data":data}) : helper)))
    + " "
    + alias4(((helper = (helper = helpers.unitname || (depth0 != null ? depth0.unitname : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"unitname","hash":{},"data":data}) : helper)))
    + "\">\n      <div class=\"progress-bar bundledetailssumprogress\"\n        role=\"progress-bar\"\n        aria-valuemin=\"0\"\n        aria-valuemax=\"100\"\n        aria-valuenow=\""
    + alias4(((helper = (helper = helpers.usedPercentage || (depth0 != null ? depth0.usedPercentage : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"usedPercentage","hash":{},"data":data}) : helper)))
    + "\" style=\"width:"
    + alias4(((helper = (helper = helpers.usedPercentage || (depth0 != null ? depth0.usedPercentage : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"usedPercentage","hash":{},"data":data}) : helper)))
    + "%;\">\n      </div>\n    </div>\n  </div>\n  <div class=\"col-xs-1 col-md-1\">\n"
    + ((stack1 = helpers["if"].call(alias1,(depth0 != null ? depth0.showBuyToolTop : depth0),{"name":"if","hash":{},"fn":container.program(1, data, 0),"inverse":container.noop,"data":data})) != null ? stack1 : "")
    + "  </div>\n  <div class=\"col-xs-1 col-md-1\" data-toggle=\"collapse\"\n    data-target=\"#bundledetails"
    + alias4(((helper = (helper = helpers.type || (depth0 != null ? depth0.type : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"type","hash":{},"data":data}) : helper)))
    + "\">\n    <div data-toggle=\"tooltip\" data-placement=\"top\"\n    title=\""
    + alias4((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"dashboard_tooltip_show",{"name":"lit","hash":{},"data":data}))
    + "\">\n    "
    + ((stack1 = ((helper = (helper = helpers.arrow || (depth0 != null ? depth0.arrow : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"arrow","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "\n    </div>\n  </div>\n</div>\n<div id=\"bundledetails"
    + alias4(((helper = (helper = helpers.type || (depth0 != null ? depth0.type : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"type","hash":{},"data":data}) : helper)))
    + "\" class=\"collapse\">\n  "
    + ((stack1 = ((helper = (helper = helpers.compiledList || (depth0 != null ? depth0.compiledList : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"compiledList","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "\n</div>\n";
},"useData":true});

this["selfcare"]["templates"]["dashboard_paygodetail"] = Handlebars.template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var helper, alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing, alias3=container.escapeExpression, alias4="function";

  return "<div calss=\"row\">\n  <div class=\"col-xs-10 text-center center-block\">\n    <h4 class=\"violet\">"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"payasyougo_headline",{"name":"lit","hash":{},"data":data}))
    + "</h4>\n  </div>\n</div>\n<div class=\"row\">\n  <div class=\"col-xs-10 col-md-10 center-block\">\n    <div class=\"text-left text-grey col-xs-6\">used "
    + alias3(((helper = (helper = helpers.used || (depth0 != null ? depth0.used : depth0)) != null ? helper : alias2),(typeof helper === alias4 ? helper.call(alias1,{"name":"used","hash":{},"data":data}) : helper)))
    + " "
    + alias3(((helper = (helper = helpers.unitname || (depth0 != null ? depth0.unitname : depth0)) != null ? helper : alias2),(typeof helper === alias4 ? helper.call(alias1,{"name":"unitname","hash":{},"data":data}) : helper)))
    + "</div>\n    <div class=\"text-right text-grey col-xs-6\">of "
    + alias3(((helper = (helper = helpers.max || (depth0 != null ? depth0.max : depth0)) != null ? helper : alias2),(typeof helper === alias4 ? helper.call(alias1,{"name":"max","hash":{},"data":data}) : helper)))
    + " "
    + alias3(((helper = (helper = helpers.unitname || (depth0 != null ? depth0.unitname : depth0)) != null ? helper : alias2),(typeof helper === alias4 ? helper.call(alias1,{"name":"unitname","hash":{},"data":data}) : helper)))
    + "</div>\n      <div class=\"progress\" data-valuemin=\"\"\n        data-valuemax=\"\">\n        <div class=\"bg-violet progress-bar\"\n          role=\"progress-bar\"\n          aria-valuemin=\"0\"\n          aria-valuemax=\"100\"\n          aria-valuenow=\""
    + alias3(((helper = (helper = helpers.usedPercentage || (depth0 != null ? depth0.usedPercentage : depth0)) != null ? helper : alias2),(typeof helper === alias4 ? helper.call(alias1,{"name":"usedPercentage","hash":{},"data":data}) : helper)))
    + "\"\n          style=\"width: "
    + alias3(((helper = (helper = helpers.usedPercentage || (depth0 != null ? depth0.usedPercentage : depth0)) != null ? helper : alias2),(typeof helper === alias4 ? helper.call(alias1,{"name":"usedPercentage","hash":{},"data":data}) : helper)))
    + "%;\">\n        </div>\n      </div>\n    <div class=\"text-grey text-center\">"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"payasyougo_detail",{"name":"lit","hash":{},"data":data}))
    + "</div>\n    </div>\n</div>\n";
},"useData":true});

this["selfcare"]["templates"]["datapacks"] = Handlebars.template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var stack1, helper, alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing, alias3="function";

  return "<div class=\"row shop datapacks\">\n  <div class=\"jumbotron inverse violet\">\n    <div class=\"col-xs-10 col-sm-6 col-md-6 center-block text-center\">\n      <h1>"
    + ((stack1 = ((helper = (helper = helpers.title || (depth0 != null ? depth0.title : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"title","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "</h1>\n      <p>\n        "
    + ((stack1 = ((helper = (helper = helpers.description || (depth0 != null ? depth0.description : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"description","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "\n      </p>\n    </div>\n\n    <div class=\"col-xs-10 col-sm-8 col-md-6 center-block tintin-tab-control\">\n      "
    + ((stack1 = ((helper = (helper = helpers.tabPanel || (depth0 != null ? depth0.tabPanel : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"tabPanel","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "\n    </div>\n  </div>\n\n</div>\n"
    + ((stack1 = ((helper = (helper = helpers.modalTicket || (depth0 != null ? depth0.modalTicket : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"modalTicket","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "\n";
},"useData":true});

this["selfcare"]["templates"]["editprofile"] = Handlebars.template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var stack1, helper, alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing, alias3=container.escapeExpression, alias4="function";

  return "<div class=\"row editprofile\">\n  <div class=\"jumbotron inverse\">\n    <div class=\"col-xs-10 col-sm-6 col-md-6 center-block text-center\">\n      <h1>"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"edit_title",{"name":"lit","hash":{},"data":data}))
    + "</h1>\n      <p>"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"edit_desc",{"name":"lit","hash":{},"data":data}))
    + "</p>\n    </div>\n    <div class=\"col-sm-8 col-md-4 center-block text-center\">\n      <div>"
    + ((stack1 = ((helper = (helper = helpers.securityForm || (depth0 != null ? depth0.securityForm : depth0)) != null ? helper : alias2),(typeof helper === alias4 ? helper.call(alias1,{"name":"securityForm","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "</div>\n    </div>\n    <hr>\n    <div class=\"col-sm-8 col-md-4 center-block text-center\">\n      <div>"
    + ((stack1 = ((helper = (helper = helpers.facebookForm || (depth0 != null ? depth0.facebookForm : depth0)) != null ? helper : alias2),(typeof helper === alias4 ? helper.call(alias1,{"name":"facebookForm","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "</div>\n    </div>\n    <div class=\"col-sm-8 col-md-8 center-block text-center\">\n      <div>"
    + ((stack1 = ((helper = (helper = helpers.updateForm || (depth0 != null ? depth0.updateForm : depth0)) != null ? helper : alias2),(typeof helper === alias4 ? helper.call(alias1,{"name":"updateForm","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "</div>\n    </div>\n  </div>\n</div>\n";
},"useData":true});

this["selfcare"]["templates"]["faq"] = Handlebars.template({"1":function(container,depth0,helpers,partials,data) {
    var stack1, helper, alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing, alias3="function";

  return "          <li class=\"faq-question\">"
    + ((stack1 = ((helper = (helper = helpers.question || (depth0 != null ? depth0.question : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"question","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "</li>\n          <li class=\"faq-answer\">"
    + ((stack1 = ((helper = (helper = helpers.answer || (depth0 != null ? depth0.answer : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"answer","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "</li>\n";
},"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var stack1, alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing, alias3=container.escapeExpression;

  return "<div class=\"faq container\">\n  <div class=\"row\">\n    <div class=\"col-xs-12 col-sm-12 col-md-12 col-lg-12 jumbotron inverse\">\n\n      <h1 class=\"text-center\">"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"faq_title",{"name":"lit","hash":{},"data":data}))
    + "</h1>\n\n      <ul class=\"faq-container\">\n"
    + ((stack1 = helpers.each.call(alias1,(depth0 != null ? depth0.apidata : depth0),{"name":"each","hash":{},"fn":container.program(1, data, 0),"inverse":container.noop,"data":data})) != null ? stack1 : "")
    + "      </ul>\n\n      <div class=\"row faq-container\">\n        <div class=\"col-xs-12 col-sm-12 col-md-6 center-block button-container\"\n        >\n            <button type=\"submit\" class=\"btn btn-block\" id=\"contactus-button\">\n              <span class=\"text-button top\">"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"faq_btn_bottomline",{"name":"lit","hash":{},"data":data}))
    + "</span>\n              <span class=\"text-button bottom\">\n                "
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"faq_btn_topline",{"name":"lit","hash":{},"data":data}))
    + "\n              </span>\n            </button>\n          </div>\n      </div>\n\n    </div>\n  </div>\n</div>\n";
},"useData":true});

this["selfcare"]["templates"]["forgotpassword"] = Handlebars.template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var stack1, helper, alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing, alias3="function", alias4=container.escapeExpression;

  return "<div class=\"forgotpassword row\">\n  <div class=\"jumbotron inverse\">\n    <div class=\"col-xs-10 col-sm-8 col-md-8 center-block\">\n      <div class=\"row\">\n        <div class=\"col-xs-12 col-sm-12 col-md-6\">\n          <div class=\"jumbo-img\"><!-- "
    + ((stack1 = ((helper = (helper = helpers.image || (depth0 != null ? depth0.image : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"image","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + " --></div>\n        </div>\n        <div class=\"col-xs-12 col-sm-12 col-md-6\">\n            <h2 class=\"font-bold\">"
    + alias4((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"reset_title",{"name":"lit","hash":{},"data":data}))
    + "</h2>\n            <p>"
    + alias4((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"forgotpw_desc",{"name":"lit","hash":{},"data":data}))
    + "</p>\n            "
    + ((stack1 = ((helper = (helper = helpers.forgotpasswordForm || (depth0 != null ? depth0.forgotpasswordForm : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"forgotpasswordForm","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n";
},"useData":true});

this["selfcare"]["templates"]["forms/block"] = Handlebars.template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing, alias3=container.escapeExpression;

  return "<form data-form=\"simblock\">\n  <div class=\"form-group\">\n    <label class=\"sr-only\" for=\"username\">"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"modal_block_input",{"name":"lit","hash":{},"data":data}))
    + "</label>\n    <input\n      type=\"text\"\n      class=\"form-control\"\n      id=\"blocktext\"\n      name=\"blocktext\"\n      placeholder=\""
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"modal_block_input",{"name":"lit","hash":{},"data":data}))
    + "\"\n    >\n  </div>\n  <button\n    type=\"submit\"\n    class=\"btn btn-block\">"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"edit_submit",{"name":"lit","hash":{},"data":data}))
    + "</button>\n</form>\n";
},"useData":true});

this["selfcare"]["templates"]["forms/facebook"] = Handlebars.template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    return "<form data-form=\"getfromfacebook\">\n  <button\n    type=\"submit\"\n    class=\"btn btn-lg btn-fb btn-block\"\n    disabled\n  >"
    + container.escapeExpression((helpers.lit || (depth0 && depth0.lit) || helpers.helperMissing).call(depth0 != null ? depth0 : {},"edit_fbconnect",{"name":"lit","hash":{},"data":data}))
    + "</button>\n</form>\n";
},"useData":true});

this["selfcare"]["templates"]["forms/forgotpassword"] = Handlebars.template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing, alias3=container.escapeExpression;

  return "<form class=\"form-horizontal\" data-form=\"forgotpassword\">\n  <div class=\"form-group\">\n    <label\n      class=\"sr-only control-label\"\n      for=\"msisdn\"\n    >"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"forgotpw_number",{"name":"lit","hash":{},"data":data}))
    + "</label>\n    <div class=\"col-xs-12\">\n      <input\n        type=\"text\"\n        class=\"form-control\"\n        placeholder=\""
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"forgotpw_number",{"name":"lit","hash":{},"data":data}))
    + "\"\n        id=\"msisdn\"\n        name=\"msisdn\"\n      >\n    </div>\n  </div>\n  <div class=\"form-group\">\n    <div class=\"col-xs-12\">\n      <button type=\"submit\" class=\"btn btn-block\">"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"btn_send",{"name":"lit","hash":{},"data":data}))
    + "</button>\n    </div>\n  </div>\n</form>\n";
},"useData":true});

this["selfcare"]["templates"]["forms/invitation"] = Handlebars.template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing, alias3=container.escapeExpression;

  return "<form data-form=\"invitation\">\n  <fieldset>\n    <div class=\"form-group\">\n      <label class=\"sr-only\" for=\"code\">"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"invit_input",{"name":"lit","hash":{},"data":data}))
    + "</label>\n      <input\n        type=\"text\"\n        class=\"form-control\"\n        placeholder=\""
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"invit_input",{"name":"lit","hash":{},"data":data}))
    + "\"\n        id=\"code\"\n        name=\"code\"\n      >\n    </div>\n    <div class=\"form-group\">\n      <button type=\"submit\" class=\"btn btn-primary btn-block\">\n      "
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"edit_submit",{"name":"lit","hash":{},"data":data}))
    + "</button>\n    </div>\n  </fieldset>\n</form>\n";
},"useData":true});

this["selfcare"]["templates"]["forms/login"] = Handlebars.template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var stack1, helper, alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing, alias3=container.escapeExpression, alias4=container.lambda;

  return "<form data-form=\"login\">\n  <div class=\"row\">\n    <div class=\"col-md-6 col-sm-6\">\n      <div class=\"form-group\">\n        <label class=\"sr-only\" for=\"username\">"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"login_number",{"name":"lit","hash":{},"data":data}))
    + "</label>\n        <div class=\"input-group\">\n          <span class=\"input-group-addon\" \"username-addon\">88</span>\n          <input type=\"text\" class=\"form-control\" name=\"username\" id=\"username\"\n          placeholder=\""
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"login_number",{"name":"lit","hash":{},"data":data}))
    + "\"\n          aria-describedby=\"username-addon\" required>\n        </div>\n      </div>\n    </div>\n    <div class=\"col-md-6 col-sm-6\">\n      <div class=\"form-group\">\n        <label class=\"sr-only\" for=\"password\">"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"login_password",{"name":"lit","hash":{},"data":data}))
    + "</label>\n        <div class=\"input-login\">\n            <input\n              type=\"password\"\n              class=\"form-control col-md-3\"\n              id=\"password\"\n              name=\"password\"\n              placeholder=\""
    + alias3(alias4(((stack1 = (depth0 != null ? depth0.lit : depth0)) != null ? stack1.login_password : stack1), depth0))
    + "\">\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class=\"row checkrow\">\n    <div class=\"col-md-6 col-sm-6\">\n      <div class=\"checkbox\">\n          <input type=\"checkbox\" name=\"persist\" id=\"chckbx\" value=\"\">\n          <label for=\"chckbx\">"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"login_keep",{"name":"lit","hash":{},"data":data}))
    + "</label>\n      </div>\n    </div>\n    <div class=\"col-md-6 col-sm-6 forgot text-center\">\n      <a href=\""
    + alias3(((helper = (helper = helpers.forgotpassword || (depth0 != null ? depth0.forgotpassword : depth0)) != null ? helper : alias2),(typeof helper === "function" ? helper.call(alias1,{"name":"forgotpassword","hash":{},"data":data}) : helper)))
    + "\">\n      "
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"login_forgotpw",{"name":"lit","hash":{},"data":data}))
    + "</a>\n    </div>\n  </div>\n  <div class=\"row login-group\">\n    <div class=\"col-md-6 col-sm-6\">\n      <button\n        type=\"button\"\n        class=\"btn btn-fb btn-lg btn-block\"\n        data-login-facebook\n      >"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"login_usefb",{"name":"lit","hash":{},"data":data}))
    + "</button>\n      <hr class=\"separator hidden-sm hidden-md hidden-lg\">\n    </div>\n    <div class=\"col-md-6 col-sm-6\">\n    <button\n        type=\"submit\"\n        class=\"btn btn-primary btn-lg btn-block\"\n      >"
    + alias3(alias4(((stack1 = (depth0 != null ? depth0.lit : depth0)) != null ? stack1.login : stack1), depth0))
    + "</button>\n\n    </div>\n  </div>\n</form>\n\n";
},"useData":true});

this["selfcare"]["templates"]["forms/register"] = Handlebars.template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var stack1;

  return "<form data-form=\"register\">\n"
    + ((stack1 = container.invokePartial(partials["par-msisdnCompoundInput"],depth0,{"name":"par-msisdnCompoundInput","hash":{"placeholder":"activation_input"},"data":data,"indent":"  ","helpers":helpers,"partials":partials,"decorators":container.decorators})) != null ? stack1 : "")
    + "  <button\n    type=\"submit\"\n    class=\"btn btn-block\"\n  >"
    + container.escapeExpression(container.lambda(((stack1 = (depth0 != null ? depth0.lit : depth0)) != null ? stack1.activation_register : stack1), depth0))
    + "</button>\n</form>\n";
},"usePartial":true,"useData":true});

this["selfcare"]["templates"]["forms/resetpassword"] = Handlebars.template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var stack1, alias1=container.lambda, alias2=container.escapeExpression;

  return "<form class=\"form-horizontal\" data-form=\"resetpassword\">\n  <div class=\"form-group\">\n    <label\n      for=\"msisdn\"\n      class=\"hidden-xs col-md-4 col-sm-4 control-label\"\n    >"
    + alias2(alias1(((stack1 = (depth0 != null ? depth0.lit : depth0)) != null ? stack1.resetpw_number : stack1), depth0))
    + "</label>\n    <div class=\"col-xs-12 col-md-8 col-sm-8\">\n      <input\n        type=\"text\"\n        class=\"form-control input-grey\"\n        placeholder=\"\"\n        id=\"msisdn\"\n        name=\"msisdn\"\n        disabled\n      >\n    </div>\n  </div>\n  <div class=\"form-group\">\n    <label\n      class=\"sr-only control-label\"\n      for=\"password\"\n    >"
    + alias2(alias1(((stack1 = (depth0 != null ? depth0.lit : depth0)) != null ? stack1.resetpw_new : stack1), depth0))
    + "</label>\n    <div class=\"col-xs-12\">\n      <input\n        type=\"password\"\n        class=\"form-control\"\n        placeholder=\""
    + alias2(alias1(((stack1 = (depth0 != null ? depth0.lit : depth0)) != null ? stack1.resetpw_new : stack1), depth0))
    + "\"\n        id=\"password\"\n        name=\"password\"\n        required\n      >\n    </div>\n  </div>\n  <div class=\"form-group\">\n    <label\n      class=\"sr-only control-label\"\n      for=\"passwordrepeat\"\n    >"
    + alias2(alias1(((stack1 = (depth0 != null ? depth0.lit : depth0)) != null ? stack1.resetpw_retype : stack1), depth0))
    + "</label>\n    <div class=\"col-xs-12\">\n      <input\n        type=\"password\"\n        class=\"form-control\"\n        placeholder=\""
    + alias2(alias1(((stack1 = (depth0 != null ? depth0.lit : depth0)) != null ? stack1.resetpw_retype : stack1), depth0))
    + "\"\n        id=\"passwordrepeat\"\n        name=\"passwordrepeat\"\n        data-repeat=\"password\"\n        required\n      >\n    </div>\n  </div>\n  <div class=\"form-group\">\n    <div class=\"checkbox\">\n      <input type=\"checkbox\" name=\"sendpasswordsms\" id=\"sendpasswordsms\">\n      <label class=\"label-termsofuse\" for=\"sendpasswordsms\">\n      "
    + alias2((helpers.lit || (depth0 && depth0.lit) || helpers.helperMissing).call(depth0 != null ? depth0 : {},"sendpasswordsms",{"name":"lit","hash":{},"data":data}))
    + "</label>\n    </div>\n  </div>\n  <div class=\"form-group\">\n    <div class=\"col-xs-12\">\n      <hr class=\"hidden-xs\">\n      <button type=\"submit\" class=\"btn btn-block\">"
    + alias2(alias1(((stack1 = (depth0 != null ? depth0.lit : depth0)) != null ? stack1.resetpw_btn : stack1), depth0))
    + "</button>\n    </div>\n  </div>\n</form>\n\n";
},"useData":true});

this["selfcare"]["templates"]["forms/security"] = Handlebars.template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var stack1;

  return "<form data-form=\"security\">\n  <button\n    type=\"submit\"\n    class=\"btn btn-block\"\n  >"
    + container.escapeExpression(container.lambda(((stack1 = (depth0 != null ? depth0.lit : depth0)) != null ? stack1.activation_security : stack1), depth0))
    + "</button>\n</form>\n";
},"useData":true});

this["selfcare"]["templates"]["forms/takemehome"] = Handlebars.template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var stack1;

  return "<form data-form=\"takemehome\">\n  <button type=\"submit\" class=\"btn btn-block\">"
    + container.escapeExpression(container.lambda(((stack1 = (depth0 != null ? depth0.lit : depth0)) != null ? stack1.sorry_btn : stack1), depth0))
    + "\n  </button>\n</form>\n";
},"useData":true});

this["selfcare"]["templates"]["forms/topup"] = Handlebars.template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var stack1, helper, alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing, alias3=container.escapeExpression, alias4="function";

  return "<form class=\"topupform\" data-form=\"topup\">\n"
    + ((stack1 = container.invokePartial(partials["par-msisdnCompoundInput"],depth0,{"name":"par-msisdnCompoundInput","hash":{"placeholder":"topup_recipients_number"},"data":data,"indent":"  ","helpers":helpers,"partials":partials,"decorators":container.decorators})) != null ? stack1 : "")
    + "  <div class=\"row inline-form\">\n    <div class=\"col-xs-10\">\n      <div class=\"form-group\">\n        <label\n          class=\"sr-only control-label\"\n          for=\"amount\"\n        >"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"topup_amount",{"name":"lit","hash":{},"data":data}))
    + "</label>\n        <input data-topupamount\n          type=\"number\"\n          class=\"form-control\"\n          placeholder=\""
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"topup_amount",{"name":"lit","hash":{},"data":data}))
    + "\"\n          id=\"amount\"\n          name=\"amount\"\n          min=\"10\"\n          max=\"5000\"\n          required>\n      </div>\n    </div>\n    <div class=\"col-xs-2 text-right\">\n      <a href=\"\" data-btntopupamount>\n        "
    + ((stack1 = ((helper = (helper = helpers.image || (depth0 != null ? depth0.image : depth0)) != null ? helper : alias2),(typeof helper === alias4 ? helper.call(alias1,{"name":"image","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "\n      </a>\n    </div>\n  </div>\n  <div class=\"row\">\n    <div class=\"col-xs-12\">\n      <div class=\"form-group\">\n        <label\n          class=\"sr-only control-label\"\n          for=\"email\"\n        >"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"topup_email",{"name":"lit","hash":{},"data":data}))
    + "</label>\n        <input\n          type=\"email\"\n          class=\"form-control\"\n          placeholder=\""
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"topup_email",{"name":"lit","hash":{},"data":data}))
    + "\"\n          id=\"email\"\n          name=\"email\"\n          value=\""
    + alias3(((helper = (helper = helpers.useremail || (depth0 != null ? depth0.useremail : depth0)) != null ? helper : alias2),(typeof helper === alias4 ? helper.call(alias1,{"name":"useremail","hash":{},"data":data}) : helper)))
    + "\">\n      </div>\n    </div>\n  </div>\n  <div class=\"row\">\n    <div class=\"col-xs-12\">\n      <div class=\"form-group\">\n        <label\n          class=\"sr-only control-label\"\n          for=\"name\">\n          "
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"topup_name",{"name":"lit","hash":{},"data":data}))
    + "</label>\n        <input\n          type=\"text\"\n          class=\"form-control\"\n          placeholder="
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"topup_name",{"name":"lit","hash":{},"data":data}))
    + "\n          id=\"name\"\n          name=\"name\"\n          value=\""
    + alias3(((helper = (helper = helpers.username || (depth0 != null ? depth0.username : depth0)) != null ? helper : alias2),(typeof helper === alias4 ? helper.call(alias1,{"name":"username","hash":{},"data":data}) : helper)))
    + "\"\n          required>\n      </div>\n    </div>\n  </div>\n  <div class=\"row\">\n    <div class=\"col-xs-12\">\n      <div class=\"form-group\">\n        <button class=\"btn btn-block\" type=\"submit\">\n            "
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"topup_proceed",{"name":"lit","hash":{},"data":data}))
    + "\n        </button>\n      </div>\n    </div>\n  </div>\n</form>\n";
},"usePartial":true,"useData":true});

this["selfcare"]["templates"]["forms/transfer"] = Handlebars.template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var stack1, helper, alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing, alias3="function", alias4=container.escapeExpression;

  return "<form data-form=\"transfer\">\n  <input type=\"hidden\" name=\"type\" value=\""
    + alias4(((helper = (helper = helpers.type || (depth0 != null ? depth0.type : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"type","hash":{},"data":data}) : helper)))
    + "\">\n"
    + ((stack1 = container.invokePartial(partials["par-msisdnCompoundInput"],depth0,{"name":"par-msisdnCompoundInput","hash":{"placeholder":"topup_recipients_number"},"data":data,"indent":"  ","helpers":helpers,"partials":partials,"decorators":container.decorators})) != null ? stack1 : "")
    + "  <div class=\"form-group\">\n    <label class=\"sr-only\" for=\"amount\">\n    Write amount in <span class=\"\">Tk.</span></label>\n    <input\n      type=\"number\"\n      class=\"form-control no-spinner-icons\"\n      id=\"amount\"\n      name=\"amount\"\n      placeholder=\""
    + alias4(((helper = (helper = helpers.description || (depth0 != null ? depth0.description : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"description","hash":{},"data":data}) : helper)))
    + "\">\n  </div>\n  <button type=\"submit\" class=\"btn btn-block\">"
    + alias4(((helper = (helper = helpers.btntxt || (depth0 != null ? depth0.btntxt : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"btntxt","hash":{},"data":data}) : helper)))
    + "</button>\n</form>\n";
},"usePartial":true,"useData":true});

this["selfcare"]["templates"]["forms/update"] = Handlebars.template({"1":function(container,depth0,helpers,partials,data) {
    var helper, alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing, alias3="function", alias4=container.escapeExpression;

  return "            <option value=\""
    + alias4(((helper = (helper = helpers.value || (depth0 != null ? depth0.value : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"value","hash":{},"data":data}) : helper)))
    + "\">"
    + alias4(((helper = (helper = helpers.name || (depth0 != null ? depth0.name : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"name","hash":{},"data":data}) : helper)))
    + "</option>\n";
},"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var stack1, alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing, alias3=container.escapeExpression;

  return "<form data-form=\"updateProfile\">\n  <div class=\"row bg-grey blue-border-container\">\n    <div class=\"form-group col-xs-12 col-md-12 col-md-6\">\n      <label for=\"name\">"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"edit_name",{"name":"lit","hash":{},"data":data}))
    + "</label>\n      <input\n        type=\"text\"\n        class=\"form-control\"\n        id=\"name\"\n        name=\"name\"\n        placeholder=\""
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"edit_name",{"name":"lit","hash":{},"data":data}))
    + "\"\n        required>\n    </div>\n    <div class=\"form-group col-xs-12 col-md-12 col-md-6\">\n      <label for=\"email\">"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"edit_mail",{"name":"lit","hash":{},"data":data}))
    + "</label>\n      <input\n        type=\"email\"\n        class=\"form-control\"\n        id=\"email\"\n        name=\"email\"\n        placeholder=\""
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"edit_mail",{"name":"lit","hash":{},"data":data}))
    + "\">\n    </div>\n    <div class=\"form-group col-xs-12 col-md-12 col-md-4\">\n      <label for=\"gender\">"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"edit_gender",{"name":"lit","hash":{},"data":data}))
    + "</label>\n      <div class=\"select-wrapper\">\n        <select\n          class=\"form-control\"\n          id=\"gender\" name=\"gender\" required\n        >\n          <option value=\"MALE\">"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"edit_genderm",{"name":"lit","hash":{},"data":data}))
    + "</option>\n          <option value=\"FEMALE\">"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"edit_genderf",{"name":"lit","hash":{},"data":data}))
    + "</option>\n        </select>\n      </div>\n    </div>\n    <div class=\"form-group col-xs-6 col-sm-6 col-md-4\">\n      <label for=\"birthdate_day\">"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"edit_birth",{"name":"lit","hash":{},"data":data}))
    + "</label>\n      <div class=\"select-wrapper\">\n        <select\n          class=\"form-control\"\n          id=\"birthdate_day\" name=\"birthdate_day\" required\n        >\n"
    + ((stack1 = helpers.each.call(alias1,(depth0 != null ? depth0.birthdate_day : depth0),{"name":"each","hash":{},"fn":container.program(1, data, 0),"inverse":container.noop,"data":data})) != null ? stack1 : "")
    + "        </select>\n      </div>\n    </div>\n    <div class=\"form-group col-xs-6 col-sm-6 col-md-4\">\n      <label for=\"birthdate_month\">"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"edit_month",{"name":"lit","hash":{},"data":data}))
    + "</label>\n      <div class=\"select-wrapper\">\n        <select\n          class=\"form-control\"\n          id=\"birthdate_month\" name=\"birthdate_month\" required\n        >\n"
    + ((stack1 = helpers.each.call(alias1,(depth0 != null ? depth0.birthdate_month : depth0),{"name":"each","hash":{},"fn":container.program(1, data, 0),"inverse":container.noop,"data":data})) != null ? stack1 : "")
    + "        </select>\n      </div>\n    </div>\n    <div class=\"form-group col-xs-12 col-md-12 col-md-4\">\n      <label for=\"birthdate_year\">"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"edit_year",{"name":"lit","hash":{},"data":data}))
    + "</label>\n      <div class=\"select-wrapper\">\n        <select\n          class=\"form-control\"\n          id=\"birthdate_year\" name=\"birthdate_year\" required\n        >\n"
    + ((stack1 = helpers.each.call(alias1,(depth0 != null ? depth0.birthdate_year : depth0),{"name":"each","hash":{},"fn":container.program(1, data, 0),"inverse":container.noop,"data":data})) != null ? stack1 : "")
    + "        </select>\n      </div>\n    </div>\n   <div class=\"form-group col-sm-12\">\n      <label for=\"js-student\">"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"edit_student",{"name":"lit","hash":{},"data":data}))
    + "</label>\n      <div class=\"switch-control center-vertically\">\n        <span class=\"status js-check-change-field\"></span>\n        <input type=\"checkbox\" id=\"js-student\" class=\"js-switch js-student\" />\n      </div>\n    </div>\n    <div class=\"form-group col-sm-12 select-university\" style=\"display: none;\">\n      <label for=\"university\">"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"edit_university",{"name":"lit","hash":{},"data":data}))
    + "</label>\n      <div class=\"select-wrapper\">\n        <select\n          class=\"form-control\"\n          id=\"university\" name=\"university\"\n        >\n        </select>\n      </div>\n    </div>\n  </div>\n  <div class=\"row\">\n    <div class=\"col-md-12\">\n      <p class=\"text-center udsub\"> </p>\n    </div>\n  </div>\n  <div class=\"row\">\n    <div class=\"col-xs-10 col-sm-12 col-md-6 subbtn center-block\">\n      <button type=\"submit\" class=\"btn btn-block\">"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"edit_submit",{"name":"lit","hash":{},"data":data}))
    + "\n      </button>\n    </div>\n  </div>\n</form>\n";
},"useData":true});

this["selfcare"]["templates"]["forms/usecredentials"] = Handlebars.template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing, alias3=container.escapeExpression;

  return "<form data-form=\"useCredentials\">\n  <div class=\"form-group clearfix\">\n    <label for=\"username\" class=\"col-xs-2\">"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"activation_input",{"name":"lit","hash":{},"data":data}))
    + "</label>\n    <div class=\"col-xs-10\">\n      <input\n        type=\"text\"\n        class=\"form-control\"\n        id=\"username\"\n        name=\"username\"\n        placeholder=\""
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"activation_input",{"name":"lit","hash":{},"data":data}))
    + "\"\n        readonly>\n      </div>\n  </div>\n  <div class=\"form-group\">\n    <label for=\"password\">"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"activation_pwmethod_type",{"name":"lit","hash":{},"data":data}))
    + "</label>\n    <input\n      type=\"password\"\n      class=\"form-control\"\n      id=\"password\"\n      name=\"password\"\n      placeholder=\""
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"activation_pwmethod_type",{"name":"lit","hash":{},"data":data}))
    + "\">\n  </div>\n  <div class=\"form-group\">\n    <label for=\"password\">"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"activation_pwmethod_retype",{"name":"lit","hash":{},"data":data}))
    + "</label>\n    <input\n      type=\"password\"\n      class=\"form-control\"\n      id=\"password-repeat\"\n      name=\"password-repeat\"\n      placeholder=\""
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"activation_pwmethod_retype",{"name":"lit","hash":{},"data":data}))
    + "\"\n      data-validate-repeat=\"password\"\n      data-validate-error=\"formerror_passwordnomatch\">\n  </div>\n  <div class=\"form-group\">\n    <div class=\"checkbox\">\n      <input type=\"checkbox\" name=\"termsofuse\" id=\"termsofuse\" data-btn-target=\"#btn-termsofuse\" value=\"\"\n      data-validate-required>\n      <label class=\"label-termsofuse\" for=\"termsofuse\">\n      "
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"activation_termsofuse_accept",{"name":"lit","hash":{},"data":data}))
    + "\n      <a href=\"https://www.skitto.com/terms-of-services\">\n      "
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"termsofuse_link",{"name":"lit","hash":{},"data":data}))
    + "</a></label>\n    </div>\n  </div>\n  <button\n    type=\"submit\" id=\"btn-termsofuse\"\n    class=\"btn btn-block\"\n  disabled>"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"activation_pwmethod_continue",{"name":"lit","hash":{},"data":data}))
    + "</button>\n</form>\n";
},"useData":true});

this["selfcare"]["templates"]["forms/usefacebook"] = Handlebars.template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing, alias3=container.escapeExpression;

  return "<form data-form=\"useFacebook\">\n  <div class=\"checkbox\">\n      <input type=\"checkbox\" name=\"termsofuse\" id=\"termsofuseFB\" value=\"\"\n    required  data-btn-target=\"#btn-termsofuseFB\">\n      <label class=\"label-termsofuse\" for=\"termsofuseFB\">"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"activation_termsofuse_accept",{"name":"lit","hash":{},"data":data}))
    + " <a href=\"\"\n      data-link=\"termsofusepdf\">"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"activation_termsofuse_link",{"name":"lit","hash":{},"data":data}))
    + "</a></label>\n  </div>\n  <button\n    type=\"submit\" id=\"btn-termsofuseFB\"\n    class=\"btn btn-fb btn-lg btn-block\"\n  disabled>"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"activation_fbmethod_btn",{"name":"lit","hash":{},"data":data}))
    + "</button>\n</form>\n";
},"useData":true});

this["selfcare"]["templates"]["forms/verify"] = Handlebars.template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing, alias3=container.escapeExpression;

  return "<form data-form=\"verify\">\n  <div class=\"form-group\">\n    <label class=\"sr-only\" for=\"username\">"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"activation_input",{"name":"lit","hash":{},"data":data}))
    + "</label>\n    <input\n      type=\"number\"\n      class=\"form-control input-green\"\n      id=\"username\"\n      name=\"username\"\n      placeholder=\""
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"activation_input",{"name":"lit","hash":{},"data":data}))
    + "\"\n      readonly\n    >\n  </div>\n  <div class=\"form-group\">\n    <label class=\"sr-only\" for=\"password\"\n    >"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"activation_otp",{"name":"lit","hash":{},"data":data}))
    + "</label>\n    <input\n      type=\"password\"\n      class=\"form-control\"\n      id=\"password\"\n      name=\"password\"\n      placeholder=\""
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"activation_otp",{"name":"lit","hash":{},"data":data}))
    + "\">\n  </div>\n  <button type=\"submit\" class=\"btn btn-block\">"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"activation_verify",{"name":"lit","hash":{},"data":data}))
    + "</button\n  >\n</form>\n";
},"useData":true});

this["selfcare"]["templates"]["forms/verifypasswordotp"] = Handlebars.template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing, alias3=container.escapeExpression;

  return "<form data-form=\"verifypasswordotp\">\n    <div class=\"form-group\">\n          <label\n          class=\"sr-only control-label\"\n          for=\"msisdn\">"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"forgotpw_number",{"name":"lit","hash":{},"data":data}))
    + "</label>\n          <input type=\"text\" class=\"form-control\" name=\"msisdn\" placeholder=\""
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"forgotpw_number",{"name":"lit","hash":{},"data":data}))
    + "\" />\n    </div>\n    <div class=\"form-group\">\n      <label\n      class=\"sr-only control-label\"\n      for=\"otp\">"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"activation_otp",{"name":"lit","hash":{},"data":data}))
    + "</label>\n      <input type=\"text\"  class=\"form-control\" placeholder=\""
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"activation_otp",{"name":"lit","hash":{},"data":data}))
    + "\" name=\"otp\"/>\n    </div>\n    <div class=\"form-group\">\n        <button type=\"submit\" class=\"btn btn-block\">"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"activation_verify",{"name":"lit","hash":{},"data":data}))
    + "</button>\n    </div>\n</form>\n";
},"useData":true});

this["selfcare"]["templates"]["history_pdf"] = Handlebars.template({"1":function(container,depth0,helpers,partials,data) {
    var stack1;

  return ((stack1 = helpers["if"].call(depth0 != null ? depth0 : {},(depth0 != null ? depth0.hasentries : depth0),{"name":"if","hash":{},"fn":container.program(2, data, 0),"inverse":container.noop,"data":data})) != null ? stack1 : "");
},"2":function(container,depth0,helpers,partials,data) {
    var stack1, alias1=depth0 != null ? depth0 : {};

  return ((stack1 = helpers["if"].call(alias1,(depth0 != null ? depth0.type : depth0),{"name":"if","hash":{},"fn":container.program(3, data, 0),"inverse":container.noop,"data":data})) != null ? stack1 : "")
    + ((stack1 = helpers["if"].call(alias1,(depth0 != null ? depth0.subtype : depth0),{"name":"if","hash":{},"fn":container.program(5, data, 0),"inverse":container.noop,"data":data})) != null ? stack1 : "")
    + ((stack1 = helpers.each.call(alias1,(depth0 != null ? depth0.entries : depth0),{"name":"each","hash":{},"fn":container.program(7, data, 0),"inverse":container.noop,"data":data})) != null ? stack1 : "");
},"3":function(container,depth0,helpers,partials,data) {
    var helper;

  return "          <tr>\n            <th colspan=\"8\">"
    + container.escapeExpression(((helper = (helper = helpers.type || (depth0 != null ? depth0.type : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === "function" ? helper.call(depth0 != null ? depth0 : {},{"name":"type","hash":{},"data":data}) : helper)))
    + "</th>\n          </tr>\n";
},"5":function(container,depth0,helpers,partials,data) {
    var helper;

  return "          <tr>\n            <th colspan=\"8\">"
    + container.escapeExpression(((helper = (helper = helpers.subtype || (depth0 != null ? depth0.subtype : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === "function" ? helper.call(depth0 != null ? depth0 : {},{"name":"subtype","hash":{},"data":data}) : helper)))
    + "</th>\n          </tr>\n";
},"7":function(container,depth0,helpers,partials,data) {
    var stack1, helper, alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing, alias3="function", alias4=container.escapeExpression;

  return ((stack1 = helpers["if"].call(alias1,(data && data.first),{"name":"if","hash":{},"fn":container.program(8, data, 0),"inverse":container.noop,"data":data})) != null ? stack1 : "")
    + "          <tr>\n            <td>"
    + alias4(((helper = (helper = helpers.itemnr || (depth0 != null ? depth0.itemnr : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"itemnr","hash":{},"data":data}) : helper)))
    + "</td>\n            <td>"
    + alias4(((helper = (helper = helpers.calldate || (depth0 != null ? depth0.calldate : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"calldate","hash":{},"data":data}) : helper)))
    + "</td>\n            <td>"
    + alias4(((helper = (helper = helpers.calltime || (depth0 != null ? depth0.calltime : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"calltime","hash":{},"data":data}) : helper)))
    + "</td>\n            <td>"
    + alias4(((helper = (helper = helpers.otherparty || (depth0 != null ? depth0.otherparty : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"otherparty","hash":{},"data":data}) : helper)))
    + "</td>\n            <td>"
    + alias4(((helper = (helper = helpers.calltype || (depth0 != null ? depth0.calltype : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"calltype","hash":{},"data":data}) : helper)))
    + "</td>\n            <td>"
    + alias4(((helper = (helper = helpers.actualduration || (depth0 != null ? depth0.actualduration : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"actualduration","hash":{},"data":data}) : helper)))
    + "</td>\n            <td>"
    + alias4(((helper = (helper = helpers.billedduration || (depth0 != null ? depth0.billedduration : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"billedduration","hash":{},"data":data}) : helper)))
    + "</td>\n            <td>"
    + alias4(((helper = (helper = helpers.amount || (depth0 != null ? depth0.amount : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"amount","hash":{},"data":data}) : helper)))
    + "</td>\n          </tr>\n"
    + ((stack1 = helpers["if"].call(alias1,(data && data.last),{"name":"if","hash":{},"fn":container.program(10, data, 0),"inverse":container.noop,"data":data})) != null ? stack1 : "");
},"8":function(container,depth0,helpers,partials,data) {
    return "            <tr>\n              <th>Item Count</th>\n              <th>Call Date</th>\n              <th>Call Time</th>\n              <th>Other Party</th>\n              <th>Call Type</th>\n              <th>Actual Duration</th>\n              <th>Billed Duration</th>\n              <th>Amount</th>\n            </tr>\n";
},"10":function(container,depth0,helpers,partials,data) {
    return "            <tr><th colspan=\"8\" class=\"noborder\"></th></tr>\n";
},"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var stack1;

  return "<html>\n  <head>\n    <meta charset=\"utf-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\">\n    <meta name=\"description\" content=\"\">\n  </head>\n  <body>\n    <style>\n      td {\n        border: 1px solid black;\n      }\n      th {\n        border: 1px solid black;\n      }\n      table {\n        border-spacing:0;\n      }\n      .noborder {\n        border: none;\n        height: 15px;\n      }\n    </style>\n    <table>\n"
    + ((stack1 = helpers.each.call(depth0 != null ? depth0 : {},(depth0 != null ? depth0.group : depth0),{"name":"each","hash":{},"fn":container.program(1, data, 0),"inverse":container.noop,"data":data})) != null ? stack1 : "")
    + "    </table>\n  </body>\n</html>\n";
},"useData":true});

this["selfcare"]["templates"]["landingpage"] = Handlebars.template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var stack1, helper, alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing, alias3=container.escapeExpression;

  return "<div class=\"row\">\n  <div class=\"jumbotron\">\n    <div class=\"col-xs-12 col-sm-8 col-md-6 col-lg-4 center-block text-center\">\n      <h1>"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"invit_title",{"name":"lit","hash":{},"data":data}))
    + "</h1>\n      <p>"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"invit_desc",{"name":"lit","hash":{},"data":data}))
    + "</p>\n      "
    + ((stack1 = ((helper = (helper = helpers.invitationForm || (depth0 != null ? depth0.invitationForm : depth0)) != null ? helper : alias2),(typeof helper === "function" ? helper.call(alias1,{"name":"invitationForm","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "\n    </div>\n  </div>\n</div>\n";
},"useData":true});

this["selfcare"]["templates"]["login"] = Handlebars.template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var stack1, helper, alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing;

  return "<div class=\"container-fluid login-container\">\n  <div class=\"row\">\n    <div class=\"content inverse\">\n      <div class=\"col-xs-10 col-md-8 center-block\">\n        <div class=\"row\">\n          <div class=\"text-center col-xs-12 col-sm-10 col-md-10 center-block\">\n            <h1 class=\"font-bold\">"
    + container.escapeExpression((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"login_title",{"name":"lit","hash":{},"data":data}))
    + "</h1>\n            "
    + ((stack1 = ((helper = (helper = helpers.loginForm || (depth0 != null ? depth0.loginForm : depth0)) != null ? helper : alias2),(typeof helper === "function" ? helper.call(alias1,{"name":"loginForm","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n";
},"useData":true});

this["selfcare"]["templates"]["modaltests"] = Handlebars.template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var stack1, helper, alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing, alias3="function";

  return "<div class=\"row\">\n  <div class=\"jumbotron inverse\">\n    <div class=\"col-xs-10 center-block text-center\" style=\"margin-top: 60px;\">\n      <div class=\"row\" style=\"margin-bottom: 30px;\">\n        <div class=\"col-xs-6\">\n          <button type=\"button\"\n          class=\"btn btn-default btn-block\"\n          data-toggle=\"modal\"\n          data-target=\"#modalhelp\">\n          Emergency Loan Help</button>\n        </div>\n          "
    + ((stack1 = ((helper = (helper = helpers.modalHelp || (depth0 != null ? depth0.modalHelp : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"modalHelp","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "\n        <div class=\"col-xs-6\">\n          <button type=\"button\"\n          class=\"btn btn-default btn-block\"\n          data-toggle=\"modal\"\n          data-target=\"#modalgreed\">\n          Emergency Loan Greed</button>\n        </div>\n          "
    + ((stack1 = ((helper = (helper = helpers.modalGreed || (depth0 != null ? depth0.modalGreed : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"modalGreed","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "\n      </div>\n\n      <div class=\"row\">\n        <div class=\"col-xs-6\">\n          <button type=\"button\"\n          class=\"btn btn-default btn-block\"\n          data-toggle=\"modal\"\n          data-target=\"#modalapp\">\n          Tintin App</button>\n        </div>\n          "
    + ((stack1 = ((helper = (helper = helpers.modalApp || (depth0 != null ? depth0.modalApp : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"modalApp","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "\n        <div class=\"col-xs-6\">\n          <button type=\"button\"\n          class=\"btn btn-default btn-block\"\n          data-toggle=\"modal\"\n          data-target=\"#modallogin\">\n          Login</button>\n        </div>\n          "
    + ((stack1 = ((helper = (helper = helpers.modalLogin || (depth0 != null ? depth0.modalLogin : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"modalLogin","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "\n      </div>\n    </div>\n  </div>\n</div>\n";
},"useData":true});

this["selfcare"]["templates"]["partials/balancedetails"] = Handlebars.template({"1":function(container,depth0,helpers,partials,data) {
    var stack1, alias1=container.escapeExpression, alias2=container.lambda;

  return "      <tr>\n        <td>"
    + alias1((helpers.lit || (depth0 && depth0.lit) || helpers.helperMissing).call(depth0 != null ? depth0 : {},"dashboard_balance_details_emergency_loan",{"name":"lit","hash":{},"data":data}))
    + "</td>\n        <td>"
    + alias1(alias2(((stack1 = (depth0 != null ? depth0.loan : depth0)) != null ? stack1.amount : stack1), depth0))
    + " tk</td>\n        <td>"
    + alias1(alias2(((stack1 = (depth0 != null ? depth0.loan : depth0)) != null ? stack1.validuntil : stack1), depth0))
    + "</td>\n      </tr>\n";
},"3":function(container,depth0,helpers,partials,data) {
    var stack1;

  return ((stack1 = helpers.each.call(depth0 != null ? depth0 : {},(depth0 != null ? depth0.transfered : depth0),{"name":"each","hash":{},"fn":container.program(4, data, 0),"inverse":container.noop,"data":data})) != null ? stack1 : "");
},"4":function(container,depth0,helpers,partials,data) {
    var alias1=container.escapeExpression, alias2=container.lambda;

  return "      <tr>\n        <td>"
    + alias1((helpers.lit || (depth0 && depth0.lit) || helpers.helperMissing).call(depth0 != null ? depth0 : {},"dashboard_balance_details_transfered_money",{"name":"lit","hash":{},"data":data}))
    + "</td>\n        <td>"
    + alias1(alias2((depth0 != null ? depth0.amount : depth0), depth0))
    + " tk</td>\n        <td>"
    + alias1(alias2((depth0 != null ? depth0.expires : depth0), depth0))
    + "</td>\n      </tr>\n";
},"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var stack1, alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing, alias3=container.escapeExpression, alias4=container.lambda;

  return "<div class=\"table-responsive\">\n  <table class=\"table\">\n    <thead>\n      <tr>\n        <td>"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"history_column_action",{"name":"lit","hash":{},"data":data}))
    + "</td>\n        <td>"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"history_column_charge",{"name":"lit","hash":{},"data":data}))
    + "</td>\n        <td>"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"dashboard_balance_valid_until",{"name":"lit","hash":{},"data":data}))
    + "</td></tr>\n    </thead>\n    <tbody>\n      <tr>\n        <td>"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"dashboard_balance_details_main_balance",{"name":"lit","hash":{},"data":data}))
    + "</td>\n        <td>"
    + alias3(alias4(((stack1 = (depth0 != null ? depth0.balance : depth0)) != null ? stack1.amount : stack1), depth0))
    + " tk</td>\n        <td>"
    + alias3(alias4(((stack1 = (depth0 != null ? depth0.balance : depth0)) != null ? stack1.validuntil : stack1), depth0))
    + "</td>\n      </tr>\n"
    + ((stack1 = helpers["if"].call(alias1,(depth0 != null ? depth0.loan : depth0),{"name":"if","hash":{},"fn":container.program(1, data, 0),"inverse":container.noop,"data":data})) != null ? stack1 : "")
    + ((stack1 = helpers["if"].call(alias1,(depth0 != null ? depth0.transfered : depth0),{"name":"if","hash":{},"fn":container.program(3, data, 0),"inverse":container.noop,"data":data})) != null ? stack1 : "")
    + "    </tbody>\n  </table>\n</div>\n";
},"useData":true});

this["selfcare"]["templates"]["partials/buttonduo"] = Handlebars.template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var stack1, helper, alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing, alias3="function", alias4=container.escapeExpression;

  return "<div class=\"row buttonduo\">\n  <div class=\"col-xs-6\">\n    <button class=\"btn "
    + alias4(((helper = (helper = helpers.btnclass1 || (depth0 != null ? depth0.btnclass1 : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"btnclass1","hash":{},"data":data}) : helper)))
    + " btn-block\" type=\"button\" "
    + ((stack1 = ((helper = (helper = helpers.btn1data || (depth0 != null ? depth0.btn1data : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"btn1data","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + ">"
    + alias4(((helper = (helper = helpers.buttonleft || (depth0 != null ? depth0.buttonleft : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"buttonleft","hash":{},"data":data}) : helper)))
    + "</button>\n  </div>\n  <div class=\"col-xs-6\">\n    <a class=\"btn "
    + alias4(((helper = (helper = helpers.btnclass2 || (depth0 != null ? depth0.btnclass2 : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"btnclass2","hash":{},"data":data}) : helper)))
    + " btn-block\" href=\"#\" role=\"button\" "
    + ((stack1 = ((helper = (helper = helpers.btn2data || (depth0 != null ? depth0.btn2data : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"btn2data","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + " >"
    + alias4(((helper = (helper = helpers.buttonright || (depth0 != null ? depth0.buttonright : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"buttonright","hash":{},"data":data}) : helper)))
    + "</a>\n  </div>\n</div>\n";
},"useData":true});

this["selfcare"]["templates"]["partials/buttonsingle"] = Handlebars.template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var stack1, helper, alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing, alias3="function", alias4=container.escapeExpression;

  return "<div class=\"row\">\n  <div class=\"col-xs-10 col-sm-6 center-block\">\n    <a class=\"btn "
    + alias4(((helper = (helper = helpers.btnsglclass || (depth0 != null ? depth0.btnsglclass : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"btnsglclass","hash":{},"data":data}) : helper)))
    + " btn-block\" href=\"#\" "
    + ((stack1 = ((helper = (helper = helpers.buttonsgldata || (depth0 != null ? depth0.buttonsgldata : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"buttonsgldata","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + " role=\"button\">"
    + alias4(((helper = (helper = helpers.buttonsgltxt || (depth0 != null ? depth0.buttonsgltxt : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"buttonsgltxt","hash":{},"data":data}) : helper)))
    + "</a>\n  </div>\n</div>\n";
},"useData":true});

this["selfcare"]["templates"]["partials/errorpage"] = Handlebars.template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var stack1, helper, alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing, alias3="function", alias4=container.escapeExpression;

  return "<div class=\"error row\">\n  <div class=\"jumbotron inverse\">\n    <div class=\"col-xs-10 col-md-8 center-block\">\n      <div class=\"row\">\n        <div class=\"col-xs-12 col-sm-12 col-md-6\">\n          <div class=\"jumbo-img\"><!-- "
    + ((stack1 = ((helper = (helper = helpers.image || (depth0 != null ? depth0.image : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"image","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + " --></div>\n        </div>\n        <div class=\" col-xs-12 col-sm-12 col-md-6\">\n          <h1>"
    + alias4(((helper = (helper = helpers.title || (depth0 != null ? depth0.title : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"title","hash":{},"data":data}) : helper)))
    + "</h1>\n          <p>"
    + alias4(((helper = (helper = helpers.description || (depth0 != null ? depth0.description : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"description","hash":{},"data":data}) : helper)))
    + "\n            <span class=\"hidden-xs\">"
    + alias4(((helper = (helper = helpers.moredescription || (depth0 != null ? depth0.moredescription : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"moredescription","hash":{},"data":data}) : helper)))
    + "\n            </span>\n          </p>\n          "
    + ((stack1 = ((helper = (helper = helpers.button || (depth0 != null ? depth0.button : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"button","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "\n          "
    + ((stack1 = ((helper = (helper = helpers.form || (depth0 != null ? depth0.form : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"form","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "\n        </div>\n\n      </div>\n    </div>\n  </div>\n</div>\n";
},"useData":true});

this["selfcare"]["templates"]["partials/history"] = Handlebars.template({"1":function(container,depth0,helpers,partials,data) {
    return "      <div class=\"col-xs-2 pull-right\">\n        <label for=\"downloadpdf\">Download as pdf</label>\n        <button class=\"btn\" name=\"downloadpdf\"data-downloadhistory>\n          <div></div>\n        </button>\n      </div>\n";
},"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var stack1, helper, alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing, alias3=container.escapeExpression, alias4="function";

  return "<div class=\"col-sm-12 col-md-12\">\n  <div class=\"history-filter\">\n    <form class=\"form-inline inverse\" role=\"form\">\n      <label for=\"from\" class=\"hidden-lg hidden-md visible-sm-block\n      visible-xs-block\">"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"usage_history_span",{"name":"lit","hash":{},"data":data}))
    + "</label>\n      <div class=\"form-group\">\n        <label for=\"from\" class=\"visible-lg-inline-block\n        visible-md-inline-block\">"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"usage_history_span",{"name":"lit","hash":{},"data":data}))
    + "</label>\n        <input\n          class=\"form-control\"\n          name=\"from\"\n          type=\"text\"\n          placeholder=\"YYYY-MM-DD\"\n          data-date-format=\"yyyy-mm-dd\"\n          pattern=\"^\\d{4}-\\d{2}-\\d{2}$\"\n          data-datepicker=\"from\"\n          value=\""
    + alias3(((helper = (helper = helpers.fromdate || (depth0 != null ? depth0.fromdate : depth0)) != null ? helper : alias2),(typeof helper === alias4 ? helper.call(alias1,{"name":"fromdate","hash":{},"data":data}) : helper)))
    + "\"\n          required\n        >\n      </div>\n      <div class=\"form-group\">\n        <label for=\"to\">"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"usage_history_to",{"name":"lit","hash":{},"data":data}))
    + "</label>\n        <input\n          class=\"form-control\"\n          name=\"to\"\n          type=\"text\"\n          placeholder=\"YYYY-MM-DD\"\n          data-date-format=\"yyyy-mm-dd\"\n          pattern=\"^\\d{4}-\\d{2}-\\d{2}$\"\n          data-datepicker=\"to\"\n           value=\""
    + alias3(((helper = (helper = helpers.todate || (depth0 != null ? depth0.todate : depth0)) != null ? helper : alias2),(typeof helper === alias4 ? helper.call(alias1,{"name":"todate","hash":{},"data":data}) : helper)))
    + "\"\n          required\n        >\n      </div>\n      <div class=\"form-group\">\n        <button class=\"btn\" type=\"submit\">\n          <div class=\"go\"></div>\n        </button>\n      </div>\n"
    + ((stack1 = helpers["if"].call(alias1,(depth0 != null ? depth0.downloadpdf : depth0),{"name":"if","hash":{},"fn":container.program(1, data, 0),"inverse":container.noop,"data":data})) != null ? stack1 : "")
    + "    </form>\n  </div>\n</div>\n<div class=\"col-sm-12 col-md-12 table-responsive\">\n  <table class=\"table\">\n    <thead>\n      <tr></tr>\n    </thead>\n    <tbody class=\"text-lowercase\"></tbody>\n  </table>\n</div>\n";
},"useData":true});

this["selfcare"]["templates"]["partials/image"] = Handlebars.template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var stack1, helper, alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing, alias3="function", alias4=container.escapeExpression;

  return "<i class=\"svg-canvas "
    + alias4(((helper = (helper = helpers.classes || (depth0 != null ? depth0.classes : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"classes","hash":{},"data":data}) : helper)))
    + "\">\n  <svg viewBox=\""
    + alias4(((helper = (helper = helpers.viewbox || (depth0 != null ? depth0.viewbox : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"viewbox","hash":{},"data":data}) : helper)))
    + "\" height=\""
    + alias4(((helper = (helper = helpers.height || (depth0 != null ? depth0.height : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"height","hash":{},"data":data}) : helper)))
    + "\" width=\""
    + alias4(((helper = (helper = helpers.width || (depth0 != null ? depth0.width : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"width","hash":{},"data":data}) : helper)))
    + "\">\n    <use xlink:href=\""
    + ((stack1 = ((helper = (helper = helpers.href || (depth0 != null ? depth0.href : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"href","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "\">\n    </use>\n  </svg>\n</i>\n";
},"useData":true});

this["selfcare"]["templates"]["partials/modal"] = Handlebars.template({"1":function(container,depth0,helpers,partials,data) {
    return "<button type=\"button\"\n        class=\"close\"\n        data-dismiss=\"modal\"\n        aria-label=\"Close\">\n          <span aria-hidden=\"true\">&times;</span>\n        </button>\n";
},"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var stack1, helper, alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing, alias3="function", alias4=container.escapeExpression;

  return "<div class=\"modal fade text-center\"\n     id=\""
    + alias4(((helper = (helper = helpers.modalid || (depth0 != null ? depth0.modalid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"modalid","hash":{},"data":data}) : helper)))
    + "\"\n     tabindex=\"-1\"\n     role=\"dialog\"\n     aria-labelledby=\"myModalLabel\">\n  <div class=\"modal-dialog\" role=\"document\">\n    <div class=\"modal-content\">\n      <div class=\"modal-header bg-pink-white\">\n        "
    + ((stack1 = helpers.unless.call(alias1,(depth0 != null ? depth0.noclosebtn : depth0),{"name":"unless","hash":{},"fn":container.program(1, data, 0),"inverse":container.noop,"data":data})) != null ? stack1 : "")
    + "        <h4 class=\"modal-title\">"
    + alias4(((helper = (helper = helpers.modaltitle || (depth0 != null ? depth0.modaltitle : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"modaltitle","hash":{},"data":data}) : helper)))
    + "</h4>\n      </div>\n      <div class=\"content inverse modal-body\">\n        <div class=\"row\">\n          <div class=\"col-xs-10 col-md-9 center-block\">\n            <h2>"
    + alias4(((helper = (helper = helpers.header || (depth0 != null ? depth0.header : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"header","hash":{},"data":data}) : helper)))
    + "</h2>\n            <p data-desc>"
    + ((stack1 = ((helper = (helper = helpers.description || (depth0 != null ? depth0.description : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"description","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "</p>\n            "
    + ((stack1 = ((helper = (helper = helpers.buttonduoPartial || (depth0 != null ? depth0.buttonduoPartial : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"buttonduoPartial","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "\n            "
    + ((stack1 = ((helper = (helper = helpers.buttonsinglePartial || (depth0 != null ? depth0.buttonsinglePartial : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"buttonsinglePartial","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "\n            "
    + ((stack1 = ((helper = (helper = helpers.blockForm || (depth0 != null ? depth0.blockForm : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"blockForm","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n";
},"useData":true});

this["selfcare"]["templates"]["partials/panelcollapsed"] = Handlebars.template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var stack1, helper, alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing, alias3="function", alias4=container.escapeExpression;

  return "<div class=\"panel panel-default\">\n  <div class=\"panel-heading text-center collapsed\"\n       data-toggle=\"collapse\"  data-target=\"#"
    + alias4(((helper = (helper = helpers.id || (depth0 != null ? depth0.id : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"id","hash":{},"data":data}) : helper)))
    + "\">\n    <h4 class=\"panel-title\">\n      "
    + alias4(((helper = (helper = helpers.title || (depth0 != null ? depth0.title : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"title","hash":{},"data":data}) : helper)))
    + "\n    </h4>\n    <div class=\"bubble-icon-container\">\n    </div>\n  </div>\n  <div id=\""
    + alias4(((helper = (helper = helpers.id || (depth0 != null ? depth0.id : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"id","hash":{},"data":data}) : helper)))
    + "\" class=\"panel-collapse collapse\">\n    <div class=\"panel-body\">\n      <h4>"
    + ((stack1 = ((helper = (helper = helpers.contentTitle || (depth0 != null ? depth0.contentTitle : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"contentTitle","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "</h4>\n      <p>\n        "
    + ((stack1 = ((helper = (helper = helpers.content || (depth0 != null ? depth0.content : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"content","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "\n      </p>\n      "
    + ((stack1 = ((helper = (helper = helpers.description || (depth0 != null ? depth0.description : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"description","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "\n      <div class=\"form-group\">\n        <button class=\"btn btn-block "
    + alias4(((helper = (helper = helpers.buttonclass || (depth0 != null ? depth0.buttonclass : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"buttonclass","hash":{},"data":data}) : helper)))
    + "\" data-bundleid=\""
    + alias4(((helper = (helper = helpers.bundleid || (depth0 != null ? depth0.bundleid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"bundleid","hash":{},"data":data}) : helper)))
    + "\" data-bundlename=\""
    + alias4(((helper = (helper = helpers.bundlename || (depth0 != null ? depth0.bundlename : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"bundlename","hash":{},"data":data}) : helper)))
    + "\" data-exp=\""
    + alias4(((helper = (helper = helpers.exp || (depth0 != null ? depth0.exp : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"exp","hash":{},"data":data}) : helper)))
    + "\" data-expunit=\""
    + alias4(((helper = (helper = helpers.expunit || (depth0 != null ? depth0.expunit : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"expunit","hash":{},"data":data}) : helper)))
    + "\" data-bundleprice=\""
    + alias4(((helper = (helper = helpers.bundleprice || (depth0 != null ? depth0.bundleprice : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"bundleprice","hash":{},"data":data}) : helper)))
    + "\" "
    + alias4(((helper = (helper = helpers.buttondata || (depth0 != null ? depth0.buttondata : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"buttondata","hash":{},"data":data}) : helper)))
    + ">\n          "
    + ((stack1 = ((helper = (helper = helpers.buttonValue || (depth0 != null ? depth0.buttonValue : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"buttonValue","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "\n        </button>\n      </div>\n    </div>\n  </div>\n</div>\n";
},"useData":true});

this["selfcare"]["templates"]["partials/shopcontent"] = Handlebars.template({"1":function(container,depth0,helpers,partials,data) {
    var helper;

  return "      <li>"
    + container.escapeExpression(((helper = (helper = helpers.content || (depth0 != null ? depth0.content : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === "function" ? helper.call(depth0 != null ? depth0 : {},{"name":"content","hash":{},"data":data}) : helper)))
    + "</li>\n";
},"3":function(container,depth0,helpers,partials,data) {
    var stack1, helper;

  return "    "
    + ((stack1 = ((helper = (helper = helpers.panel || (depth0 != null ? depth0.panel : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === "function" ? helper.call(depth0 != null ? depth0 : {},{"name":"panel","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "\n";
},"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var stack1, helper, alias1=depth0 != null ? depth0 : {};

  return "<div class=\"col-xs-12 col-sm-12 col-md-6 col-lg-push-6 col-md-push-6\">\n  <div class=\"list-header-title\">"
    + container.escapeExpression(((helper = (helper = helpers.packageListTitle || (depth0 != null ? depth0.packageListTitle : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === "function" ? helper.call(alias1,{"name":"packageListTitle","hash":{},"data":data}) : helper)))
    + "</div>\n  <ul class=\"list-unstyled panel-list\">\n"
    + ((stack1 = helpers.each.call(alias1,(depth0 != null ? depth0.packageList : depth0),{"name":"each","hash":{},"fn":container.program(1, data, 0),"inverse":container.noop,"data":data})) != null ? stack1 : "")
    + "  </ul>\n</div>\n\n<div class=\"col-xs-12 col-sm-12 col-md-6 col-lg-pull-6  col-md-pull-6\">\n"
    + ((stack1 = helpers.each.call(alias1,(depth0 != null ? depth0.panelcollapsedList : depth0),{"name":"each","hash":{},"fn":container.program(3, data, 0),"inverse":container.noop,"data":data})) != null ? stack1 : "")
    + "</div>\n";
},"useData":true});

this["selfcare"]["templates"]["partials/tabpanel"] = Handlebars.template({"1":function(container,depth0,helpers,partials,data) {
    var stack1, helper, alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing, alias3="function", alias4=container.escapeExpression;

  return "    <li class=\"pull-right "
    + ((stack1 = helpers["if"].call(alias1,(depth0 != null ? depth0.active : depth0),{"name":"if","hash":{},"fn":container.program(2, data, 0),"inverse":container.noop,"data":data})) != null ? stack1 : "")
    + "\">\n      <a data-toggle=\"tab\" href=#"
    + alias4(((helper = (helper = helpers.id || (depth0 != null ? depth0.id : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"id","hash":{},"data":data}) : helper)))
    + ">"
    + alias4(((helper = (helper = helpers.title || (depth0 != null ? depth0.title : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"title","hash":{},"data":data}) : helper)))
    + "</a>\n    </li>\n";
},"2":function(container,depth0,helpers,partials,data) {
    return "active";
},"4":function(container,depth0,helpers,partials,data) {
    var stack1, helper, alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing, alias3="function";

  return "    <div id="
    + container.escapeExpression(((helper = (helper = helpers.id || (depth0 != null ? depth0.id : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"id","hash":{},"data":data}) : helper)))
    + " class=\"tab-pane fade "
    + ((stack1 = helpers["if"].call(alias1,(depth0 != null ? depth0.active : depth0),{"name":"if","hash":{},"fn":container.program(5, data, 0),"inverse":container.noop,"data":data})) != null ? stack1 : "")
    + "\">\n      "
    + ((stack1 = ((helper = (helper = helpers.body || (depth0 != null ? depth0.body : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"body","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "\n    </div>\n";
},"5":function(container,depth0,helpers,partials,data) {
    return "active in";
},"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var stack1, alias1=depth0 != null ? depth0 : {};

  return "<ul class=\"nav nav-tabs\">\n"
    + ((stack1 = helpers.each.call(alias1,(depth0 != null ? depth0.tabs : depth0),{"name":"each","hash":{},"fn":container.program(1, data, 0),"inverse":container.noop,"data":data})) != null ? stack1 : "")
    + "</ul>\n\n<div class=\"tab-content\">\n"
    + ((stack1 = helpers.each.call(alias1,(depth0 != null ? depth0.tabs : depth0),{"name":"each","hash":{},"fn":container.program(4, data, 0),"inverse":container.noop,"data":data})) != null ? stack1 : "")
    + "</div>\n";
},"useData":true});

this["selfcare"]["templates"]["partials/transferhistory"] = Handlebars.template({"1":function(container,depth0,helpers,partials,data) {
    return "        "
    + container.escapeExpression((helpers.lit || (depth0 && depth0.lit) || helpers.helperMissing).call(depth0 != null ? depth0 : {},"transfer_data_title",{"name":"lit","hash":{},"data":data}))
    + "\n";
},"3":function(container,depth0,helpers,partials,data) {
    return "        "
    + container.escapeExpression((helpers.lit || (depth0 && depth0.lit) || helpers.helperMissing).call(depth0 != null ? depth0 : {},"transfer_history_title",{"name":"lit","hash":{},"data":data}))
    + "\n";
},"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var stack1, alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing, alias3=container.escapeExpression;

  return "<div class=\"content center-block text-center\">\n  <div class=\"col-xs-10 col-sm-8 col-md-8 center-block\">\n    <h2 class=\"text-left\">\n"
    + ((stack1 = (helpers.compare || (depth0 && depth0.compare) || alias2).call(alias1,(depth0 != null ? depth0.type : depth0),"==","data",{"name":"compare","hash":{},"fn":container.program(1, data, 0),"inverse":container.program(3, data, 0),"data":data})) != null ? stack1 : "")
    + "    </h2>\n    <div class=\"row\">\n      <div class=\"col-md-8\">\n        <p class=\"text-left text-grey\">"
    + ((stack1 = (helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"transfer_history_desc",{"name":"lit","hash":{},"data":data})) != null ? stack1 : "")
    + "</p>\n      </div>\n    </div>\n    <div class=\"blue-border-container\">\n      <table class=\"table\">\n        <thead class=\" text-grey font-bold\">\n          <tr>\n            <th>"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"transfer_history_date",{"name":"lit","hash":{},"data":data}))
    + "</th>\n            <th class=\"text-center\">"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"transfer_history_to",{"name":"lit","hash":{},"data":data}))
    + "</th>\n            <th class=\"text-right\">"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"transfer_history_amount",{"name":"lit","hash":{},"data":data}))
    + "</th>\n          </tr>\n        </thead><!---->\n        <tbody class=\"text-grey\" data-transfer-history></tbody>\n      </table>\n    </div>\n  </div>\n</div>\n";
},"useData":true});

this["selfcare"]["templates"]["partials/transferhistory_item"] = Handlebars.template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var helper, alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing, alias3="function", alias4=container.escapeExpression;

  return "<tr>\n  <td>"
    + alias4(((helper = (helper = helpers.date || (depth0 != null ? depth0.date : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"date","hash":{},"data":data}) : helper)))
    + "</td>\n  <td class=\"text-center\">"
    + alias4(((helper = (helper = helpers.number || (depth0 != null ? depth0.number : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"number","hash":{},"data":data}) : helper)))
    + "</td>\n  <td class=\"text-right font-bold\">"
    + alias4(((helper = (helper = helpers.amount || (depth0 != null ? depth0.amount : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"amount","hash":{},"data":data}) : helper)))
    + "</td>\n</tr>\n";
},"useData":true});

this["selfcare"]["templates"]["partials/transferpage"] = Handlebars.template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var stack1, helper, alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing, alias3="function", alias4=container.escapeExpression;

  return "<div class=\"row transfer\">\n  <div class=\"jumbotron inverse\">\n    <div class=\"col-xs-10 col-sm-8 col-md-8 center-block\">\n      <div class=\"row\">\n        <div class=\"col-xs-12 col-sm-12 col-md-6 text-center\">\n          <div>"
    + alias4(((helper = (helper = helpers.image || (depth0 != null ? depth0.image : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"image","hash":{},"data":data}) : helper)))
    + "</div>\n          <h4>"
    + alias4(((helper = (helper = helpers.title || (depth0 != null ? depth0.title : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"title","hash":{},"data":data}) : helper)))
    + "</h4>\n          <h2>"
    + alias4(((helper = (helper = helpers.amount || (depth0 != null ? depth0.amount : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"amount","hash":{},"data":data}) : helper)))
    + "</h2>\n          <p class=\"text-grey\">"
    + alias4(((helper = (helper = helpers.description || (depth0 != null ? depth0.description : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"description","hash":{},"data":data}) : helper)))
    + "</p>\n        </div>\n        <div class=\"col-xs-12 col-sm-12 col-md-6\">\n          <h2>"
    + alias4(((helper = (helper = helpers.titleright || (depth0 != null ? depth0.titleright : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"titleright","hash":{},"data":data}) : helper)))
    + "</h2>\n          <p>"
    + alias4(((helper = (helper = helpers.descriptionlong || (depth0 != null ? depth0.descriptionlong : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"descriptionlong","hash":{},"data":data}) : helper)))
    + "</p>\n          "
    + ((stack1 = ((helper = (helper = helpers.transferForm || (depth0 != null ? depth0.transferForm : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"transferForm","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "\n        </div>\n      </div>\n    </div>\n  </div>\n  "
    + ((stack1 = ((helper = (helper = helpers.transferhistoryForm || (depth0 != null ? depth0.transferhistoryForm : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"transferhistoryForm","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "\n</div>\n";
},"useData":true});

this["selfcare"]["templates"]["register"] = Handlebars.template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var stack1, helper, alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing, alias3="function", alias4=container.escapeExpression;

  return "<div class=\"row register\">\n  <div class=\"jumbotron\">\n    <div class=\"col-xs-10 col-sm-8 center-block\">\n      <div class=\"row\">\n        <div class=\"col-xs-12 col-md-6 text-center\">\n          <div class=\"jumbo-img\"><!-- "
    + ((stack1 = ((helper = (helper = helpers.image || (depth0 != null ? depth0.image : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"image","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + " -->\n          </div>\n        </div>\n        <div class=\"col-xs-12 col-md-6\">\n          <h1>"
    + alias4((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"activation_title",{"name":"lit","hash":{},"data":data}))
    + "</h1>\n          <p>"
    + ((stack1 = (helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"activation_desc",{"name":"lit","hash":{},"data":data})) != null ? stack1 : "")
    + "</span></p>\n          "
    + ((stack1 = ((helper = (helper = helpers.registerForm || (depth0 != null ? depth0.registerForm : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"registerForm","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "\n          <div data-verify style=\"display: none;\">\n          <p>"
    + alias4((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"activation_otpdesc",{"name":"lit","hash":{},"data":data}))
    + "</p>\n          "
    + ((stack1 = ((helper = (helper = helpers.verifyForm || (depth0 != null ? depth0.verifyForm : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"verifyForm","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "\n          </div>\n        </div>\n      </div>\n    </div>\n    <br><br><br>\n  </div>\n</div>\n";
},"useData":true});

this["selfcare"]["templates"]["resetpassword"] = Handlebars.template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var stack1, helper, alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing, alias3="function";

  return "<div class=\"row resetpassword\">\n  <div class=\"jumbotron inverse\">\n    <div class=\"col-xs-10 col-sm-8 col-md-8 center-block\">\n      <div class=\"row\">\n        <div class=\"col-xs-12 col-sm-12 col-md-6\">\n          <div class=\"jumbo-img\"><!-- "
    + ((stack1 = ((helper = (helper = helpers.image || (depth0 != null ? depth0.image : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"image","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + " --></div>\n        </div>\n        <div class=\"col-xs-12 col-sm-12 col-md-6\">\n          <h2>"
    + container.escapeExpression((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"reset_title",{"name":"lit","hash":{},"data":data}))
    + "</h2>\n          <p>"
    + ((stack1 = (helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"resetpw_desc",{"name":"lit","hash":{},"data":data})) != null ? stack1 : "")
    + "\n          </p>\n          "
    + ((stack1 = ((helper = (helper = helpers.resetpasswordForm || (depth0 != null ? depth0.resetpasswordForm : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"resetpasswordForm","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n";
},"useData":true});

this["selfcare"]["templates"]["security"] = Handlebars.template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var stack1, helper, alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing, alias3=container.escapeExpression, alias4="function", alias5=container.lambda;

  return "<div class=\"row security\">\n  <div class=\"text-center\">\n    <div class=\"\">\n      <h1>"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"activation_security",{"name":"lit","hash":{},"data":data}))
    + "</h1>\n      <p class=\"text-grey\">"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"activation_securitydesc",{"name":"lit","hash":{},"data":data}))
    + "</p>\n    </div>\n    <div class=\"content inverse\">\n      <div class=\" col-xs-12 col-sm-8 col-md-8 col-lg-6 center-block\">\n        <table class=\"table nav nav-tabs\" role=\"tablist\">\n          <tr>\n            <td class=\"pw "
    + alias3(((helper = (helper = helpers.pwclass || (depth0 != null ? depth0.pwclass : depth0)) != null ? helper : alias2),(typeof helper === alias4 ? helper.call(alias1,{"name":"pwclass","hash":{},"data":data}) : helper)))
    + "\" width=\"50%\">\n              <a\n                href=\"#password-method\"\n                aria-controls=\"password-method\"\n                role=\"tab\" data-toggle=\"tab\"\n              >\n                <div class=\"row\">\n                  <div class=\"col-xs-12 col-sm-10 col-md-10 col-lg-8 center-block\">\n                    <h4 class=\"font-bold uppercase grey-lightest text-center\">\n                    "
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"activation_pwmethod",{"name":"lit","hash":{},"data":data}))
    + "</h4>\n                    <div class=\"jumbo-img\"><!--"
    + ((stack1 = ((helper = (helper = helpers.image1 || (depth0 != null ? depth0.image1 : depth0)) != null ? helper : alias2),(typeof helper === alias4 ? helper.call(alias1,{"name":"image1","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "--></div>\n                    <p class=\"grey-lightest text-center\">\n                      "
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"activation_pwmethoddesc",{"name":"lit","hash":{},"data":data}))
    + "</p>\n                  </div>\n                </div>\n              </a>\n            </td>\n            <td class=\"fb "
    + alias3(((helper = (helper = helpers.fbclass || (depth0 != null ? depth0.fbclass : depth0)) != null ? helper : alias2),(typeof helper === alias4 ? helper.call(alias1,{"name":"fbclass","hash":{},"data":data}) : helper)))
    + "\" width=\"50%\">\n              <a\n                href=\"#facebook-method\"\n                aria-controls=\"facebook-method\"\n                role=\"tab\"\n                data-toggle=\"tab\"\n              >\n                <div class=\"row\">\n                  <div class=\"col-xs-12 col-sm-10 col-md-10 col-lg-8 center-block\">\n                    <h4 class=\"font-bold uppercase grey-lightest text-center\">\n                    "
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"activation_fbmethod",{"name":"lit","hash":{},"data":data}))
    + "</h4>\n                    <div class=\"jumbo-img\"><!--"
    + ((stack1 = ((helper = (helper = helpers.image2 || (depth0 != null ? depth0.image2 : depth0)) != null ? helper : alias2),(typeof helper === alias4 ? helper.call(alias1,{"name":"image2","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "--></div>\n                    <p class=\"grey-lightest text-center\">\n                    "
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"activation_fbmethoddesc",{"name":"lit","hash":{},"data":data}))
    + "</p>\n                  </div>\n                </div>\n              </a>\n            </td>\n          </tr>\n        </table>\n<!--         <ul class=\"nav nav-tabs row\" role=\"tablist\">\n          <li role=\"presentation\" class=\"col-sm-6 col-xs-6 pw active\">\n            <a\n              href=\"#password-method\"\n              aria-controls=\"password-method\"\n              role=\"tab\" data-toggle=\"tab\"\n            >\n              <div class=\"row\">\n                <div class=\"col-xs-12 col-sm-10 col-md-10 col-lg-8 center-block\">\n                  <h4 class=\"font-bold uppercase grey-lightest text-center\">\n                  "
    + alias3(alias5(((stack1 = (depth0 != null ? depth0.lit : depth0)) != null ? stack1.activation_pwmethod : stack1), depth0))
    + "</h4>\n                  "
    + ((stack1 = ((helper = (helper = helpers.image1 || (depth0 != null ? depth0.image1 : depth0)) != null ? helper : alias2),(typeof helper === alias4 ? helper.call(alias1,{"name":"image1","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "\n                  <p class=\"grey-lightest text-center\">\n                    "
    + alias3(alias5(((stack1 = (depth0 != null ? depth0.lit : depth0)) != null ? stack1.activation_pwmethoddesc : stack1), depth0))
    + "</p>\n                </div>\n              </div>\n            </a>\n          </li>\n          <li role=\"presentation\" class=\"col-sm-6 col-xs-6 fb\">\n            <a\n              href=\"#facebook-method\"\n              aria-controls=\"facebook-method\"\n              role=\"tab\"\n              data-toggle=\"tab\"\n            >\n              <div class=\"row\">\n                <div class=\"col-xs-12 col-sm-10 col-md-10 col-lg-8 center-block\">\n                  <h4 class=\"font-bold uppercase grey-lightest text-center\">\n                  "
    + alias3(alias5(((stack1 = (depth0 != null ? depth0.lit : depth0)) != null ? stack1.activation_fbmethod : stack1), depth0))
    + "</h4>\n                  "
    + ((stack1 = ((helper = (helper = helpers.image2 || (depth0 != null ? depth0.image2 : depth0)) != null ? helper : alias2),(typeof helper === alias4 ? helper.call(alias1,{"name":"image2","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "\n                  <p class=\"grey-lightest text-center\">\n                  "
    + alias3(alias5(((stack1 = (depth0 != null ? depth0.lit : depth0)) != null ? stack1.activation_fbmethoddesc : stack1), depth0))
    + "</p>\n                </div>\n              </div>\n            </a>\n          </li>\n        </ul> -->\n      </div>\n    </div>\n    <div class=\"tab-content bg-grey content\">\n      <div role=\"tabpanel\"\n           class=\"tab-pane clearfix "
    + alias3(((helper = (helper = helpers.pwclass || (depth0 != null ? depth0.pwclass : depth0)) != null ? helper : alias2),(typeof helper === alias4 ? helper.call(alias1,{"name":"pwclass","hash":{},"data":data}) : helper)))
    + "\"\n           id=\"password-method\">\n        <div class=\"col-xs-10 col-sm-8 col-md-4 center-block\">\n          "
    + ((stack1 = ((helper = (helper = helpers.usecredentialsForm || (depth0 != null ? depth0.usecredentialsForm : depth0)) != null ? helper : alias2),(typeof helper === alias4 ? helper.call(alias1,{"name":"usecredentialsForm","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "\n        </div>\n      </div>\n      <div role=\"tabpanel\" class=\"tab-pane clearfix "
    + alias3(((helper = (helper = helpers.fbclass || (depth0 != null ? depth0.fbclass : depth0)) != null ? helper : alias2),(typeof helper === alias4 ? helper.call(alias1,{"name":"fbclass","hash":{},"data":data}) : helper)))
    + "\" id=\"facebook-method\">\n        <div class=\"col-xs-10 col-sm-8 col-md-6 col-lg-4 center-block\">\n          <p class=\"text-center\">"
    + ((stack1 = (helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"activation_fbmethoddesc_long",{"name":"lit","hash":{},"data":data})) != null ? stack1 : "")
    + "\n          </p>\n          "
    + ((stack1 = ((helper = (helper = helpers.usefacebookForm || (depth0 != null ? depth0.usefacebookForm : depth0)) != null ? helper : alias2),(typeof helper === alias4 ? helper.call(alias1,{"name":"usefacebookForm","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n";
},"useData":true});

this["selfcare"]["templates"]["shopbundles"] = Handlebars.template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var stack1, helper, alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing, alias3="function", alias4=container.escapeExpression;

  return "<div class=\"row shop datapacks\">\n  <div class=\"jumbotron "
    + alias4(((helper = (helper = helpers.cclass || (depth0 != null ? depth0.cclass : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"cclass","hash":{},"data":data}) : helper)))
    + "\">\n    <div class=\"col-xs-10 col-sm-6 col-md-6 center-block text-center\">\n      <h1>"
    + ((stack1 = ((helper = (helper = helpers.title || (depth0 != null ? depth0.title : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"title","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "</h1>\n      <p data-fallback=\""
    + ((stack1 = ((helper = (helper = helpers.fallback || (depth0 != null ? depth0.fallback : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"fallback","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "\">\n        "
    + ((stack1 = ((helper = (helper = helpers.description || (depth0 != null ? depth0.description : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"description","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "\n      </p>\n    </div>\n\n    <div class=\"col-xs-10 col-sm-8 col-md-6 center-block tintin-tab-control\" data-bundles=\""
    + alias4(((helper = (helper = helpers.bundlegroupcode || (depth0 != null ? depth0.bundlegroupcode : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"bundlegroupcode","hash":{},"data":data}) : helper)))
    + "\">\n\n    </div>\n  </div>\n\n</div>\n"
    + ((stack1 = ((helper = (helper = helpers.modalTicket || (depth0 != null ? depth0.modalTicket : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"modalTicket","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "\n"
    + ((stack1 = ((helper = (helper = helpers.modalConfirm || (depth0 != null ? depth0.modalConfirm : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"modalConfirm","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "\n"
    + ((stack1 = ((helper = (helper = helpers.modalConfirmation || (depth0 != null ? depth0.modalConfirmation : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"modalConfirmation","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "\n";
},"useData":true});

this["selfcare"]["templates"]["simmanagement"] = Handlebars.template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var stack1, helper, alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing, alias3="function", alias4=container.escapeExpression;

  return "<div class=\"simmanagement\">\n  <div class=\"row\">\n    <div class=\"col-xs-10 col-sm-8 center-block\">\n      <div class=\"row top-section\">\n        <div class=\"col-xs-12 col-md-6 text-center\">\n          <div class=\"jumbo-img\"><!-- "
    + ((stack1 = ((helper = (helper = helpers.image || (depth0 != null ? depth0.image : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"image","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + " --></div>\n        </div>\n        <div class=\"col-xs-12 col-md-6 right-section\">\n          <h2>"
    + alias4((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"management_title",{"name":"lit","hash":{},"data":data}))
    + "</h2>\n          <p class=\" text-grey main-description\">\n            "
    + alias4((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"management_desc",{"name":"lit","hash":{},"data":data}))
    + "<span class=\"pink font-bold\">\n            "
    + alias4(((helper = (helper = helpers.number || (depth0 != null ? depth0.number : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"number","hash":{},"data":data}) : helper)))
    + "</span>\n          </p>\n        </div>\n      </div>\n\n      <div class=\"row\">\n\n      <!-- LEFT -->\n        <div class=\"col-xs-12 col-md-6 left-section\">\n          <div class=\"modalpaygoHolder\"></div>\n          <div class=\"modalblockHolder\"></div>\n          <div class=\"modalblockedHolder\"></div>\n          <div class=\"replace-modal\">"
    + ((stack1 = ((helper = (helper = helpers.modalReplace || (depth0 != null ? depth0.modalReplace : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"modalReplace","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "</div>\n          <div class=\"reorder-modal\">"
    + ((stack1 = ((helper = (helper = helpers.modalReorder || (depth0 != null ? depth0.modalReorder : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"modalReorder","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "</div>\n          <div class=\"reorderblock-modal\">"
    + ((stack1 = ((helper = (helper = helpers.modalReorderblock || (depth0 != null ? depth0.modalReorderblock : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"modalReorderblock","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "</div>\n          <table class=\"table table-condensed\">\n            <tbody>\n              <tr>\n                <th>\n                  <a data-changesimstate data-simstatetitle href=\"#\">\n                  "
    + ((stack1 = ((helper = (helper = helpers.management_blocktitle || (depth0 != null ? depth0.management_blocktitle : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"management_blocktitle","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "</a>\n                </th>\n              </tr>\n            </tbody>\n            <tbody>\n              <tr>\n                <td data-simstatedesc>\n                  "
    + ((stack1 = ((helper = (helper = helpers.management_blockdesc || (depth0 != null ? depth0.management_blockdesc : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"management_blockdesc","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "\n                </td>\n              </tr>\n            </tbody>\n            <tbody>\n              <tr>\n                <th>\n                  <form\n                    data-simrepl-form\n                    action=\"https://www.skitto.com/sim-replacement\"\n                    method=\"POST\"\n                    style=\"display: none\"\n                  >\n                    <input type=\"hidden\" name=\"access_token\" value=\"\">\n                  </form>\n                  <a data-simrepl-link href=\"#\">\n                  "
    + alias4((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"management_reordertitle",{"name":"lit","hash":{},"data":data}))
    + "</a>\n                </th>\n              </tr>\n            </tbody>\n            <tbody>\n              <tr>\n                <td>\n                  "
    + alias4((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"management_reorderdesc",{"name":"lit","hash":{},"data":data}))
    + "\n                </td>\n              </tr>\n            </tbody>\n            <tbody>\n              <tr>\n                <th>\n                  <a data-logoutfromdevices href=\"#\">\n                  "
    + alias4((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"management_logoutfromdevicestitle",{"name":"lit","hash":{},"data":data}))
    + "</a>\n                </th>\n              </tr>\n            </tbody>\n            <tbody>\n              <tr>\n                <td>\n                  "
    + alias4((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"management_logoutfromdevicesdesc",{"name":"lit","hash":{},"data":data}))
    + "\n                </td>\n              </tr>\n            </tbody>\n            <tbody>\n              <tr>\n                <th>\n                  <a class=\"fb-blue\" href=\""
    + alias4(((helper = (helper = helpers.securityhref || (depth0 != null ? depth0.securityhref : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"securityhref","hash":{},"data":data}) : helper)))
    + "\">\n                  "
    + alias4(((helper = (helper = helpers.securityname || (depth0 != null ? depth0.securityname : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"securityname","hash":{},"data":data}) : helper)))
    + "</a>\n                </th>\n              </tr>\n            </tbody>\n            <tbody>\n              <tr>\n                <td>\n                  "
    + alias4(((helper = (helper = helpers.securitydesc || (depth0 != null ? depth0.securitydesc : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"securitydesc","hash":{},"data":data}) : helper)))
    + "\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n        <!-- /LEFT -->\n\n        <!-- <span class=\"vertical-divider hidden-xs hidden-sm\"></span> -->\n\n        <!-- RIGHT -->\n        <div class=\"col-xs-12 col-md-6 right-section\">\n          <!-- <div class=\"horizontal-divider visible-xs visible-sm\"></div> -->\n\n          <table class=\"table table-condensed\">\n            <thead>\n              <tr>\n                <th class=\"violet\" colspan=\"2\">\n                  "
    + alias4((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"management_controltitle",{"name":"lit","hash":{},"data":data}))
    + "\n                </th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr>\n                <td valign=\"middle\">\n                  <span class=\"text-description\">"
    + alias4((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"management_controldesc1",{"name":"lit","hash":{},"data":data}))
    + "</span>\n                </td>\n                <td width=\"105\">\n                  <div class=\"switch-control\">\n                    <span class=\"status js-check-change-field\">\n                    "
    + alias4((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"management_on",{"name":"lit","hash":{},"data":data}))
    + "</span>\n                    <input type=\"checkbox\" class=\"js-switch js-check-change-01\" data-key=\"crce.accounts.crce.taka.10.remaining\" data-notification data-channel=\"\" data-setchannel=\"\" />\n                  </div>\n                </td>\n              </tr>\n              <tr>\n                <td>\n                  <span class=\"text-description\">\n                   "
    + alias4((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"management_controldesc4",{"name":"lit","hash":{},"data":data}))
    + "\n                  </span>\n                </td>\n                <td>\n                  <div class=\"switch-control\">\n                    <span class=\"status js-check-change-field\">\n                    "
    + alias4((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"management_off",{"name":"lit","hash":{},"data":data}))
    + "</span>\n                    <input type=\"checkbox\" class=\"js-switch js-check-change-02\" data-key=\"crce.endOfCall.1.currencies\" data-notification data-channel=\"\" data-setchannel=\"\" />\n                  </div>\n                </td>\n              </tr>\n              <tr>\n                <td>\n                  <span class=\"text-description\">\n                    "
    + alias4((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"management_controldesc3",{"name":"lit","hash":{},"data":data}))
    + "\n                  </span>\n                </td>\n                <td>\n                  <div class=\"switch-control\">\n                    <span class=\"status js-check-change-field\">\n                    "
    + alias4((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"management_on",{"name":"lit","hash":{},"data":data}))
    + "</span>\n                    <input type=\"checkbox\" class=\"js-switch js-check-change-03\" data-key=\"vms.vmsg.missed.call\" data-notification data-channel=\"\" data-setchannel=\"\" />\n                  </div>\n                </td>\n              </tr>\n              <tr>\n                <td>\n                  <span class=\"text-description\">\n                    "
    + alias4((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"management_notification_language",{"name":"lit","hash":{},"data":data}))
    + "\n                  </span>\n                </td>\n                <td>\n                  <div class=\"switch-control violet\">\n                    <span class=\"status js-check-change-field\">\n                    </span>\n                    <input type=\"checkbox\" class=\"js-switch js-check-change-01\" data-notificationlanguage-switch />\n                  </div>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n          <!-- pay as you go -->\n          <table class=\"table table-condensed\">\n            <thead>\n              <tr>\n                <th class=\"pink\" colspan=\"2\">\n                  "
    + alias4((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"management_payasyougo_title",{"name":"lit","hash":{},"data":data}))
    + "\n                </th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr>\n                <td valign=\"middle\">\n                  <span class=\"text-description\">"
    + alias4((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"management_payasyougo_desc1",{"name":"lit","hash":{},"data":data}))
    + "</span>\n                </td>\n                <td width=\"105\">\n                  <div class=\"switch-control\">\n                    <span class=\"status js-check-change-field\">\n                    "
    + alias4((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"management_on",{"name":"lit","hash":{},"data":data}))
    + "</span>\n                    <input type=\"checkbox\" class=\"js-switch js-check-change-01\" data-payasyougo-switch />\n                  </div>\n                </td>\n              </tr>\n              <tr data-payasyougo-controls class=\"hidden\">\n                <td>\n                  <span class=\"text-description\">\n                   "
    + alias4((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"management_payasyougo_desc2",{"name":"lit","hash":{},"data":data}))
    + "\n                  </span>\n                </td>\n                <td class=\"col-md-6\" style=\"width:105px;\">\n                      <button type=\"button\" data-payasyougo-dec></button>\n                      <div  data-payasyougo-limit>"
    + alias4((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"payasyougo_default",{"name":"lit","hash":{},"data":data}))
    + "</div>\n                      <button type=\"button\" data-payasyougo-inc></button>\n                </td>\n              </tr>\n              <tr data-payasyougo-controls class=\"hidden\">\n                <td colspan=\"2\">\n                  <button class=\"form-control\" type=\"button\" style=\"width:105px;margin:auto;\" data-payasyougo-save>\n                    Apply\n                  </button>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n        <!-- /RIGHT -->\n      </div>\n    </div>\n  </div>\n";
},"useData":true});

this["selfcare"]["templates"]["smsbundle"] = Handlebars.template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var stack1, helper, alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing, alias3="function";

  return "<div class=\"row shop datapacks\">\n  <div class=\"jumbotron inverse\">\n    <div class=\"col-xs-10 col-sm-6 col-md-6 center-block text-center\">\n      <h1>"
    + ((stack1 = ((helper = (helper = helpers.title || (depth0 != null ? depth0.title : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"title","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "</h1>\n      <p>\n        "
    + ((stack1 = ((helper = (helper = helpers.description || (depth0 != null ? depth0.description : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"description","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "\n      </p>\n    </div>\n\n    <div class=\"col-xs-10 col-sm-8 col-md-6 center-block tintin-tab-control\">\n      "
    + ((stack1 = ((helper = (helper = helpers.tabPanel || (depth0 != null ? depth0.tabPanel : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"tabPanel","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "\n    </div>\n  </div>\n\n</div>\n"
    + ((stack1 = ((helper = (helper = helpers.modalTicket || (depth0 != null ? depth0.modalTicket : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"modalTicket","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "\n";
},"useData":true});

this["selfcare"]["templates"]["termsofservice"] = Handlebars.template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing, alias3=container.escapeExpression;

  return "<div class=\"row\">\n  <div class=\"col-sm-6 col-md-6 center-block text-center\">\n    <h1>"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"termsofservice_title",{"name":"lit","hash":{},"data":data}))
    + "</h1>\n    <p>\n      "
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"termsofservice_description",{"name":"lit","hash":{},"data":data}))
    + "\n    </p>\n  </div>\n</div>\n\n";
},"useData":true});

this["selfcare"]["templates"]["topup"] = Handlebars.template({"1":function(container,depth0,helpers,partials,data) {
    var helper, alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing, alias3=container.escapeExpression;

  return "          <div>\n            <h4>"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"transfer_balance_title",{"name":"lit","hash":{},"data":data}))
    + "</h4>\n            <h2>"
    + alias3(((helper = (helper = helpers.balance || (depth0 != null ? depth0.balance : depth0)) != null ? helper : alias2),(typeof helper === "function" ? helper.call(alias1,{"name":"balance","hash":{},"data":data}) : helper)))
    + " tk</h2>\n          </div>\n";
},"3":function(container,depth0,helpers,partials,data) {
    return "           <div>\n           </div>\n";
},"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var stack1, helper, alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing, alias3="function";

  return "<div class=\"row topup\">\n  <div class=\"jumbotron inverse\">\n    <div class=\"col-xs-10 col-sm-8 center-block\">\n      <div class=\"row\">\n        <div class=\"col-xs-12 col-md-6 text-center\">\n          <div class=\"jumbo-img\"><!-- "
    + ((stack1 = ((helper = (helper = helpers.image || (depth0 != null ? depth0.image : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"image","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + " --></div>\n"
    + ((stack1 = helpers["if"].call(alias1,(depth0 != null ? depth0.loggedin : depth0),{"name":"if","hash":{},"fn":container.program(1, data, 0),"inverse":container.program(3, data, 0),"data":data})) != null ? stack1 : "")
    + "        </div>\n        <div class=\"common-modal\"></div>\n        <div class=\"col-xs-12 col-md-6\">\n          <h2>"
    + container.escapeExpression((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"topup_title",{"name":"lit","hash":{},"data":data}))
    + "</h2>\n          <p>"
    + ((stack1 = (helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"topup_desc",{"name":"lit","hash":{},"data":data})) != null ? stack1 : "")
    + ((stack1 = ((helper = (helper = helpers.getEmergencyLoan || (depth0 != null ? depth0.getEmergencyLoan : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"getEmergencyLoan","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "\n          </p>\n          "
    + ((stack1 = ((helper = (helper = helpers.topupForm || (depth0 != null ? depth0.topupForm : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"topupForm","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n";
},"useData":true});

this["selfcare"]["templates"]["transfer"] = Handlebars.template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var stack1, helper, alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing, alias3="function", alias4=container.escapeExpression;

  return "<div class=\"row transfer "
    + alias4(((helper = (helper = helpers["class"] || (depth0 != null ? depth0["class"] : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"class","hash":{},"data":data}) : helper)))
    + "\">\n  <div class=\"jumbotron bg-grey\">\n    <div class=\"col-xs-10 col-sm-8 col-md-8 center-block\">\n      <div class=\"row\">\n        <div class=\"col-xs-12 col-sm-12 col-md-6 text-center\">\n          <div class=\"jumbo-img\"><!-- "
    + ((stack1 = ((helper = (helper = helpers.image || (depth0 != null ? depth0.image : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"image","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + " --></div>\n          <h4 class=\"colored\">"
    + alias4(((helper = (helper = helpers.title || (depth0 != null ? depth0.title : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"title","hash":{},"data":data}) : helper)))
    + "</h4>\n          <h2 class=\"colored\" data-balance></h2>\n          <!-- p class=\"text-grey\">"
    + alias4(((helper = (helper = helpers.description || (depth0 != null ? depth0.description : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"description","hash":{},"data":data}) : helper)))
    + "</p -->\n        </div>\n        <div class=\"col-xs-12 col-sm-12 col-md-6\">\n          <h2 class=\"colored\">"
    + alias4(((helper = (helper = helpers.titleright || (depth0 != null ? depth0.titleright : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"titleright","hash":{},"data":data}) : helper)))
    + "</h2>\n          <p class=\"text-grey\">"
    + ((stack1 = ((helper = (helper = helpers.descriptionlong || (depth0 != null ? depth0.descriptionlong : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"descriptionlong","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "</p>\n          "
    + ((stack1 = ((helper = (helper = helpers.transferForm || (depth0 != null ? depth0.transferForm : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"transferForm","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "\n        </div>\n      </div>\n    </div>\n  </div>\n  "
    + ((stack1 = ((helper = (helper = helpers.transferhistory || (depth0 != null ? depth0.transferhistory : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{"name":"transferhistory","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "\n</div>\n";
},"useData":true});

this["selfcare"]["templates"]["usagehistory"] = Handlebars.template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var stack1, helper, alias1=depth0 != null ? depth0 : {}, alias2=helpers.helperMissing, alias3=container.escapeExpression;

  return "<div class=\"usagehistory\">\n  <div class=\"row bg-grey\">\n\n    <div class=\"col-xs-10 col-sm-8 center-block\">\n      <div class=\"row\">\n        <div class=\"col-xs-12 col-md-6 text-center\">\n          <div class=\"jumbo-img\"><!--"
    + ((stack1 = ((helper = (helper = helpers.image || (depth0 != null ? depth0.image : depth0)) != null ? helper : alias2),(typeof helper === "function" ? helper.call(alias1,{"name":"image","hash":{},"data":data}) : helper))) != null ? stack1 : "")
    + "--></div>\n        </div>\n        <div class=\"col-xs-12 col-md-6\">\n          <h2>"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"usage_history_title",{"name":"lit","hash":{},"data":data}))
    + "</h2>\n          <p class=\"text-grey\">\n            "
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"usage_history_desc",{"name":"lit","hash":{},"data":data}))
    + "\n          </p>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"col-xs-10 col-sm-8 center-block tintin-tab-control\">\n\n      <ul class=\"nav nav-tabs\">\n        <li class=\"active pull-right\">\n          <a data-toggle=\"tab\" href=\"#general\">"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"usage_history_general",{"name":"lit","hash":{},"data":data}))
    + "</a>\n        </li>\n        <li class=\"pull-right\">\n          <a data-toggle=\"tab\" href=\"#topup\">"
    + alias3((helpers.lit || (depth0 && depth0.lit) || alias2).call(alias1,"usage_history_topup",{"name":"lit","hash":{},"data":data}))
    + "</a>\n        </li>\n      </ul>\n\n      <div class=\"tab-content\">\n        <div id=\"general\" class=\"tab-pane fade in active\">\n          <div class=\"row\" data-history='{\n            \"category\": \"admin\",\n            \"columns\": [\"timestamp\", \"action\", \"detail\", \"charge\"]\n          }'></div>\n        </div>\n        <div id=\"topup\" class=\"tab-pane fade\">\n          <div class=\"row\" data-history='{\n            \"category\": \"topup\",\n            \"columns\": [\"timestamp\", \"action\", \"charge\"]\n          }'></div>\n        </div>\n      </div>\n    </div>\n\n  </div>\n</div>\n";
},"useData":true});;
E42Handler.onPage('/sitemap/tintin/termsofservice', function (url) {

  $(".main").html(selfcare.templates['termsofservice']({
    lit: window.lit
  }));
});
;
E42Handler.onPage('/sitemap/tintin/reload-your-account', function(url) {
  var getEmergencyLoan = '';
  var username = '';
  var useremail = '';
  $('.main').loading('.main','text-center center-block');
  function xhr() {
    var deferred = $.Deferred();

    var args = Array.prototype.slice.call(arguments);

    args.push(function(err, data) {
      if (err) {
        return deferred.reject(err);
      }

      return deferred.resolve(data);
    });

    sc.xhr.apply(sc, args);

    return deferred.promise();
  }

  function buildpage(opts){
        $('.main').html(selfcare.templates['topup']({
      lit: window.lit,
      balance: opts.balance,
      loggedin: opts.loggedin,
      // image: selfcare.templates['partials/image']({
      //   href: '#svg-happy-topup',
      //   viewbox: "0 0 250.52 222.96",
      //   height: "221.59",
      //   width: "249px",
      //   classes: "firstsvg"
      // }),
      getEmergencyLoan: opts.getEmergencyLoan,
      topupForm: selfcare.templates['forms/topup']({
        lit: window.lit,
        username: opts.username,
        useremail: opts.useremail,
        image: selfcare.templates['partials/image']({
        href: '#svg-more',
        viewbox: "0 0 26 26",
        classes: "circlesign"
      }),
      })
    }));
    $('[data-form="topup"]').form({
      lit: window.lit,
      topup: {
        onReset: function() {

        },
        onSubmit: function(data) {
          var formdata = data;
          var deferred = $.Deferred();
          console.log('topup submit');
          var msisdn = formdata.msisdn;
          if (!validatemsisdn(msisdn) )
          {
            var $error = {
              error : "NotFoundError",
              error_description: "SUBSCRIPTION_NOT_FOUND"
            };
            showError($error);
            return
          }
          sc.xhr('/api/service/customer/msisdn/' + validatemsisdn(msisdn),
           function(err,data) {
            if (err) {
              showError(err);
            return
            }
            var amount = parseInt(formdata.amount, 10);
            var email = formdata.email;
            if (!email) {
              if (msisdn.slice(0, 2) === '88') {
                email = msisdn.slice(2) + '@grameenphone.com';
              }
              else {
                email = msisdn + '@grameenphone.com'
              }
            }
            return sc.topup({
              msisdn: validatemsisdn(msisdn),
              amount: amount,
              email: email,
              name: formdata.name
            }).then(function(result) {
            $('#portwallet-recharge').portwallet(result.invoice,{
              callback: function(result){
                console.log('portwallet callback', result);
              }
            });
          }, function(err) {
              // FIXME: Handle topup error
              //alert(JSON.stringify(err, null, 2));
              showError(err);
            });
          })
        },
        errorHandler: {
          callback: function(err){
            $.each(err,function(index,error){
             showError({
              error: error.error,
              error_description: error.errormessage
             });
            })

          }
        }
      }
    });
  }
  if(sc.access_token){
    $.when(
      xhr('/api/me/details'),
      xhr('/api/service/accounts?active=true'),
      xhr('/api/service/balance')
    ).done(function(details, accounts, balances) {
      var opts = {};
      opts.getEmergencyLoan = window.lit.topup_desc_loggedin
      .replace('{{MSISDN}}',details.msisdn);
      if ( details.givenName == undefined){
        details.givenName = '';
      }
      if ( details.familyName == undefined){
        details.familyName = '';
      }
      opts.username = details.givenName + ' ' + details.familyName;
      opts.useremail = details.email;
      opts.loggedin = true;
      opts.balance = with2Decimals( balances.filter(function(account) {
        return account.unit.currencyid === 101000
      }).map(function(account) {
        return account.balance / account.unit.relation;
      }).reduce(function(a, b) {
        return a + b;
      }) );



      buildpage(opts);
    });
  }else{
    buildpage({loggedin : false});
  }
});
;
(function() {

  // Promisify SDK's XHR.
  function xhr() {
    var deferred = $.Deferred();

    var args = Array.prototype.slice.call(arguments);

    args.push(function(err, data) {
      if (err) {
        return deferred.reject(err);
      }

      return deferred.resolve(data);
    });

    sc.xhr.apply(sc, args);

    return deferred.promise();
  }

  var units = {
    balance: [101000],
    data: [101003],
    sms: [101006]
  }

  function handle(unit) {

    // Basic template.
    var $content = $(selfcare.templates['transfer']({
      // image: selfcare.templates['partials/image']({
      //   href: '#svg-happy-transfer',
      //   viewbox: "0 0 156.96 221.15",
      //   width: "157px",
      //   height: "221.2px",
      //   classes:"happytransfer"
      // }),
      // image: selfcare.templates['partials/image']({
      //   href: '#svg-happy',
      //   viewbox: "0 0 192.53 222.88",
      //   width: "187px",
      //   height: "216.47px",
      //   classes:"happytransferdata"
      // }),
      title: window.lit['transfer_' + unit + '_title2'],
      description: window.lit['transfer_' + unit + '_description'],
      titleright: window.lit['transfer_' + unit + '_titleright'],
      descriptionlong: window.lit['transfer_' + unit + '_descriptionlong'],
      transferForm: selfcare.templates['forms/transfer']({
        lit: window.lit,
        type: unit,
        description: window.lit['transferform_' + unit + '_description'],
        btntxt: window.lit['transferform_' + unit + '_btntxt']
      }),
      transferhistory: selfcare.templates['partials/transferhistory']({
        type: unit,
        lit: window.lit
      }),
      class: 'transfer-'+unit
    }));

    $('.main').html($content);

    $.when(
      xhr('/api/service/history/admin'),
      xhr('/api/service/accounts'),
      xhr('/api/service/balance')
    ).done(function(history, accounts,balances) {

      //
      // Make balance.
      //

      var $balance = $content.find('[data-balance]');

      accounts = balances.filter(function(account) {
        return units[unit].indexOf(account.unit.currencyid) >= 0;
      });

      var balance = 0;
      var currencyname  = '';
      if (accounts.length > 0) {
        balance = accounts
        .map(function(account) {
          return account.balance / account.unit.relation;
        })
        .reduce(function(a, b) {
          return a + b;
        });
        currencyname = window.lit['currency_'+accounts[0].currencyname.replace(/\s/g, '_')];
      }

      if (/taka|tk/.test(accounts[0].currencyname.toLowerCase())) {
        balance = with2Decimals(balance);
      } else {
        balance = balance.toFixed(0);
     }

      $balance.text(balance + ' ' + currencyname || '');

      //
      // Make history.
      //

      var $list = $content.find('[data-transfer-history]');
      var template = selfcare.templates['partials/transferhistory_item'];
      var filtered = history.filter(function(item) {
        return item.transferamount &&
               units[unit].indexOf(item.currency.currencyid) >= 0;
      });
      if (!filtered.length) {
        $list.append('' +
          '<tr>' +
            '<td colspan="3" class="text-center">' +
              window.lit['noitems'] +
            '</td>' +
          '</tr>'
        );
      }
      filtered.forEach(function(item) {
        var number = item.targetsubscriberaddress.toString();
        number = number.slice(2,6)+'-'+number.slice(6,9)+'-'+number.slice(9);

        var amount =  (item.charge / item.currency.relation);
        var splittedtranferfullamount = '';
        if (item.charge !== item.transferamount){
          splittedtranferfullamount = (item.transferamount / item.currency.relation);
        }
        if (/taka|tk/.test(item.currency.currencyname.toLowerCase())) {
          amount = with2Decimals(amount);
          if(splittedtranferfullamount!= ''){
            splittedtranferfullamount = ' / ' + with2Decimals(splittedtranferfullamount) + ' ' + window.lit['currency_'+item.currency.currencyname.replace(/\s/g, '_')];
          }
        } else {
          amount = amount.toFixed(0);
          if(splittedtranferfullamount!= ''){
            splittedtranferfullamount = ' / ' + splittedtranferfullamount.toFixed(0) + ' ' + window.lit['currency_'+item.currency.currencyname.replace(/\s/g, '_')];
          }
        }

        $list.append(template({
          date: moment(item.timestamp).format('LLL'),
          number: number, //item.targetsubscriberaddress,
          amount: amount + ' ' + window.lit['currency_'+item.currency.currencyname.replace(/\s/g, '_')] + splittedtranferfullamount
        }));
      });

    });
  }

  E42Handler.onPage('/sitemap/tintin/share-balance', function(url) {
    handle('balance');
  });

  E42Handler.onPage('/sitemap/tintin/share-data', function(url) {
    handle('data');
  });

})();
;
E42Handler.onPage('/sitemap/tintin/usage-history', function(url) {

  var $content = $(selfcare.templates['usagehistory']({
    lit:window.lit,
    /*image: selfcare.templates['partials/image']({
      href: '#svg-history',
      viewbox: '0 0 195.49 224.32',
      height: '220px',
      width: '191px',
      classes: 'mng-and-usage'
    })*/
  }));

  $(".main").html($content);

  // datepicker get date
  function getDate( element ) {
    if (element.value !== ''){
      date = moment(element.value,'YYYY-MM-DD').toDate();
    } else {
      date = null;
    }
    return date;
  }


  var $fromInput = $('[data-datepicker="from"]'),
      $toInput = $('[data-datepicker="to"]');

  // TODO: make this work :-)
  $(document).on('change', '[data-datepicker="from"]', function(){
    $toInput.datepicker( 'option', 'minDate', $(this).datepicker('getDate') );
  });
  $(document).on('change', '[data-datepicker="to"]', function(){
    $fromInput.datepicker( 'option', 'maxDate', $(this).datepicker('getDate') );
  });

  $(document).on('click','[data-downloadhistory]',function(event){
    event.preventDefault();
    var data = $(this).closest('form').serializeObject();
    if(data && data.from && data.to){
        var fdatefrom = moment(data.from, 'YYYY-MM-DD').format('YYYY-MM-DD') + 'T00:00:00Z';
        servicepars = '?servicepar(startdate,' + fdatefrom + ')&';
        var fdateto = moment(data.to, 'YYYY-MM-DD').format('YYYY-MM-DD') + 'T23:59:59Z';
        servicepars += 'servicepar(enddate,' + fdateto + ')';
    }
    sc.xhr({
      url:'/api/service/history/pdf'+servicepars
      },function(err,data){
        $('[data-gethistorypdf]').remove();
        var $form = $('<form data-gethistorypdf action="/api/service/history/getpdf" method="get"><input type="hidden" name="filename" value="' + data.filename +'"/></form>');
        $('body').append($form);
        $form.submit();
        //console.log('pdf',data);
      });
  });

  $(document).on('click','th[data-column][data-sort]', function(){
    var $elems = $($(this).closest('table')).find('tr.data');
    var action = $(this).data('column');

    if($(this).data('dir') === 'desc' || !$(this).data('dir')){
      $elems.sort(function(a, b){
         if(action!=='timestamp'){
          var nameA = $(a).find('[data-column="' + action + '"]').html().toUpperCase();
          var nameB = $(b).find('[data-column="' + action + '"]').html().toUpperCase();
        }else{
          var nameA = moment($(a).find('[data-column="' + action + '"]').html(),'LLL').format('YYYYMMDDHHmmss');
          var nameB = moment($(b).find('[data-column="' + action + '"]').html().toUpperCase(),'LLL').format('YYYYMMDDHHmmss');
        }
        if (nameA <= nameB) {
          return -1;
        }
        else {
          return 1;
        }
      })
      $(this).data('dir','asc');
    }else {
      $elems.sort(function(a, b){
        if(action!=='timestamp'){
          var nameA = $(a).find('[data-column="' + action + '"]').html().toUpperCase();
          var nameB = $(b).find('[data-column="' + action + '"]').html().toUpperCase();
        }else{
          var nameA = moment($(a).find('[data-column="' + action + '"]').html(),'LLL').format('YYYYMMDDHHmmss');
          var nameB = moment($(b).find('[data-column="' + action + '"]').html().toUpperCase(),'LLL').format('YYYYMMDDHHmmss');
        }
        if (nameA >= nameB) {
          return -1;
        }
        else {
          return 1;
        }
      })
      $(this).data('dir','desc');
    }

    $($(this).closest('table')).find('tr.data').remove();
    $($(this).closest('table')).append($elems);
    $('th[data-column][data-sort] span').removeClass('sortasc');
    $('th[data-column][data-sort] span').removeClass('sortdesc');
    $(this).find('span').addClass($(this).data('dir') === 'asc' ? 'sortasc':'sortdesc');
  })

});
